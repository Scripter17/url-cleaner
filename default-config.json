{
	"strict_mode": true,
	"cache_path": "cache.sqlite",
	"docs": {
		"description": [
			"The default config; Meant for general purpose every day URL Cleaning."
		],
		"flags": {
			"breezewiki": "Replace fandom/known Breezewiki hosts with the `breezewiki-host` variable.",
			"unbreezewiki": "Replace Breezewiki hosts with fandom.com.",
			"nitter": "Replace twitter/known Nitter hosts with the `nitter-host` variable.",
			"unnitter": "Replace Nitter hosts with x.com.",
			"invidious": "Replace youtube/known Invidious hosts with the `invidious-host` variabel.",
			"uninvidious": "Replace Invidious hosts with youtube.com",
			"embed-compatibility": "Sets the domain of twitter domiains (and supported twitter redirects like `vxtwitter.com`) to the variable `twitter-embed-host` and `bsky.app` to the variable `bsky-embed-host`.",
			"discord-unexternal": "Replace `images-ext-1.discordapp.net` with the original images they refer to.",
			"assume-1-dot-2-is-redirect": "Treat all hosts that match the Regex `^.\\...$` as redirects. Let's be real, they all are.",
			"bypass.vip": "Use [bypass.vip](https://bypass.vip) to expand linkvertise and some other links.",
			"no-https-upgrade": "Disable replacing `http://` with `https://`.",
			"no-network": "Don't make any HTTP requests.",
			"no-unmangle-host-is-http-or-https": "Don't convert `https://https//example.com/abc` to `https://example.com/abc`.",
			"no-unmangle-path-is-url": "Don't convert `https://example1.com/https://example2.com/user` to `https://example2.com/abc`.",
			"no-unmangle-path-is-url-encoded-url": "Don't convert `https://example.com/https%3A%2F%2Fexample.com%2Fuser` to `https://example.com/user`.",
			"no-unmangle-second-path-segment-is-url": "Don't convert `https://example1.com/profile/https://example2.com/profile/user` to `https://example2.com/profile/user`.",
			"no-unmangle-subdomain-ends-in-reg-domain": "Don't convert `https://profile.example.com.example.com` to `https://profile.example.com`.",
			"no-unmangle-subdomain-starting-with-www-segment": "Don't convert `https://www.username.example.com` to `https://username.example.com`.",
			"no-unmangle-twitter-first-path-segment-is-twitter-domain": "If a twitter domain's first path segment is a twitter domain, don't remove it.",
			"onion-location": "Replace hosts with results from the `Onion-Location` HTTP header if present. This makes an HTTP request one time per domain and caches it.",
			"tor2web": "Append the suffix specified by the `tor2web-suffix` variable to `.onion` domains.",
			"tor2web2tor": "Replace `**.onion.**` domains with `**.onion` domains.",
			"tumblr-unsubdomain-blog": "Changes `blog.tumblr.com` URLs to `tumblr.com/blog` URLs. Doesn't move `at` or `www` subdomains.",
			"unmangle": "\"Unmangle\" certain \"invalid but I know what you mean\" URLs. Should not be used with untrusted URLs as malicious actors can use this to sneak malicuous URLs past, for example, email spam filters.",
			"unmobile": "Convert `https://m.example.com`, `https://mobile.example.com`, `https://abc.m.example.com`, and `https://abc.mobile.example.com` into `https://example.com` and `https://abc.example.com`.",
			"youtube-unlive": "Turns `https://youtube.com/live/abc` into `https://youtube.com/watch?v=abc`.",
			"youtube-unplaylist": "Removes the `list` query parameter from `https://youtube.com/watch` URLs.",
			"youtube-unshort": "Turns `https://youtube.com/shorts/abc` into `https://youtube.com/watch?v=abc`.",
			"youtube-unembed": "Turns `https://youtube.com/embed/abc` into `https://youtube.com/watch?v=abc`.",
			"remove-unused-search-query": "Remove search queries from URLs that aren't search results (for example, posts).",
			"instagram-unprofilecard": "Turns `https://instagram.com/username/profilecard` into `https://instagram.com/username`.",
			"keep-lang": "Keeps language query parameters."
		},
		"vars": {
			"breezewiki-host": "The domain to replace fandom/Breezewiki domains with when the `breezewiki` flag is enabled",
			"nitter-host": "The domain to replace twitter/nitter domains with when the `nitter` flag is enabled",
			"invidious-host": "The domain to replace twitter/Invidious domains with when the `invidious` flag is enabled",
			"twitter-embed-host": "The domain to use for twitter when the `embed-compatibility` flag is set. Defaults to `vxtwitter.com`.",
			"bluesky-embed-host": "The domain to use for bluesky when the `embed-compatibility` flag is set. Defaults to `fxbsky.com`.",
			"bypass.vip-api-key": "The API key used for [bypass.vip](https://bypass.vip)'s premium backend. Overrides the `URL_CLEANER_BYPASS_VIP_API_KEY` environment variable.",
			"tor2web-suffix": "The suffix to append to the end of `.onion` domains if the flag `tor2web` is enabled. Should not start with `.` as that's added automatically. Left unset by default."
		},
		"environment_vars": {
			"URL_CLEANER_BYPASS_VIP_API_KEY": "The API key used for [bypass.vip](https://bypass.vip)'s premium backend. Can be overridden with the `bypass.vip-api-key` variable."
		},
		"sets": {
			"bypass.vip-host-without-www-dot-prefixes": "The `HostWithoutWWWDotPrefix`es of websites bypass.vip can expand.",
			"email-link-format-1-hosts": "(TEMPORARY NAME) Hosts that use unknown link format 1.",
			"https-upgrade-host-blacklist": "Hosts to never upgrade from `http` to `https`.",
			"redirect-host-without-www-dot-prefixes": "Hosts that are considered redirects in the sense that they return HTTP 3xx status codes. URLs with hosts in this set (as well as URLs with hosts that are \"www.\" then a host in this set) will have the `ExpandRedirect` mapper applied.",
			"redirect-reg-domains": "The `redirect-host-without-www-dot-prefixes` set but using the `RegDomain` of the URL.",
			"remove-empty-fragment-reg-domain-blacklist": "The RegDomains to not remove an empty fragment (the #stuff at the end (but specifically just a #)) from.",
			"remove-empty-query-reg-domain-blacklist": "The RegDomains to not remove an empty query from.",
			"remove-www-subdomain-reg-domain-blacklist": "`RegDomain`s where a `www` `Subdomain` is important and thus won't have it removed.",
			"unmangle-path-is-url-blacklist": "Effectively the `no-unmangle-path-is-url` flag for the specified `Host`s.",
			"unmangle-subdomain-ends-in-reg-domain-reg-domain-blacklist": "Effectively the `no-unmangle-subdomain-ends-in-reg-domain-reg-domain-blacklist` flag for the specified `RegDomain`s.",
			"unmangle-subdomain-starting-with-www-segment-reg-domain-blacklist": "Effectively the `no-unmangle-subdomain-starting-with-www-segment` flag for the specified `RegDomain`s.",
			"unmobile-reg-domain-blacklist": "Effectively unsets the `unmobile` flag for the specified `RegDomain`s.",
			"utps": "The set of \"universal tracking parameters\" that are always removed for any URL with a host not in the `utp-host-whitelist` set. Please note that the `utps` common mapper in the default config also removes any parameter starting with any string in the `utp-prefixes` list and thus parameters starting with those can be omitted from this set.",
			"utps-reg-domain-whitelist": "RegDomains to never remove universal tracking parameters from."
		},
		"lists": {
			"utp-prefixes": "If a query parameter starts with any of the strings in this list (such as `utm_`) it is removed."
		},
		"maps": {
			"hwwwwdp_lang_query_params": "The name of the `HostWithoutWWWDotPrefix`'s language query parameter."
		},
		"named_partitionings": {
			"hwwwwdp_categories": "Categories of similar websites with shared cleaning methods."
		},
		"job_context": {
			"vars": {
				"redirect_shortcut": "For links that use redirect sites but have the final URL in the link's text/title/whatever, this is used to avoid sending that HTTP request.",
				"site_name": "For furaffinity contact info links, the name of the website the contact info is for. Used for unmangling.",
				"link_text": "The text of the link the job came from."
			}
		},
		"jobs_context": {
			"vars": {
				"SOURCE_REG_DOMAIN": "The RegDomain of the \"source\" of the jobs. Usually the webpage it came from.",
				"SOURCE_URL": "The URL of the \"source\" of the jobs. Usually the webpage it came from."
			}
		}
	},
	"params": {
		"vars": {
			"breezewiki-host": "breezewiki.com",
			"nitter-host": "nitter.net",
			"invidious-host": "yewtu.be",
			"bluesky-embed-host": "fxbsky.app",
			"twitter-embed-host": "vxtwitter.com"
		},
		"sets": {
			"bypass.vip-host-without-www-dot-prefixes": [
				"adfoc.us", "admiregirls-byme.com", "all-fans.online", "badgirlsdrop.com", "bit.do", "bit.ly", "booo.st", "boost.ink", "bst.gg",
				"cemendemons.com", "depravityweb.co", "fansmega.com", "free-leaks.com", "goldmega.online", "hotstars-leaks.com", "ift.tt", "is.gd",
				"leakutopia.site", "links-loot.com", "linksloot.net", "linkvertise.com", "loot-link.com", "loot-links.com", "lootdest.com",
				"lootdest.info", "lootdest.org", "lootlink.org", "lootlinks.co", "mboost.me", "mega-guy.com", "megadropz.com", "megadumpz.com",
				"newsociety0.co", "ofpacksmega.com", "only-fun.xyz", "onlymega.co", "paster.so", "pnp-drops.me", "premiumstashdrop.com", "rareofhub.com",
				"rebrand.ly", "rekonise.com", "secret-links.com", "secretpack-links.com", "socialwolvez.com", "st.news", "sub2get.com", "sub2unlock.com",
				"sub2unlock.io", "sub2unlock.net", "sub4unlock.io", "t.co", "tavernleaks.com", "thepremium.online", "tiny.cc", "tinylf.com",
				"tinylink.onl", "tinyurl.com", "tomxcontent.com", "unlock.com", "unlocknow.net", "v.gd", "wc.wtf", "work.ink", "xprmpacks.com", "go.undp.org"
			],
			"email-link-format-1-hosts": ["action.openmedia.org"],
			"https-upgrade-host-blacklist": ["orteil.dashnet.org", "localhost"],
			"redirect-host-without-www-dot-prefixes": [
				"2kgam.es", "4.nbcla.com", "a.co", "ab.co", "abc7.la", "abc7ne.ws", "adobe.ly", "aje.io", "aje.io", "amzn.asia", "amzn.ew", "amzn.to",
				"api.link.agorapulse.com", "apple.co", "b23.tv", "bbc.in", "bit.ly", "bitly.com", "bitly.com", "bityl.co", "blizz.ly", "blockclubchi.co",
				"bloom.bg", "boxd.it", "buff.ly", "bzfd.it", "cbr.sh", "cbsn.ws", "cfl.re", "chn.ge", "chng.it", "clckhl.co", "cnb.cx", "cnn.it",
				"cons.lv", "cos.lv", "cutt.ly", "db.tt", "dcdr.me", "deezer.page.link", "depop.app.link", "dis.gd", "dlvr.it", "econ.st", "etsy.me",
				"fal.cn", "fanga.me", "fb.me", "fdip.fr", "flip.it", "forms.gle", "g.co", "glo.bo", "go.bsky.app", "go.forbes.com", "go.icj-cij.org",
				"go.microsoft.com", "go.nasa.gov", "gofund.me", "goo.gl", "goo.su", "gum.co", "hmstr.fr", "hulu.tv", "ift.tt", "intel.ly", "interc.pt",
				"is.gd", "iwe.one", "j.mp", "jbgm.es", "k00.fr", "katy.to", "kck.st", "kre.pe", "kre.pe", "kre.pe", "l.euronews.com", "l.leparisien.fr",
				"l.leparisien.fr", "lin.ee", "line.ee", "link.animaapp.com", "linkr.it", "loom.ly", "loom.ly", "lpc.ca", "m.sesame.org", "msft.it",
				"msi.gm", "mzl.la", "n.pr", "nas.cr", "nbc4i.co", "ninten.do", "ntdo.co.uk", "nvda.ws", "ny.ti", "nyer.cm", "nyp.st", "nyti.ms",
				"nyto.ms", "on.forbes.com", "on.ft.com", "on.ft.com", "on.msnbc.com", "on.nyc.gov", "onl.bz", "onl.la", "onl.sc", "operagx.gg",
				"orlo.uk", "ow.ly", "peoplem.ag", "perfht.ml", "pin.it", "pixiv.me", "play.st", "politi.co", "prn.to", "propub.li", "pulse.ly",
				"py.pl", "qr1.be", "rb.gy", "rb.gy", "rblx.co", "rdbl.co", "redd.it", "reut.rs", "rzr.to", "s.goodsmile.link", "s.team", "s76.co",
				"share.firefox.dev", "shor.tf", "shorturl.at", "sonic.frack.deals", "spoti.fi", "spr.ly", "spr.ly", "spr.ly", "sqex.to", "t.co",
				"t.ly", "theatln.tc", "thecut.io", "thef.pub", "thr.cm", "thrn.co", "tiny.cc", "tinylf.com", "tmblr.co", "tmz.me", "to.pbs.org",
				"tps.to", "tr.ee", "trib.al", "u.jd.com", "unes.co", "unf.pa", "uni.cf", "uniceflink.org", "visitlink.me", "w.wiki", "wlgrn.com",
				"wlo.link", "wn.nr", "wp.me", "wwdc.io", "x.gd", "xbx.ly", "xhslink.com", "yrp.ca", "n.opn.tl"
			],
			"redirect-reg-domains": [
				"goo.gl", "o93x.net", "pusle.ly", "visitlink.me", "page.link"
			],
			"remove-www-subdomain-reg-domain-blacklist": ["facebook.com", "shorturl.at", "teepublic.com"],
			"unmangle-path-is-url-blacklist": [],
			"unmangle-subdomain-ends-in-reg-domain-reg-domain-blacklist": [],
			"unmangle-subdomain-starting-with-www-segment-reg-domain-blacklist": ["uscourts.gov"],
			"unmobile-reg-domain-blacklist": ["tumblr.com", "deviantart.com"],
			"utps": [
				"Tcsack", "__hsfp", "__hssc", "__hstc", "__io_lv", "__s", "_branch_match_id", "_branch_referrer", "_clde", "_cldee", "_ga",
				"_gl", "_hsenc", "_io_session_id", "_kx", "_ope", "_openstat", "_sgm_action", "_sgm_campaign", "_sgm_source", "_trkparms",
				"_trksid", "_zucks_suid", "action_object_map", "action_ref_map", "action_type_map", "adfrom", "adjust_adgroup", "adjust_campaign",
				"adjust_creative", "adjust_referrer", "adjust_tracker", "adjust_tracker_limit", "admitad_uid", "af_ad", "af_adset", "af_click_lookback",
				"af_force_deeplink", "af_xp", "aiad_clid", "asgtbndr", "at_campaign", "at_campaign_type", "at_creation", "at_emailtype", "at_link",
				"at_link_id", "at_link_origin", "at_link_type", "at_medium", "at_ptr_name", "at_recipient_id", "at_recipient_list", "at_send_date",
				"awc", "bsft_aaid", "bsft_clkid", "bsft_eid", "bsft_ek", "bsft_mid", "bsft_uid", "cjdata", "cjevent", "click", "cm_cr", "cm_me", "cmpid",
				"cuid", "cx_click", "cx_recsOrder", "cx_recsWidget", "dclid", "dpg_campaign", "dpg_content", "dpg_medium", "dpg_source", "ebisAdID",
				"erid", "et_rid", "external_click_id", "famad_xuid", "fb_action_ids", "fb_action_types", "fb_comment_id", "fb_ref", "fb_source",
				"fbclid", "gad_source", "gbraid", "gci", "gclid", "gclsrc", "gps_adid", "guccounter", "guce_referrer", "guce_referrer_sig",
				"hsCtaTracking", "hsa_acc", "hsa_ad", "hsa_cam", "hsa_grp", "hsa_kw", "hsa_la", "hsa_mt", "hsa_net", "hsa_ol", "hsa_src",
				"hsa_tgt", "hsa_ver", "hsctatracking", "icid", "iclid", "intcmp", "ir_adid", "ir_campaignid", "ir_partnerid", "irclickid", "irgwc",
				"is_retargeting", "itm_campaign", "itm_content", "itm_medium", "itm_source", "itm_term", "jmtyClId", "maf", "mc_eid", "message",
				"mindbox", "mindbox-click-id", "mindbox-message-key", "mkt_tok", "ml_subscriber", "ml_subscriber_hash", "msclkid", "mt_link_id",
				"mtm_campaign", "mtm_cid", "mtm_content", "mtm_group", "mtm_keyword", "mtm_medium", "mtm_placement", "mtm_source", "nx_source", "oft_c",
				"oft_ck", "oft_d", "oft_id", "oft_ids", "oft_k", "oft_lk", "oft_sk", "oly_anon_id", "oly_enc_id", "oprtrack", "pk_campaign", "pk_cid",
				"pk_medium", "pk_source", "pk_vid", "rb_clickid", "ref", "referer", "rtkcid", "s_cid", "sms_click", "sms_source", "sms_uph", "source",
				"spot_im_redirect_source", "srsltid", "ss_email_id", "sscid", "tduid", "ttclid", "twclid", "unicorn_click_id", "user_email_address",
				"usqp", "utm", "vc_lpp", "vero_conv", "vero_id", "vgo_ee", "vsm_cid", "vsm_pid", "vsm_type", "wbraid", "wickedid", "wpb_advertiser",
				"wpb_id", "wt_mc", "xtor", "yclid", "ymclid", "ymid", "ysclid"
			],
			"utps-reg-domain-whitelist": ["bambulab.com"]
		},
		"lists": {
			"utp-prefixes": [
				"__s", "at_custom", "cm_mmc", "utm_"
			]
		},
		"maps": {
			"hwwwwdp_lang_query_params": {
				"map": {
					"instagram.com": "hl",
					"threads.net": "hl"
				},
				"else": "lang"
			}
		},
		"named_partitionings": {
			"hwwwwdp_categories": {
				"disney": ["disney.com", "marvel.com"],
				"alibaba": ["alibaba.com", "aliexpress.com"],
				"nitter": [
					"26oq3gioiwcmfojub37nz5gzbkdiqp7fue5kvye7d4txv4ny6fb4wwid.onion", "4g47cxugkohbweao2x66nnxxfoe3k7gdfzxej537nhdbwr522sbjxeqd.onion", "4kzgzonccxuv4ctforjqx565jgd4bocgnzsy3dg4fmdf3ye2iciq.b32.i2p",
					"6g7w5lt6qcidh6vtue64udzld2mjnvxlpgddvn34qywxafxdv6a3w5id.onion", "aaaaaxx74hbzeibageieowryhsqvimbdiitfkfe47tvgawkwkjh3coqd.onion",
					"axd6uavsstsrvstva4mzlzh4ct76rc6zdug3nxdgeitrzczhzf4q.b32.i2p", "bird.habedieeh.re",
					"bird.habeehrhadazsw3izbrbilqajalfyqqln54mrja3iwpqxgcuxnus7eid.onion", "ckzuw5misyahmg7j5t5xwwuj3bwy62jfolxyux4brfflramzsvvd3syd.onion",
					"ec5nvbycpfa5k6ro77blxgkyrzbkv7uy6r5cngcbkadtjj2733nm3uyd.onion", "erpnncl5nhyji3c32dcfmztujtl3xaddqb457jsbkulq24zqq7ifdgad.onion",
					"fbdi323aj3t6hdx4jtkuwxrnafzskquciowu2yu3jizfssaq35aow6ad.onion", "gseczlzmiv23p5vhsktyd7whquq2uy3c5fgkmdohh453qp3daoua.b32.i2p",
					"i23nv6w3juvzlw32xzoxcqzktegd4i4fu3nmnc2ewv4ggiu4ledwklad.onion", "ibsboeui2im5o7dxnik3s5yghufumgy5abevtij5nbizequfpu4qi4ad.onion",
					"iwgu3cv7ywf3gssed5iqtavmrlszgsxazkmwwnt4h2kdait75thdyrqd.onion", "jebqj47jgxleaiosfcxfibx2xdahjettuydlxbg64azd4khsxv6kawid.onion",
					"n.sneed4fmhevap3ci4xhf4wgkf72lwk275lcgomnfgwniwmqvaxyluuid.onion", "nitraeju2mipeziu2wtcrqsxg7h62v5y4eqgwi75uprynkj74gevvuqd.onion",
					"nitter.catsarchywsyuss6jdxlypsw5dc7owd5u5tr6bujxb7o6xw2hipqehyd.onion",
					"nitter.coffee2m3bjsrrqqycx6ghkxrnejl2q6nl7pjw2j4clchjj6uk5zozad.onion",
					"nitter.daturab6drmkhyeia4ch5gvfc2f3wgo6bhjrv3pz6n7kxmvoznlkq4yd.onion",
					"nitter.esmail5pdn24shtvieloeedh7ehz3nrwcdivnfhfcedl7gf4kwddhkqd.onion",
					"nitter.g4c3eya4clenolymqbpgwz3q3tawoxw56yhzk4vugqrl6dtu3ejvhjid.onion", "nitter.holo-mix.com", "nitter.io.lol", "nitter.kavin.rocks",
					"nitter.kylrth.com", "nitter.l4qlywnpwqsluw65ts7md3khrivpirse744un3x7mlskqauz5pyuzgqd.onion", "nitter.lucabased.xyz",
					"nitter.lunar.icu", "nitter.micohauwkjbyw5meacrb4ipicwvwg4xtzl7y7viv53kig2mdcsvwkyyd.onion", "nitter.moomoo.me", "nitter.net",
					"nitter.pjsfkvpxlinjamtawaksbnnaqs2fc2mtvmozrzckxh7f3kis6yea25ad.onion", "nitter.poast.org", "nitter.priv.loki",
					"nitter.privacydev.net", "nitter.privpw3tndpkw6pnp3g727zfgfdzbu3k6a7chv226s3xymv2p4eiuqyd.onion", "nitter.qwik.space",
					"nitter.rawbit.ninja", "nitter.tiekoetter.com", "nitter.v6vgyqpa7yefkorazmg5d5fimstmvm2vtbirt6676mt7qmllrcnwycqd.onion",
					"nitter7bryz3jv7e3uekphigvmoyoem4al3fynerxkj22dmoxoq553qd.onion", "npf37k3mtzwxreiw52ccs5ay4e6qt2fkcs2ndieurdyn2cuzzsfyfvid.onion",
					"nt.vernccvbvyi5qhfzyqengccj7lkove6bjot2xhh5kajhwvidqafczrad.onion", "nttr2iupbb6fazdpr2rgbooon2tzbbsvvkagkgkwohhodjzj43stxhad.onion",
					"pjsfs4ukb6prmfx3qx3a5ef2cpcupkvcrxdh72kqn2rxc2cw4nka.b32.i2p", "pxrhfmieeeqdu5pi4duscycsxqefqphaxgvvrvdtc3ckqn2mcora.b32.i2p",
					"qwikxx2erhx6qrymued6ox2qkf2yeogjwypqvzoif4fqkljixasr6oid.onion", "r2eqimhkvxboaltbdsectoo3hkf476pyemsdykclexzajbfx5v6ojlyd.onion",
					"tm4rwkeysv3zz3q5yacyr4rlmca2c4etkdobfvuqzt6vsfsu4weq.b32.i2p", "twitit.gq",
			    "twitter.ap3jtgssd7qn4vfoa62gi2ijddoblslbeuw5dan3xt7myvqpura5i4qd.onion",
			    "twitter.cepyxplublbyw2f4axy4pyztfbxmf63lrt2c7uwv6wl4iixz53czload.onion",
			    "twitter.prnoid54e44a4bduq5due64jkk7wcnkxcp5kv3juncm7veptjcqudgyd.onion", "u6ikd6zndl3c4dsdq4mmujpntgeevdk5qzkfb57r4tnfeccrn2qa.b32.i2p",
			    "vernzdedoxuflrrxc4vbatbkpjh4k22ecgiqgimdiif62onhagva.b32.i2p", "vfaomgh4jxphpbdfizkm5gbtjahmei234giqj4facbwhrfjtcldauqad.onion",
			    "wiio4sgs4247brk7hj6qck2jxnvldwfdbguigc5ivpxrsegnliyfvuqd.onion", "xcancel.com", "xnaas.github.io"
				],
				"fixvx": ["fixupx.com", "fixvx.com", "fxtwitter.com", "girlcockx.com", "stupidpenisx.com", "vxtwitter.com", "yiffx.com"],
				"lmgtfy": ["lmgtfy.com", "lmgtfy.app", "letmegooglethat.com", "lmgtfy.click", "letmegoogleforyou.com", "lmgt.org"],
				"breezewiki": [
					"antifandom.com", "breeze.hostux.net", "breeze.mint.lgbt", "breeze.nohost.network", "breeze.whateveritworks.org",
					"breezewiki.catsarch.com", "breezewiki.com", "breezewiki.frontendfriendly.xyz", "breezewiki.hyperreal.coffee", "breezewiki.nadeko.net",
					"breezewiki.nadekonfkhwlxwwk4ycbvq42zvcjmvo5iakl4tajojjwxd4a5dcetuyd.onion", "breezewiki.pussthecat.org", "breezewiki.woodland.cafe",
					"bw.artemislena.eu", "bw.hamstro.dev", "bw.projectsegfau.lt", "bw.skunky7dhv7nohsoalpwe3sxfz3fbkad7r3wk632riye25vqm3meqead.onion",
					"nerd.whatever.social", "z.opnxng.com"
				],
				"invidious": [
					"inv.nadeko.net", "inv.nadekonw7plitnjuawu6ytjsl7jlglk2t6pyq6eftptmiv3dvqndwvyd.onion", "invidious.nerdvpn.de", "yewtu.be",
					"zzlsbhhfvwg3oh36tcvx4r7n6jrw7zibvyvfxqlodcwn3mfrvzuq.b32.i2p"
				],
				"discord-external": ["images-ext-1.discordapp.net", "images-ext-2.discordapp.net", "images-ext-3.discordapp.net"],
				"instagram": ["instagram.com", "threads.net"]
			}
		},
		"http_client_config": {
			"default_headers": {
				"user-agent": "curl/8.2.1",
				"sec-gpc": "1",
				"dnt": "1"
			},
			"referer": false,
			"redirect_policy": "None"
		}
	},
	"commons": {
		"mappers": {
			"extract-from-page-no-if": {"All": [
				{"Common": "universal"},
				{"SetPart": {
					"part": "Whole",
					"value": {"Cache": {
						"category": "redirect",
						"key": {"Part": "Whole"},
						"value": {"ExtractBetween": {
							"value": {"HttpRequest": {}},
							"start": {"CommonVar": "start"},
							"end": {"CommonVar": "end"}
						}}
					}}
				}}
			]},

			"extract-from-page": {"IfCondition": {
				"condition": {"Not": {"FlagIsSet": "no-network"}},
				"mapper": {"Common": {"name": "extract-from-page-no-if", "args": {"vars": {"start": {"CommonVar": "start"}, "end": {"CommonVar": "end"}}}}}
			}},

			"redirect-shortcut": {"IfCondition": {
				"condition": {"All": [
					{"Not": {"StringIs": {"left": {"ContextVar": "redirect_shortcut"}, "right": null}}},
					{"StringIs": {"left": {"JobsContextVar": "SOURCE_REG_DOMAIN"}, "right": {"CommonVar": "expected_reg_domain"}}},
					{"Not": {"StringIs": {"left": {"ScratchpadVar": "alt_text_used"}, "right": "true"}}}
				]},
				"mapper": {"All": [
					{"SetPart": {"part": "Whole", "value": {"ContextVar": "redirect_shortcut"}}},
					{"SetScratchpadVar": {"name": "redirect_shortcut_used", "value": "true"}}
				]}
			}},

			"universal": {"Rules": [
				{
					"condition": {"All": [
						{"PartIs": {"part": "Scheme", "value": "http"}},
						{"Not": {"FlagIsSet": "no-https-upgrade"}},
						{"Not": "HostIsIp"},
						{"Not": {"PartMatches": {
							"part": "Host",
							"matcher": {"InSet": "https-upgrade-host-blacklist"}
						}}}
					]},
					"mapper": {"SetPart": {"part": "Scheme", "value": "https"}}
				},
				{"SharedCondition": {
					"condition": {"Not": {"PartIs": {"part": "RegDomain", "value": null}}},
					"rules": [
						{
							"condition": {"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "utps-reg-domain-whitelist"}}}},
							"mapper": {
								"RemoveQueryParamsMatching": {"Any": [
									{"InSet": "utps"},
									{"ContainsAnyInList": {"where": "Start", "list": "utp-prefixes"}}
								]}
							}
						},
						{
							"condition": {"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "utps-reg-domain-whitelist"}}}},
							"mapper": {"ModifyPart": {
								"part": "Fragment",
								"modification": {"RemoveQueryParamsMatching": {"Any": [
									{"InSet": "utps"},
									{"ContainsAnyInList": {"where": "Start", "list": "utp-prefixes"}}
								]}
							}}}
						},
						{
							"condition": {"All": [
								{"SubdomainIs": "www"},
								{"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "remove-www-subdomain-reg-domain-blacklist"}}}}
							]},
							"mapper": {"SetPart": {"part": "Subdomain", "value": null}}
						},
						{
							"condition": "HostIsFqdn",
							"mapper": {"SetPart": {
								"part": "Host",
								"value": {"Modified": {
									"value": {"Part": "Host"},
									"modification": {"StripSuffix": "."}
								}}
							}}
						},
						{
							"condition": {"All": [
								{"PartIs": {"part": "Query", "value": ""}},
								{"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "remove-empty-query-reg-domain-blacklist"}}}}
							]},
							"mapper": {"SetPart": {"part": "Query", "value": null}}
						},
						{
							"condition": {"All": [
								{"PartIs": {"part": "Fragment", "value": ""}},
								{"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "remove-empty-fragment-reg-domain-blacklist"}}}}
							]},
							"mapper": {"SetPart": {"part": "Fragment", "value": null}}
						}
					]
				}},
				{
					"condition": {"Not": {"FlagIsSet": "keep-lang"}},
					"mapper": {"RemoveQueryParam": {"ParamsMap": {"map": "hwwwwdp_lang_query_params", "key": {"Part": "HostWithoutWWWDotPrefix"}}}}
				}
			]}
		}
	},
	"rules": [
		{
			"condition": {"All": [
				{"PartIs": {"part": "Whole", "value": "javascript:void(0);"}},
				{"StringIs": {"left": {"JobsContextVar": "SOURCE_REG_DOMAIN"}, "right": "furaffinity.net"}},
				{"StringIs": {"left": {"Modified": {"value": {"ContextVar": "site_name"}, "modification": "Lowercase"}}, "right": "website"}}
			]},
			"mapper": {"SetPart": {
				"part": "Whole",
				"value": {"Join": {"sources": ["https://", {"ContextVar": "link_text"}]}}
			}}
		},
		{"SharedCondition": {
			"condition": {"PartIsOneOf": {"part": "Scheme", "values": ["http", "https"]}},
			"rules": [
				{
					"condition": {"Any": [
						{"PartMatches": {
							"part": "HostWithoutWWWDotPrefix",
							"matcher": {"Any": [
								{"InSet": "redirect-host-without-www-dot-prefixes"},
								{"InSet": "bypass.vip-host-without-www-dot-prefixes"},
								{"IsOneOf": [
									"1link.club", "action.openmedia.org", "allmylinks.com", "api.linkr.bio", "api.pinterest.com", "awin1.com", "bfy.tw", "boxd.it",
									"bugzil.la", "buymeacoff.ee", "buymeacoffee.com", "cach.me", "carleton.ca", "cash.app", "click.notification.elsevier.com",
									"deviantart.com", "duckduckgo.com", "duckduckgo.com", "duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion",
									"e.emailalerts.cnn.com", "facebook.com", "gf.me", "gofundme.com", "gofundme.com", "goodreads.com", "google.com", "gprivate.com",
									"href.li", "instagr.am", "instagram.com", "l.instagram.com", "l.threads.com", "lmddgtfy.net", "lmgtfy2.com", "lnk.bio", "m.vk.com",
									"old.reddit.com", "open.substack.com", "out.reddit.com", "pawoo.net", "pixiv.net", "preview.tinyurl.com", "proxy.notsobot.com",
									"rd.goodreads.com", "reddit.com", "reurl.cc", "shareasale-analytics.com", "shareasale.com", "sketchfab.com", "sketchfab.com",
									"skfb.ly", "smarturl.it", "ss3.shipstation.com", "steamcommunity.com", "subscribestar.adult", "substack.com", "t.umblr.com", "tee.pub",
									"teepublic.com", "tinyurl.com", "toyhou.se", "twpf.jp", "urldefense.com", "vk.com", "youtube.com"
								]},
								{"LengthIs": 4},
								{"Contains": {"value": "google"}}
							]}
						}},
						{"TreatErrorAsFail": {"PartMatches": {
							"part": "RegDomain",
							"matcher": {"Any": [
								{"IsOneOf": ["smartadserver.com", "lnk.to"]},
								{"InSet": "redirect-reg-domains"}
							]}
						}}}
					]},
					"mapper": {"Rule": {
						"Repeat": {
							"rules": [
								{
									"condition": {"PartMap": {
										"part": "HostWithoutWWWDotPrefix",
										"map": {
											"pixiv.net"     : {"PathIs": "/jump.php"},
											"deviantart.com": {"PathIs": "/users/outgoing"},
											"api.linkr.bio" : {"PathIs": "/callbacks/go"}
										}
									}},
									"mapper": {"TryElse": {
										"try": {"SetPart": {
											"part": "Whole",
											"value": {"Modified": {
												"value": {"Part": {"QueryParam": "url"}},
												"modification": {"IgnoreError": "UrlDecode"}
											}}
										}},
										"else": { "SetPart": {
											"part": "Whole",
											"value": {"Modified": {"value": {"Part": "Query"}, "modification": "UrlDecode"}}
										}}
									}}
								},



								{
									"PartMap": {
										"part": "HostWithoutWWWDotPrefix",
										"map": {
											"t.co": {"Common": {
												"name": "redirect-shortcut",
												"args": {"vars": {"expected_reg_domain": "x.com"}}
											}},
											"allmylinks.com": {"Common": {
												"name": "redirect-shortcut",
												"args": {"vars": {"expected_reg_domain": "allmylinks.com"}}
											}},
											"t.umblr.com": {"GetUrlFromQueryParam": "z"},
											"skfb.ly": {"All": [
												{"SetHost": "sketchfab.com"},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "s"}}
											]},
											"smarturl.it": {"IfCondition": {
												"condition": {"Not": {"FlagIsSet": "no-network"}},
												"mapper": {"All": [
													{"Common": "universal"},
													{"CacheUrl": {
														"category": "redirect",
														"mapper": {"SetPart": {
															"part": "Whole",
															"value": {"Modified": {
																"value": {"HttpRequest": {}},
																"modification": {"All": [
																	{"ExtractBetween": {
																		"start": "\"originalUrl\":\"",
																		"end": "\""
																	}},
																	{"Replace": {"find": "\\/", "replace": "/"}}
																]}
															}}
														}}
													}}
												]}
											}},
											"href.li": {"SetPart": {
												"part": "Whole",
												"value": {"Modified": {
													"value": {"Part": "Query"},
													"modification": "UrlDecode"
												}}
											}},
											"instagr.am": {"SetHost": "instagram.com"},
											"bfy.tw": {"Common": {
												"name": "extract-from-page",
												"args": {
													"vars": {
														"start": "href=\"",
														"end": "\""
													},
													"http_client_config_diff": {"danger_accept_invalid_certs": true}
												}
											}},
											"gprivate.com": {"Common": {
												"name": "extract-from-page",
												"args": {
													"vars": {
														"start": "window.location = \"",
														"end": "\""
													},
													"http_client_config_diff": {"danger_accept_invalid_certs": true}
												}
											}},
											"lmddgtfy.net": {"SetHost": "duckduckgo.com"},
											"buymeacoff.ee": {"SetHost": "buymeacoffee.com"},
											"cach.me": {"SetHost": "cash.app"},
											"l.instagram.com": {"GetUrlFromQueryParam": "u"},
											"l.threads.com": {"GetUrlFromQueryParam": "u"},
											"steamcommunity.com": {"IfCondition": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "linkfilter"}},
												"mapper": {"GetUrlFromQueryParam": "u"}
											}},
											"lnk.bio": {"IfCondition": {
												"condition": {"PathIs": "/go"},
												"mapper": {"GetUrlFromQueryParam": "d"}
											}},
											"toyhou.se": {"IfCondition": {
												"condition": {"PathIs": "/~r"},
												"mapper": {"GetUrlFromQueryParam": "q"}
											}},
											"duckduckgo.com": {"IfCondition": {
												"condition": {"PathIs": "/l/"},
												"mapper": {"GetUrlFromQueryParam": "uddg"}
											}},
											"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"IfCondition": {
												"condition": {"PathIs": "/l/"},
												"mapper": {"GetUrlFromQueryParam": "uddg"}
											}},
											"subscribestar.adult": {"IfCondition": {
												"condition": {"PathIs": "/away"},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": {"QueryParam": "url"}},
														"modification": {"All": [
															{"Replace": {"find": "\n", "replace": ""}},
															"Base64Decode"
														]}
													}}
												}}
											}},
											"preview.tinyurl.com": {"All": [
												{"SetPart": {"part": "Subdomain", "value": null}},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "preview"}}
											]},
											"youtube.com": {"IfCondition": {
												"condition": {"PathIs": "/redirect"},
												"mapper": {"GetUrlFromQueryParam": "q"}
											}},
											"out.reddit.com": {"GetUrlFromQueryParam": "url"},
											"e.emailalerts.cnn.com": {"SetPart": {
												"part": "Whole",
												"value": {"Modified": {
													"value": {"Part": "Query"},
													"modification": {"All": [
														{"KeepNthSegment": {"split": "/", "n": 2}},
														{"Remove": 0},
														"Base64Decode",
														{"KeepNthSegment": {"split": ",", "n": -1}}
													]}
												}}
											}},
											"goodreads.com": {"IfCondition": {
												"condition": {"PathIs": "/gp/r.html"},
												"mapper": {"GetUrlFromQueryParam": "U"}
											}},
											"rd.goodreads.com": {"IfCondition": {
												"condition": {"PathIs": "/gp/r.html"},
												"mapper": {"GetUrlFromQueryParam": "U"}
											}},
											"substack.com": {"ConditionChain": [
												{
													"condition": {"PartContains": {"part": "Path", "where": "Start", "value": "/redirect/2/"}},
													"mapper": {"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Part": {"PathSegment": 2}},
															"modification": {"All": [
																{"KeepNthSegment": {"split": ".", "n": 0}},
																"Base64Decode",
																{"JsonPointer": "/e"}
															]}
														}}
													}}
												},
												{
													"condition": {"PathIs": "/app-link/post"},
													"mapper": {"AllowQueryParams": ["publication_id", "post_id", "submitLike", "action"]}
												},
												{
													"condition": {"All": [
														{"PartIs": {"part": {"PathSegment": 0}, "value": "redirect"}},
														{"PartMatches": {"part": {"PathSegment": 1}, "matcher": {"LengthIs": 36}}}
													]},
													"mapper": "RemoveQuery"
												}
											]},
											"open.substack.com": {"IfCondition": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "pub"}},
												"mapper": {"All": [
													{"CopyPart": {"from": {"PathSegment": 1}, "to": "Subdomain"}},
													{"SetPart": {"part": {"PathSegment": 0}, "value": null}},
													{"SetPart": {"part": {"PathSegment": 0}, "value": null}}
												]}
											}},
											"click.notification.elsevier.com": {"IfCondition": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "CL0"}},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": "Path"},
														"modification": {"All": [
															{"KeepSegmentRange": {"split": "/", "start": 2}},
															"UrlDecode"
														]}
													}}
												}}
											}},
											"gf.me": {"All": [
												{"SetHost": "gofundme.com"},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "url_shortener"}}
											]},
											"action.openmedia.org": {"IfCondition": {
												"condition": {"PartContains": {"part": "Path", "value": "/page/email/click", "where": "Start"}},
												"mapper": "RemoveQuery"
											}},
											"1link.club": {"Common": {
												"name": "extract-from-page",
												"args": {
													"vars": {
														"start": "<a id=\"download\" href=\"",
														"end": "\""
													}
												}
											}},
											"tinyurl.com": {"All": [
												{"PartMap": {
													"part": {"PathSegment": 0},
													"map": {
														"preview": "None",
														"app": {"SetPart": {"part": {"PathSegment": 0}, "value": "preview"}}
													},
													"else": {"SetPart": {"part": {"BeforePathSegment": 0}, "value": "preview"}}
												}},
												{"Common": {
													"name": "extract-from-page-no-if",
													"args": {
														"vars": {
															"start": "let url = \"",
															"end": "\""
														}
													}
												}}
											]},
											"lmgtfy2.com": {"IfCondition": {
												"condition": {"Not": {"PartIs": {"part": {"QueryParam": "q"}, "value": null}}},
												"mapper": {
													"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Map": {
																"value": {"Part": {"QueryParam": "s"}},
																"map": {
																	"g": {"Map": {
																		"value": {"Part": {"QueryParam": "t"}},
																		"map": {
																			"w": "https://www.google.com/search?q=",
																			"i": "https://www.google.com/search?tbm=isch&q=",
																			"v": "https://www.google.com/search?tbm=vid&q=",
																			"m": "https://www.google.com/maps?q=",
																			"n": "https://www.google.com/search?tbm=nws&q=",
																			"s": "https://www.google.com/search?tbm=shop&q=",
																			"b": "https://www.google.com/search?tbm=bks&q=",
																			"f": "https://www.google.com/finance?q=",
																			"sc": "https://scholar.google.com/scholar?q="
																		},
																		"if_null": "https://www.google.com/search?q="
																	}},
																	"c": "https://www.chat.openai.com/search?q=",
																	"b": "https://www.startpage.com/search?q=",
																	"y": "https://search.yahoo.com/search?q=",
																	"d": "https://duckduckgo.com/?q=",
																	"k": "http://www.ask.com/web?q=",
																	"a": "http://search.aol.com/aol/search?q=",
																	"w": "https://wikipedia.org/w/index.php?search=",
																	"s": "http://www.snopes.com/search/?q="
																}
															}},
															"modification": {"Append": {"Part": {"QueryParam": "q"}}}
														}}
													}
												}
											}},
											"proxy.notsobot.com": {"GetUrlFromQueryParam": "url"},
											"awin1.com": {"IfCondition": {
												"condition": {"PathIs": "/cread.php"},
												"mapper": {"GetUrlFromQueryParam": "ued"}
											}},
											"shareasale-analytics.com": {"IfCondition": {
												"condition": {"PathIs": "/r.cfm"},
												"mapper": {"All": [
													{"SetHost": "shareasale-analytics.com"},
													{"AllowQueryParams": ["b", "u", "m"]},
													{"Common": "universal"},
													{"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Cache": {
																"category": "sharesale-escaped-redirect",
																"key": {"Part": "Whole"},
																"value": {"ExtractBetween": {
																	"value": {"HttpRequest": {}},
																	"start": "replace('",
																	"end": "')"
																}}
															}},
															"modification": {"RunEscapeCodes": {"\\/": "/"}}
														}}
													}}
												]}
											}},
											"shareasale.com": {"IfCondition": {
												"condition": {"PathIs": "/r.cfm"},
												"mapper": {"All": [
													{"SetHost": "shareasale-analytics.com"},
													{"AllowQueryParams": ["b", "u", "m"]},
													{"Common": "universal"},
													{"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Cache": {
																"category": "redirect",
																"key": {"Part": "Whole"},
																"value": {"ExtractBetween": {
																	"value": {"HttpRequest": {}},
																	"start": "replace('",
																	"end": "')"
																}}
															}},
															"modification": {"RunEscapeCodes": {"\\/": "/"}}
														}}
													}}
												]}
											}},
											"mfy.gg": {"SetHost": "metafy.gg"},
											"bugzil.la": {"All": [
												{"SetHost": "bugzilla.mozilla.org"},
												{"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "id"}}},
												{"SetPart": {"part": "Path", "value": "/show_bug.cgi"}}
											]},
											"o93x.net": {"GetUrlFromQueryParam": "u"},
											"ss3.shipstation.com": {"SetPart": {
												"part": "Whole",
												"value": {"Join": {
													"sources": [
														"https://",
														{"Modified": {
															"value": {"Part": "Whole"},
															"modification": {"StripPrefix": "https://ss3.shipstation.com/"}
														}}
													]
												}}
											}},
											"twpf.jp": {"IfCondition": {
												"condition": {"PartIs": {"part": "Path", "value": "/home/jump"}},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": {"QueryParam": "p"}},
														"modification": "UrlDecode"
													}}
												}}
											}},
											"reurl.cc": {"Common": {
												"name": "extract-from-page",
												"args": {
													"vars": {
														"start": "value=\"",
														"end": "\"/>"
													}
												}
											}},
											"boxd.it": {"All": [
												{"Common": "universal"},
												{"SetPart": {"part": "Subdomain", "value": "www"}},
												{"ExpandRedirect": {}}
											]},
											"shorturl.at": {"SetPart": {"part": "Subdomain", "value": "www"}},
											"urldefense.com": {"IfCondition": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "v3"}},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": "Whole"},
														"modification": {"All": [
															{"KeepSegmentRange": {"split": "__;!!", "end": -1}},
															{"KeepSegmentRange": {"split": "__", "start": 1}}
														]}
													}}
												}}
											}},
											"tee.pub": {"SetHost": "www.teepublic.com"}
										}
									}
								},



								{
									"PartMap": {
										"part": "RegDomain",
										"map": {
											"visitlink.me": {"SetPart": {"part": "Subdomain", "value": null}},
											"carleton.ca": {"IfCondition": {
												"condition": {"PartIs": {"part": {"QueryParam": "action"}, "value": "redirect"}},
												"mapper": {"GetUrlFromQueryParam": "url"}
											}},
											"pulse.ly": {"All": [
												{"SetHost": "api.link.agorapulse.com"},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "redirect"}}
											]},
											"vk.com": {"IfCondition": {
												"condition": {"PathIs": "/away.php"},
												"mapper": {"GetUrlFromQueryParam": "to"}
											}},
											"smartadserver.com": {"IfCondition": {
												"condition": {"PathIs": "/click"},
												"mapper": {"GetUrlFromQueryParam": "go"}
											}},
											"lnk.to": {"IfCondition": {
												"condition": {"Not": {"FlagIsSet": "no-network"}},
												"mapper": {"CacheUrl": {
													"category": "redirect",
													"mapper": {"All": [
														{"SetPart": {
															"part": "Whole",
															"value": {"Modified": {
																"value": {"HttpRequest": {}},
																"modification": {"TryElse": {
																	"try": {"All": [
																		{"ExtractBetween": {"start": "destination = ", "end": ";\n"}},
																		{"JsonPointer": "/url"}
																	]},
																	"else": {"Set": {"Part": "Whole"}}
																}}
															}}
														}},
														{"IfCondition": {
															"condition": {"Not": {"RegDomainIs": "lnk.to"}},
															"mapper": {"RemoveQueryParams": ["lf"]}
														}}
													]}
												}}
											}},
											"page.link": {"IfCondition": {
												"condition": {"Not": {"FlagIsSet": "no-network"}},
												"mapper": {"All": [
													{"Common": "universal"},
													{"ExpandRedirect": {
														"http_client_config_diff": {
															"add_default_headers": {"User-Agent": "Firefox"}
														}
													}}
												]}
											}}
										}
									}
								},



								{
									"condition": {"All": [
										{"FlagIsSet": "bypass.vip"},
										{"Not": {"FlagIsSet": "no-network"}},
										{"PartMatches": {"part": "HostWithoutWWWDotPrefix", "matcher": {"InSet": "bypass.vip-host-without-www-dot-prefixes"}}}
									]},
									"mapper": {"All": [
										{"Common": "universal"},
										{"CacheUrl": {
											"category": "redirect",
											"mapper": {"SetPart": {
												"part": "Whole",
												"value": {"Modified": {
													"value": {"HttpRequest": {
														"url": {"Join": {
															"sources": [
																{"IfSourceIsNone": {
																	"value": {"NoneTo": {
																		"value": {"Var": "bypass.vip-api-key"},
																		"if_none": {"EnvVar": "URL_CLEANER_BYPASS_VIP_API_KEY"}
																	}},
																	"then": "https://api.bypass.vip/bypass?url=",
																	"else": "https://api.bypass.vip/premium/bypass?url="
																}},
																{"Modified": {"value": {"Part": "Whole"}, "modification": "UrlEncode"}}
															]
														}},
														"headers": {
															"x-api-key": {"NoneTo": {
																"value": {"Var": "bypass.vip-api-key"},
																"if_none": {"EnvVar": "URL_CLEANER_BYPASS_VIP_API_KEY"}
															}}
														}
													}},
													"modification": {"JsonPointer": "/result"}
												}}
											}}
										}}
									]}
								},



								{
									"condition": {"All": [
										{"MaybeWWWDomainMiddleIs": "google"},
										{"PathIs": "/url"}
									]},
									"mapper": {"GetUrlFromQueryParam": "q"}
								},



								{
									"condition": {"All": [
										{"PartMatches": {
											"part": "HostWithoutWWWDotPrefix",
											"matcher": {"InSet": "email-link-format-1-hosts"}
										}},
										{"PartContains": {"part": "Path", "value": "/page/email/redirect", "where": "Start"}}
									]},
									"mapper": {"All": [
										{"CopyPart": {"from": {"QueryParam": "campaignpageurl"}, "to": "Whole"}},
										{"RemoveQueryParams": ["ea.url.id"]}
									]}
								},



								{
									"condition": {"All": [
										{"Not": {"FlagIsSet": "no-network"}},
										{"Any": [
											{"All": [
												{"FlagIsSet": "assume-1-dot-2-is-redirect"},
												{"PartMatches": {"part": "RegDomain", "matcher": {"LengthIs": 4}}}
											]},
											{"PartMatches": {
												"part": "HostWithoutWWWDotPrefix",
												"matcher": {"InSet": "redirect-host-without-www-dot-prefixes"}
											}},
											{"TreatErrorAsFail": {"PartMatches": {
												"part": "RegDomain",
												"matcher": {"InSet": "redirect-reg-domains"}
											}}},
											{"PartMap": {
												"part": "HostWithoutWWWDotPrefix",
												"map": {
													"pawoo.net"        : {"PartIs": {"part": {"PathSegment": 0}, "value": "oauth_authentications"}},
													"api.pinterest.com": {"PartIs": {"part": {"PathSegment": 0}, "value": "url_shortener"}},
													"allmylinks.com"   : {"PathIs": "/link/out"},
													"gofundme.com"     : {"PartIs": {"part": {"PathSegment": 0}, "value": "url_shortener"}},
													"substack.com"     : {"Any": [
														{"All": [
															{"PartIs": {"part": {"PathSegment": 0}, "value": "redirect"}},
															{"Not": {"PartIs": {"part": {"PathSegment": 1}, "value": "2"}}}
														]},
														{"PathIs": "/app-link/post"}
													]},
													"sketchfab.com": {"PartIs": {"part": {"PathSegment": 0}, "value": "s"}},
													"qudsnen.co": {"Not": {"PartIs": {"part": {"QueryParam": "p"}, "value": null}}},
													"facebook.com": {"PartContains": {"part": "Path", "where": "Start", "value": "/share/r/"}},
													"reddit.com": {"PartContains": {"part": "Path", "value": "/s/"}},
													"old.reddit.com": {"PartContains": {"part": "Path", "value": "/s/"}}
												}
											}},
											{"All": [
												{"PartMatches": {
													"part": "HostWithoutWWWDotPrefix",
													"matcher": {"InSet": "email-link-format-1-hosts"}
												}},
												{"PartContains": {"part": "Path", "value": "/page/email/click", "where": "Start"}}
											]},
											{"All": [
												{"RegDomainIs": "teepublic.com"},
												{"PartIs": {"part": {"PathSegment": 0}, "value": "lic"}}
											]}
										]}
									]},
									"mapper": {"All": [
										{"Common": "universal"},
										{"ExpandRedirect": {}}
									]}
								}
							]
						}}
					}
				},



				{
					"SharedCondition": {
						"condition": {"All": [
							{"FlagIsSet": "unmangle"},
							{"Any": [
								{"HostIsOneOf": ["http", "https"]},
								{"PartContains": {"part": "Path", "value": "http"}},
								{"Not": {"PartIs": {"part": {"DomainSegment": 3}, "value": null}}},
								{"StringIs": {"left": {"JobsContextVar": "SOURCE_REG_DOMAIN"}, "right": "furaffinity.net"}}
							]}
						]},
						"rules": [
							{
								"condition": {"All": [
									{"StringIs": {"left": {"JobsContextVar": "SOURCE_REG_DOMAIN"}, "right": "furaffinity.net"}},
									{"TreatErrorAsFail": {"StringMatches": {
										"value": {"ContextVar": "link_text"},
										"matcher": {"AnyCharMatches": {"IsOneOf": [":", "/", "@", "?", "#"]}}
									}}}
								]},
								"mapper": {"SetPart": {
									"part": "Whole",
									"value": {"Modified": {
										"value": {"ContextVar": "link_text"},
										"modification": {"StringMap": {
											"value": {"Modified": {"value": {"ContextVar": "site_name"}, "modification": "Lowercase"}},
											"map": {
												"youtube"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?youtube\\.com/)?([^/]+)$"                     , "replace": "https://youtube.com/$1"            }},
												"twitter"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com/)?@?([^/]+)$"             , "replace": "https://x.com/$1"                  }},
												"x"            : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com/)?@?([^/]+)$"             , "replace": "https://x.com/$1"                  }},
												"bluesky"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?bsky\\.app/)?(?:profile/)?([^/]+)$"           , "replace": "https://bsky.app/profile/$1"       }},
												"dealer's den" : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?thedealersden\\.com/)?(?:store/)?([^/]+)$"    , "replace": "https://thedealersden.com/store/$1"}},
												"twitch"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?twitch\\.tv/)?([^/]+)$"                       , "replace": "https://twitch.tv/$1"              }},
												"facebook"     : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?facebook\\.com/)?([^/]+)$"                    , "replace": "https://facebook.com/$1"           }},
												"cara"         : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?cara\\.app/)?([^/]+)$"                        , "replace": "https://cara.app/$1"               }},
												"piczel"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?piczel\\.tv/)?(?:watch/)?([^/]+)$"            , "replace": "https://piczel.tv/watch/$1"        }},
												"etsy"         : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?etsy\\.com/)?(?:shop/)?([^/]+)$"              , "replace": "https://etsy.com/shop/$1"          }},
												"patreon"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?patreon\\.com/)?([^/]+)$"                     , "replace": "https://patreon.com/$1"            }},
												"ko-fi"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?ko-fi\\.com/)?([^/]+)$"                       , "replace": "https://ko-fi.com/$1"              }},
												"sofurry"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:www\\.)?([^.]+)\\.sofurry\\.com/?$"                      , "replace": "https://$1.sofurry.com"            }},
												"inkbunny"     : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?inkbunny\\.net/)?([^/]+)$"                    , "replace": "https://inkbunny.net/$1"           }},
												"deviantArt"   : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?([^.]+\\.)?deviantart\\.com/?)?([^/]*)$"      , "replace": "https://deviantart.com/$1$2"       }},
												"weasyl"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?weasyl\\.com/)?~?([^/]+)$"                    , "replace": "https://weasyl.com/~$1"            }},
												"tumblr"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?([^.]+\\.)?tumblr\\.com/?)?([^/]*)$"          , "replace": "https://$1$2.tumblr.com"           }},
												"transfur"     : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?transfur\\.com/)?(?:users/)?([^/]+)$"         , "replace": "https://transfur.com/users/$1"     }},
												"pictaro"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?pictaro\\.tv/)?([^/]+)$"                      , "replace": "https://pictaro.tv/$1"             }},
												"furry network": {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?furrynetwork\\.com/)?([^/]+)$"                , "replace": "https://furrynetwork.com/$1"       }},
												"itaku"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?itaku\\.ee/)?(?:profile/)?([^/]+)$"           , "replace": "https://itaku.ee/profile/$1"       }},
												"pixiv"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?pixiv\\.net/)?(?:[a-z-]/)?(?:users/)?([^/]+)$", "replace": "https://pixiv.net/en/users/$1"     }},
												"steam"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?steamcommunity\\.com/)?(?:id/)?([^/]+)$"      , "replace": "https://steamcommunity.com/id/$1"  }}
											},
											"else": {"Set": {"Part": "Whole"}}
										}}
									}}
								}}
							},



							{
								"SharedCondition": {
									"condition": {"All": [
										{"HostIsOneOf": ["http", "https"]},
										{"Not": {"FlagIsSet": "no-unmangle-host-is-http-or-https"}}
									]},
									"rules": [
										{
											"comment-1": "https://https//example.com/abc -> https://example.com/abc",
											"comment-2": "https://https//example1.com/example2.com/abc unchanged",
											"comment-3": "https://https//example1.com/user/example2.com/abc unchanged",
											"condition": {"TreatErrorAsFail": {"All": [
												{"PartContains": {"part": {"PathSegment": 1}, "value": "."}},
												{"Not": {"PartContains": {"part": {"NoneToEmptyString": {"PathSegment": 2}}, "value": "."}}},
												{"Not": {"PartContains": {"part": {"NoneToEmptyString": {"PathSegment": 3}}, "value": "."}}}
											]}},
											"mapper": {"All": [
												{"CopyPart": {"from": {"PathSegment": 1}, "to": "Host"}},
												{"CopyPart": {"from": {"NoneToEmptyString": {"PartSegments": {"part": "Path", "split": "/", "start": 3}}}, "to": "Path"}}
											]}
										},
										{
											"comment-1": "https://https//example1.com/example2.com/abc -> https://example2.com/abc",
											"comment-2": "https://https//example1.com/user/example2.com/abc unchanged",
											"condition": {"TreatErrorAsFail": {"PartContains": {"part": {"PathSegment": 2}, "value": "."}}},
											"mapper": {"All": [
												{"CopyPart": {"from": {"PathSegment": 2}, "to": "Host"}},
												{"CopyPart": {"from": {"NoneToEmptyString": {"PartSegments": {"part": "Path", "split": "/", "start": 4}}}, "to": "Path"}}
											]}
										},
										{
											"comment-1": "https://https//example1.com/user/example2.com/abc -> https://example2.com/abc",
											"condition": {"TreatErrorAsFail": {"All": [
												{"Not": {"PartContains": {"part": {"PathSegment": 2}, "value": "."}}},
												{"PartContains": {"part": {"PathSegment": 3}, "value": "."}}
											]}},
											"mapper": {"All": [
												{"CopyPart": {"from": {"PathSegment": 3}, "to": "Host"}},
												{"CopyPart": {"from": {"PartSegments": {"part": "Path", "split": "/", "start": 5}}, "to": {"NoneToEmptyString": "Path"}}}
											]}
										}
									]
								}
							},
							{
								"comment": "https://example1.com/https://example2.com/user -> https://example2.com/abc",
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-unmangle-path-is-url"}},
									{"Not": {"PartMatches": {"part": "Host", "matcher": {"InSet": "unmangle-path-is-url-blacklist"}}}},
									{"Any": [
										{"PartContains": {"part": "Path", "where": "Start", "value": "/http:"}},
										{"PartContains": {"part": "Path", "where": "Start", "value": "/https:"}}
									]}
								]},
								"mapper": {"SetPart": {
									"part": "Whole",
									"value": {"Modified": {"value": {"Part": "Path"}, "modification": {"StripPrefix": "/"}}}
								}}
							},
							{
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-unmangle-path-is-url-encoded-url"}},
									{"TreatErrorAsFail": {"PartIs": {
										"part": "RegDomain",
										"value":  {"ExtractPart": {
											"part": "RegDomain",
											"value": {"Modified": {
												"value": {"Part": "Path"},
												"modification": {"All": ["UrlDecode", {"StripPrefix": "/"}]}
											}}
										}}
									}}}
								]},
								"mapper": {"SetPart": {
									"part": "Whole",
									"value": {"Modified": {"value": {"Part": "Path"}, "modification": {"All": ["UrlDecode", {"StripPrefix": "/"}]}}}
								}}
							},
							{
								"comment": "https://example1.com/profile/https://example2.com/profile/user -> https://example2.com/profile/user",
								"comment2": "The general case requires conditions and mappers to talk to each other and would break the WayBack machine.",
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-unmangle-second-path-segment-is-url"}},
									{"Any": [
										{"PartContains": {"part": "Path", "where": "Start", "value": "/http:"}},
										{"PartContains": {"part": "Path", "where": "Start", "value": "/https:"}}
									]}
								]},
								"mapper": {
									"SetPart": {
										"part": "Whole",
										"value": {"Part": {"PartSegments": {"part": "Path", "split": "/", "start": 2, "end": null}}}
									}
								}
							},
							{
								"comment": "https://profile.example.com.example.com -> https://profile.example.com",
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-unmangle-subdomain-ends-in-reg-domain"}},
									{"TreatErrorAsFail": {"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "unmangle-subdomain-ends-in-reg-domain-reg-domain-blacklist"}}}}},
									{"TreatErrorAsFail": {"PartContains": {
										"part": {"PartSegments": {"part": "Domain", "split": ".", "start": 1, "end": null}},
										"where": "Start",
										"value": {"Join": {"sources": [{"Part": "RegDomain"}, {"String": "."}]}}
									}}}
								]},
								"mapper": {"SetPart": {"part": "RegDomain", "value": null}}
							},



							{
								"comment": "https://www.username.example.com -> https://username.example.com",
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-unmangle-subdomain-starting-with-www-segment"}},
									{"TreatErrorAsFail": {"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "unmangle-subdomain-starting-with-www-segment-reg-domain-blacklist"}}}}},
									{"TreatErrorAsFail": {"PartContains": {"part": "Subdomain", "where": "Start", "value": "www."}}}
								]},
								"mapper": {"ModifyPart": {"part": "Subdomain", "modification": {"StripPrefix": "www."}}}
							}
						]
					}
				},



				{
					"SharedCondition": {
						"condition": {"FlagIsSet": "unmobile"},
						"rules": [
							{
								"condition": {"All": [
									{"Any": [
										{"PartIs": {"part": {"DomainSegment": 0}, "value": "m"}},
										{"PartIs": {"part": {"DomainSegment": 0}, "value": "mobile"}}
									]},
									{"Not": {
										"PartMatches": {
											"part": "RegDomain",
											"matcher": {"InSet": "unmobile-reg-domain-blacklist"}
										}
									}}
								]},
								"mapper": {"SetPart": {"part": {"DomainSegment": 0}, "value": null}}
							},
							{
								"condition": {"Any": [
									{"PartIs": {"part": {"DomainSegment": 1}, "value": "m"}},
									{"PartIs": {"part": {"DomainSegment": 1}, "value": "mobile"}}
								]},
								"mapper": {"SetPart": {"part": {"DomainSegment": 1}, "value": null}}
							}
						]
					}
				},



				{"StringMap": {
					"value": {"ParamsNamedPartitioning": {"name": "hwwwwdp_categories", "element": {"Part": "HostWithoutWWWDotPrefix"}}},
					"map": {
						"disney": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
						"fixvx": {"SetHost": "x.com"},
						"nitter": {"IfCondition": {
							"condition": {"All": [
								{"Any": [
									{"FlagIsSet": "nitter"},
									{"FlagIsSet": "unnitter"}
								]},
								{"Not": {"PathIs": "/"}}
							]},
							"mapper": {"SetHost": "x.com"}
						}},
						"lmgtfy": {"All": [
							{"SetHost": "google.com"},
							{"SetPart": {"part": "Path", "value": "/search"}}
						]},
						"breezewiki": {"IfCondition": {
							"condition": {"All": [
								{"Any": [
									{"FlagIsSet": "breezewiki"},
									{"FlagIsSet": "unbreezewiki"}
								]},
								{"Not": {"PathIs": "/"}}
							]},
							"mapper": {"All": [
								{"SetHost": "fandom.com"},
								{"MovePart": {"from": {"PathSegment": 0}, "to": "Subdomain"}}
							]}
						}},
						"invidious": {"IfCondition": {
							"condition": {"All": [
								{"Any": [
									{"FlagIsSet": "invidious"},
									{"FlagIsSet": "uninvidious"}
								]},
								{"Not": {"PathIs": "/"}}
							]},
							"mapper": {"SetHost": "youtube.com"}
						}},
						"discord-external": {"IfCondition": {
							"condition": {"FlagIsSet": "discord-unexternal"},
							"mapper": {"All": [
								{"CopyPart": {"from": {"PathSegment": 2}, "to": "Scheme"}},
								{"CopyPart": {"from": {"PathSegment": 3}, "to": "Host"}},
								{"CopyPart": {"from": {"PartSegments": {"part": "Path", "split": "/", "start": 5}}, "to": "Path"}},
								"RemoveQuery"
							]}
						}},
						"instagram": {"RemoveQueryParams": ["igshid", "igsh", "xmt", "ig_mid", "e", "g"]},
						"alibaba": {"RemoveQueryParams": ["spm"]}
					}
				}},



				{
					"StringMap": {
						"value": {"ErrorToNone": {"ErrorToNone": {"ParamsNamedPartitioning": {"name": "hwwwwdp_categories", "element": {"JobsContextVar": "SOURCE_REG_DOMAIN"}}}}},
						"map": {
							"alibaba": {"RemoveQueryParams": ["spm", "file"]}
						}
					}
				},



				{
					"PartMap": {
						"comment-1": "If you can't get a certain domain to work here, it may be because Mozilla's Public Suffix List, therefore the psl crate, and therefore UrlPart consideres it a suffix.",
						"part": "RegDomain",
						"map": {
							"theonion.com" : {"AllowQueryParams": ["s"]},
							"teespring.com": "RemoveQuery",
							"twitter.com"     : {"SetPart": {"part": "RegDomain", "value": "x.com"}},
							"fxbsky.app": {"IfCondition": {
								"condition": {"Not": {"FlagIsSet": "embed-compatibility"}},
								"mapper": {"SetPart": {"part": "RegDomain", "value": "bsky.app"}}
							}},
							"bsky.social": {"IfCondition": {
								"condition": {"Not": {"PartIsOneOf": {"part": "Subdomain", "values": [null, "www"]}}},
								"mapper": {"All": [
									{"SetPart": {"part": "Path", "value": {"Join": {"sources": ["/profile/", {"Part": "Domain"}]}}}},
									{"SetHost": "bsky.app"}
								]}
							}},
							"youtube.com"  : {"All": [
								{"RemoveQueryParams": ["si", "feature", "pp"]},
								{"IfCondition": {
									"condition": {"PartMap": {
										"part": {"PathSegment": 0},
										"map": {
											"shorts": {"FlagIsSet": "youtube-unshort"},
											"live"  : {"FlagIsSet": "youtube-unlive"},
											"embed" : {"FlagIsSet": "youtube-unembed"}
										}
									}},
									"mapper": {"All": [
										{"CopyPart": {"from": {"PathSegment": 1}, "to": {"QueryParam": "v"}}},
										{"SetPart": {"part": "Path", "value": "watch"}}
									]}
								}},
								{"IfCondition": {
									"condition": {"All": [
										{"FlagIsSet": "youtube-unplaylist"},
										{"PartIs": {"part": {"PathSegment": 0}, "value": "watch"}}
									]},
									"mapper": {"RemoveQueryParams": ["list"]}
								}},
								{"IfCondition": {
									"condition": {"FlagIsSet": "invidious"},
									"mapper": {"SetPart": {"part": "Host", "value": {"Var": "invidious-host"}}}
								}}
							]},
							"youtu.be": {"All": [
								{"SetHost" : "youtube.com"},
								{"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "v"}}},
								{"SetPart" : {"part": "Path", "value": "watch"}},
								{"RemoveQueryParams": ["si", "feature", "pp"]}
							]},
							"instagram.com": {"IfCondition": {
								"condition": {"All": [
									{"FlagIsSet": "instagram-unprofilecard"},
									{"PartIs": {"part": {"PathSegment": 1}, "value": "profilecard"}}
								]},
								"mapper": {"SetPart": {"part": {"PathSegment": 1}, "value": null}}
							}},
							"stackoverflow.com" : {"RemoveQueryParams": ["so_medium", "so_source", "c"]},
							"duckduckgo.com"    : {"RemoveQueryParams": ["t", "atb", "ia"]},
							"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"RemoveQueryParams": ["t", "atb", "ia"]},
							"washingtonpost.com": {"All": [
								{"RemoveQueryParams": ["itid", "nid", "arcId", "account_location", "tid", "oscode", "s_l", "acqEntType", "p", "s_ct"]},
								{"IfCondition": {
									"condition": {"TreatErrorAsFail": {"PartContains": {"part": "Fragment", "value": "link", "where": "Start"}}},
									"mapper": {"SetPart": {"part": "Fragment", "value": null}}
								}}
							]},
							"cnn.com": {"RemoveQueryParams": ["bt_ee", "bt_ts"]},
							"facebook.com": {"All": [
								{"IfCondition": {
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "reel"}},
									"mapper": "RemoveQuery"
								}},
								{"RemoveQueryParams": ["fs", "s", "mibextid", "rf"]}
							]},
							"bbc.com": {"RemoveQueryParamsMatching": {"Contains": {"where": "Start", "value": "at_"}}},
							"linktr.ee": {"RemoveQueryParams": ["ltsid"]},
							"theguardian.com": {"RemoveQueryParams": ["CMP"]},
							"roblox.com": {"AllowQueryParams": ["keyword", "Keyword"]},
							"hp.com": {"RemoveQueryParams": ["jumpid"]},
							"lenovo.com": {"RemoveQueryParams": ["IPromoID"]},
							"loblaws.ca": {"RemoveQueryParams": ["navid", "icid", "icta"]},



							"acer.com": {"RemoveQueryParamsMatching": {"Contains": {"where": "Start", "value": "internal_"}}},
							"steampowered.com": {"RemoveQueryParams": ["snr"]},
							"yahoo.com": {"RemoveQueryParams": ["p", "src", "pspid", "activity", ".src", "specId", "y"]},
							"bell.ca": {"RemoveQueryParams": ["INT"]},
							"fxdeviantart.com": {"SetPart": {"part": "RegDomain", "value": "deviantart.com"}},
							"hulu.com": {"RemoveQueryParams": ["from"]},
							"thrn.co": {"All": [
								{"SetHost": "throne.com"},
								{"SetPart": {"part": {"PathSegment": 0}, "value": null}}
							]},
							"addons.mozilla.org": {"RemoveQueryParams": ["platform", "appver"]},
							"amtrak.com": {"RemoveQueryParams": ["atv", "cmp"]},
							"support.google.com": {"AllowQueryParams": ["q"]},
							"reddit.com": {"All": [
								{"RemoveQueryParams": ["share_id"]},
								{"PartMap": {
									"part": {"PathSegment": 0},
									"map": {
										"search": {"RemoveQueryParams": ["cid"]},
										"domain": {"AllowQueryParams": ["count", "after"]}
									},
									"else": {"AllowQueryParams": ["f"]}
								}}
							]},
							"cnn.com"   : {"IfCondition": {
								"condition": {"PartContains": {"part": {"PathSegment": -1}, "value": "h_", "where": "Start"}},
								"mapper": {"SetPart": {"part": {"PathSegment": -1}, "value": null}}
							}},
							"bell.ca"   : {"IfCondition": {
								"condition": {"TreatErrorAsFail": {"PartContains": {"part": "Fragment", "where": "Start", "value": "INT="}}},
								"mapper": {"SetPart": {"part": "Fragment", "value": null}}
							}},
							"pixiv.net": {"IfCondition": {
								"condition": {"PathIs": "/member.php"},
								"mapper": {"All": [
									{"SetPart": {"part": "Path", "value": "/users"}},
									{"CopyPart": {"from": {"QueryParam": "id"}, "to": "NextPathSegment"}},
									"RemoveQuery"
								]}
							}},
							"gelbooru.com": {"IfCondition": {
								"condition": {"PartIs": {"part": {"QueryParam": "page"}, "value": "post"}},
								"mapper": {"RemoveQueryParams": ["tags"]}
							}},
							"inkbunny.net": {"IfCondition": {
								"condition": {"PathIs": "/submissionsviewall.php"},
								"mapper": {"RemoveQueryParams": ["rid"]}
							}},
							"go.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
							"marvel.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
							"deviantart.com": {"IfCondition": {
								"condition": {"All": [
									{"Not": {"PartIs": {"part": "Subdomain", "value": "www"}}},
									{"Not": {"PartIs": {"part": "Subdomain", "value": ""}}}
								]},
								"mapper": {"MovePart": {"from": "Subdomain", "to": {"BeforePathSegment": 0}}}
							}},
							"tumblr.com": {"Rules": [
								{
									"condition": {"QueryHasParam": "redirect_to"},
									"mapper": {"All": [
										{"GetPathFromQueryParam": "redirect_to"},
										"RemoveQuery"
									]}
								},
								{
									"condition": {"PathIs": "/safe-mode"},
									"mapper": {"GetUrlFromQueryParam": "url"}
								},
								{
									"condition": {"Not": {"PartIs": {"part": {"PathSegment": 0}, "value": "search"}}},
									"mapper": "RemoveQuery"
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "login_required"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
								},
								{
									"condition": {"All": [
										{"FlagIsSet": "tumblr-unsubdomain-blog"},
										{"Not": {"PartIsOneOf": {"part": "Subdomain", "values": ["at", "www"]}}}
									]},
									"mapper": {"All": [
										{"IfCondition": {
											"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "post"}},
											"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
										}},
										{"MovePart": {"from": "Subdomain", "to": {"BeforePathSegment": 0}}}
									]}
								}
							]},
							"goodreads.com": {"All": [
								{"RemoveQueryParams": ["ref_"]},
								{"IfCondition": {
									"condition": {"PartContains": {"part": "Path", "where": "Start", "value": "/book/show/"}},
									"mapper": "RemoveQuery"
								}}
							]},
							"thelancet.com": {"IfCondition": {
								"condition": {"PartIsOneOf": {"part": {"PathSegment": 0}, "values": ["commissions", "journals"]}},
								"mapper": "RemoveQuery"
							}},
							"alibaba.com": {"RemoveQueryParams": ["spm", "selectedCarrierCode", "fsb", "tracelog", "wx_navbar_tramsparent"]},
							"fori.io": {"SetHost": "foriio.com"},
							"pawoo.net": {"RemoveQueryParams": ["provider"]},
							"snapchat.com": {"RemoveQueryParams": ["purpose", "sp"]},
							"be.net": {"SetHost": "behance.net"},
							"tiktok.com": {"RemoveQueryParamsMatching": {"Any": [
								{"IsOneOf": ["checksum"]},
								{"Contains": {"value": "_", "where": "Start"}},
								{"Contains": {"value": "sec_", "where": "Start"}}
							]}},
							"beacons.ai": {"RemoveQueryParamsMatching": {"Contains": {"value": "refer", "where": "Start"}}},
							"atom.bio": {"RemoveQueryParams": ["menu_origin"]},
							"cnbc.com": {"RemoveQueryParams": ["par"]},
							"browserstack.com": {"ModifyPart": {
								"part": "Fragment",
								"modification": {"RemoveQueryParamsMatching": {"IsOneOf": ["ref", "source"]}}
							}},
							"rule34.xxx": {"IfCondition": {
								"condition": {"All": [
									{"FlagIsSet": "remove-unused-search-query"},
									{"PartIs": {"part": {"QueryParam": "s"}, "value": "view"}}
								]},
								"mapper": {"RemoveQueryParams": ["tags"]}
							}},
							"spotify.com": {"RemoveQueryParams": ["si"]},
							"overpass-turbo.eu": {"IfCondition": {
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-network"}},
									{"PartIs": {"part": {"PathSegment": 0}, "value": "s"}}
								]},
								"mapper": {"All": [
									{"Common": "universal"},
									{"ExpandRedirect": {}}
								]}
							}},
							"minds.com": {"RemoveQueryParams": ["referrer"]},
							"history.com": {"IfCondition": {
								"condition": {"PartMatches": {"part": "Fragment", "matcher": {"Contains": {"value": "link_time", "where": "Start"}}}},
								"mapper": {"SetPart": {"part": "Fragment", "value": null}}
							}},
							"fandom.com": {"IfCondition": {
								"condition": {"FlagIsSet": "breezewiki"},
								"mapper": {"All": [
									{"CopyPart": {"from": "Subdomain", "to": {"BeforePathSegment": 0}}},
									{"SetPart": {"part": "Host", "value": {"Var": "breezewiki-host"}}}
								]}
							}}
						}
					}
				},
				{
					"PartMap": {
						"part": "DomainSuffix",
						"map": {
							"carrd.co": {"RemoveQueryParams": ["ref"]}
						}
					}
				},
				{
					"PartMap": {
						"part": "HostWithoutWWWDotPrefix",
						"map": {
							"at.tumblr.com": {"All": [
								{"SetHost": "tumblr.com"},
								{"SetPart": {"part": {"PathSegment": 1}, "value": null}},
								"RemoveQuery"
							]},
							"danbooru.donmai.us": {"IfCondition": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "posts"}},
								"mapper": {"RemoveQueryParams": ["q"]}
							}},
							"x.com": {"Rules": [
								{
									"comment": "https://(www\\.)?(twitter|x).com/(www\\.)?(twitter|x).com -> x.com",
									"condition": {"All": [
										{"FlagIsSet": "unmangle"},
										{"Not": {"FlagIsSet": "no-unmangle-twitter-first-path-segment-is-twitter-domain"}},
										{"PartIsOneOf": {"part": {"PathSegment": 0}, "values": ["x.com", "www.x.com", "twitter.com", "www.twitter.com"]}}
									]},
									"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
								},
								{
									"condition": {"PathIs": "/i/flow/login"},
									"mapper": {"SetPart": {
										"part": "Whole",
										"value": {"Join": {"sources": ["https://x.com", {"Part": {"QueryParam": "redirect_after_login"}}]}}
									}}
								},
								{
									"condition": {"Not": {"PartIs": {"part": {"PathSegment": 0}, "value": "intent"}}},
									"mapper": {"AllowQueryParams": ["q", "f", "pf", "lf"]}
								},
								{
									"condition": {"All": [
										{"FlagIsSet": "embed-compatibility"},
										{"PartIs": {"part": {"PathSegment": 1}, "value": "status"}}
									]},
									"mapper": {"SetPart": {"part": "Host", "value": {"Var": "twitter-embed-host"}}}
								},
								{
									"condition": {"FlagIsSet": "nitter"},
									"mapper": {"SetPart": {"part": "Host", "value": {"Var": "nitter-host"}}}
								}
							]},
							"overview.mail.yahoo.com": "RemoveQuery",
							"bsky.app": {"Rules": [
								{
									"condition": {"All": [
										{"FlagIsSet": "unmangle"},
										{"PartIs": {"part": {"PathSegment": 0}, "value": "profile"}},
										{"PartContains": {"part": {"PathSegment": 1}, "where": "End", "value": ".bsky"}}
									]},
									"mapper": {"ModifyPart": {"part": "Path", "modification": {"Append": ".social"}}}
								},
								{
									"condition": {"All": [
										{"FlagIsSet": "unmangle"},
										{"PartIs": {"part": {"PathSegment": 0}, "value": "profile"}},
										{"Not": {"PartContains": {"part": {"PathSegment": 1}, "value": "."}}},
										{"Not": {"PartContains": {"part": {"PathSegment": 1}, "value": ":"}}}
									]},
									"mapper": {"ModifyPart": {"part": {"PathSegment": 1}, "modification": {"Append": ".bsky.social"}}}
								},
								{
									"condition": {"FlagIsSet": "embed-compatibility"},
									"mapper": {"SetPart": {"part": "RegDomain", "value": "fxbsky.app"}}
								}
							]},
							"apps.apple.com": {"RemoveQueryParams": ["pt", "ct", "mt"]},
							"play.google.com": {"RemoveQueryParams": ["referrer"]},
							"sale.alibaba.com": {"IfCondition": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "p"}},
								"mapper": {"RemoveQueryParams": ["wx_navbar_transparent", "path", "ncms_spm", "prefetchKey", "wx_xpage", "spm", "cardType"]}
							}},
							"wlo.link": {"SetHost": "link.space"},
							"support.google.com": {"RemoveQueryParams": ["ref_topic"]},
							"aliexpress.com": {"IfCondition": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "item"}},
								"mapper": "RemoveQuery"
							}}
						}
					}
				},
				{
					"PartRuleMap": {
						"part": "DomainMiddle",
						"map": {
							"ebay": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "itm"}},
								"mapper": "RemoveQuery"
							},
							"pinterest": {
								"condition": {"Not": {"PartIs": {"part": {"PathSegment": 0}, "value": "search"}}},
								"mapper": "RemoveQuery"
							},
							"walmart": {
								"condition": {"PartIs": {"part": {"PathSegment": 1}, "value": "ip"}},
								"mapper": {"SetPart": {"part": {"PathSegment": 2}, "value": null}}
							},
							"bestbuy": {
								"condition": "Always",
								"mapper": {"RemoveQueryParams": ["icmp"]}
							},
							"amazon": {"Rules": [
								{
									"condition": {"PartContains": {"part": "Path", "value": "/dp/"}},
									"mapper": {"AllowQueryParams": ["aod"]}
								},
								{
									"PartMap": {
										"part": "Path",
										"map": {
											"/s": {"AllowQueryParams": ["k", "i", "rh", "bbn"]},
											"/gp/buyagain": {"AllowQueryParams": ["ats"]},
											"/gp/customer-reviews": "RemoveQuery",
											"/amazonprime": "RemoveQuery"
										}
									}
								},
								{
									"condition": "Always",
									"mapper": {"RemoveQueryParamsMatching": {"Any": [
										{"IsOneOf": ["ref", "ref_", "ie", "_encoding", "content-id", "store_ref"]},
										{"Contains": {"value": "pd_", "where": "Start"}},
										{"Contains": {"value": "pf_", "where": "Start"}}
									]}}
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "product-reviews"}},
									"mapper": "RemoveQuery"
								},



								{
									"condition": {"Any": [
										{"PartContains": {"part": {"PathSegment": -1}, "where": "Start", "value": "ref="}},
										{"All": [
											{"PartContains": {"part": "Path", "value": "/dp/"}},
											{"Any": [
												{"PartContains": {"part": {"PathSegment": -1}, "where": "Anywhere", "value": "-"}},
												{"PartMatches" : {"part": {"PathSegment": -1}, "matcher": {"OnlyTheseChars": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "-"]}}}
											]}
										]}
									]},
									"mapper": {"SetPart": {"part": {"PathSegment": -1}, "value": null}}
								},



								{
									"condition": {"PartContains": {"part": "Path", "where": "Start", "value": "/gp/offer-listing/"}},
									"mapper": {"All": [
										{"SetPart": {"part": {"PathSegment": 0}, "value": "dp"}},
										{"SetPart": {"part": {"PathSegment": 1}, "value": null}},
										{"SetPart": {"part": {"QueryParam": "aod"}, "value": "1"}}
									]}
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 1}, "value": "dp"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 3}, "value": "dp"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 2}, "value": null}}
								}
							]},
							"google": {"Rules": [
								{"PartMap": {
									"part": "Path",
									"map": {
										"/search": {"AllowQueryParams": ["hl", "q", "tbm", "p", "udm", "filter", "vsrid", "vsdim", "vsint", "ins_vfs", "nfpr"]},
										"/setprefs": {"RemoveQueryParams": ["sa", "ved"]}
									}
								}},
								{
									"condition": "Always",
									"mapper": {"RemoveQueryParams": ["sca_esv", "usp"]}
								}
							]}
						}
					}
				},



				{
					"SharedCondition": {
						"condition": "AnyFlagIsSet",
						"rules": [
							{
								"condition": {"All": [
									{"FlagIsSet": "onion-location"},
									{"Not": {"FlagIsSet": "no-network"}},
									{"PartIs": {"part": "Scheme", "value": "https"}}
								]},
								"mapper": {"All": [
									{"Common": "universal"},
									{"SetPart": {
											"part": "Origin",
											"value": {"Cache": {
												"category": "onion-location",
												"key": {"Part": "Origin"},
												"value": {"ExtractPart": {
													"part": "Origin",
													"value": {"HttpRequest": {"response_handler": {"Header": "Onion-Location"}}}
												}}
											}}
										}
									}
								]}
							},
							{
								"condition": {"All": [
									{"Any": [
										{"FlagIsSet": "tor2web"},
										{"FlagIsSet": "tor2web2tor"}
									]},
									{"PartIs": {"part": "DomainMiddle", "value": "onion"}}
								]},
								"mapper": {"SetPart": {"part": "DomainSuffix", "value": null}}
							},
							{
								"condition": {"All": [
									{"FlagIsSet": "tor2web"},
									{"DomainSuffixIs": "onion"}
								]},
								"mapper": {"SetPart": {"part": "NextDomainSegment", "value": {"Var": "tor2web-suffix"}}}
							}
						]
					}
				},



				{
					"condition": "Always",
					"mapper": {"Common": "universal"}
				}
			]
		}}
	]
}
