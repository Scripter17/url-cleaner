{
	"cache_path": "cache.sqlite",
	"docs": {
		"title": "The default config.",
		"description": [
			"The default config; Meant for general purpose every day URL Cleaning."
		],
		"flags": {
			"bypass.vip"                : "Use [bypass.vip](https://bypass.vip) to expand linkvertise and some other links.",
			"embed-compatibility"       : "Sets the domain of twitter domiains (and supported twitter redirects like `vxtwitter.com`) to the variable `twitter-embed-host` and `bsky.app` to the variable `bsky-embed-host`.",
			"keep-lang"                 : "Keeps language query parameters.",
			"no-https-upgrade"          : "Disable upgrading `http` URLs to `https`.",
			"no-network"                : "Don't make any HTTP requests. Some redirect websites will still work because they include the destination in the URL.",
			"remove-unused-search-query": "Remove search queries from URLs that aren't search results (for example, posts).",
			"tor2web2tor"               : "Replace `**.onion.**` domains with `**.onion` domains.",
			"unmobile"                  : "Convert `https://m.example.com`, `https://mobile.example.com`, `https://abc.m.example.com`, and `https://abc.mobile.example.com` into `https://example.com` and `https://abc.example.com`.",

			"breezewiki"        : "Replace fandom/known Breezewiki hosts with the `breezewiki-host` variable.",
			"unbreezewiki"      : "Replace Breezewiki hosts with fandom.com.",
			"invidious"         : "Replace youtube/known Invidious hosts with the `invidious-host` variabel.",
			"uninvidious"       : "Replace Invidious hosts with youtube.com",
			"nitter"            : "Replace twitter/known Nitter hosts with the `nitter-host` variable.",
			"unnitter"          : "Replace Nitter hosts with x.com.",

			"discord-unexternal"           : "Replace `images-ext-1.discordapp.net` with the original images they refer to.",
			"furaffinity-sfw"              : "Turn `furaffinity.net` into `sfw.furaffinity.net`",
			"furaffinity-unsfw"            : "Turn `sfw.furaffinity.net` into `furaffinity.net`",
			"instagram-unprofilecard"      : "Turns `https://instagram.com/username/profilecard` into `https://instagram.com/username`.",
			"tumblr-unsubdomain-blog"      : "Changes `blog.tumblr.com` URLs to `tumblr.com/blog` URLs. Doesn't move `at` or `www` subdomains.",
			"youtube-keep-sub-confirmation": "Don't remove the `sub_confirmation` query param from youtube.com URLs.",
			"youtube-unembed"              : "Turns `https://youtube.com/embed/abc` into `https://youtube.com/watch?v=abc`.",
			"youtube-unlive"               : "Turns `https://youtube.com/live/abc` into `https://youtube.com/watch?v=abc`.",
			"youtube-unplaylist"           : "Removes the `list` query parameter from `https://youtube.com/watch` URLs.",
			"youtube-unshort"              : "Turns `https://youtube.com/shorts/abc` into `https://youtube.com/watch?v=abc`."
		},
		"vars": {
			"bluesky-embed-host": "The domain to use for bluesky when the `embed-compatibility` flag is set. Defaults to `fxbsky.com`.",
			"breezewiki-host"   : "The domain to replace fandom/Breezewiki domains with when the `breezewiki` flag is enabled",
			"bypass.vip-api-key": "The API key used for [bypass.vip](https://bypass.vip)'s premium backend. Overrides the `URL_CLEANER_BYPASS_VIP_API_KEY` environment variable.",
			"invidious-host"    : "The domain to replace twitter/Invidious domains with when the `invidious` flag is enabled",
			"nitter-host"       : "The domain to replace twitter/nitter domains with when the `nitter` flag is enabled",
			"pixiv-embed-host"  : "The domain to use for pixiv when the `embed-compatibility` flag is set. Defaults to `phixiv.com`.",
			"twitter-embed-host": "The domain to use for twitter when the `embed-compatibility` flag is set. Defaults to `vxtwitter.com`."
		},
		"environment_vars": {
			"URL_CLEANER_BYPASS_VIP_API_KEY": "The API key used for [bypass.vip](https://bypass.vip)'s premium backend. Can be overridden with the `bypass.vip-api-key` variable."
		},
		"sets": {
			"bypass.vip-hwwwwdpafqdnps"                 : "The `HostWithoutWWWDotPrefixAndFqdnPeriod`es of websites bypass.vip can expand.",
			"email-link-format-1-hosts"                 : "(TEMPORARY NAME) Hosts that use unknown link format 1.",
			"https-upgrade-host-blacklist"              : "Hosts to never upgrade from `http` to `https`.",
			"redirect-hwwwwdpafqdnps"                   : "Hosts that are considered redirects in the sense that they return HTTP 3xx status codes. URLs with hosts in this set (as well as URLs with hosts that are \"www.\" then a host in this set) will have the `ExpandRedirect` mapper applied.",
			"redirect-reg-domains"                      : "The `redirect-hwwwwdpafqdnpes` set but using the `RegDomain` of the URL.",
			"remove-empty-fragment-reg-domain-blacklist": "The RegDomains to not remove an empty fragment (the #stuff at the end (but specifically just a #)) from.",
			"remove-empty-query-reg-domain-blacklist"   : "The RegDomains to not remove an empty query from.",
			"remove-www-subdomain-reg-domain-blacklist" : "The RegDomains to not remove a `www` subdomain from.",
			"unmobile-reg-domain-blacklist"             : "Effectively unsets the `unmobile` flag for the specified `RegDomain`s.",
			"utps"                                      : "The set of \"universal tracking parameters\" that are always removed for any URL with a host not in the `utp-host-whitelist` set. Please note that the `utps` common mapper in the default config also removes any parameter starting with any string in the `utp-prefixes` list and thus parameters starting with those can be omitted from this set.",
			"utps-reg-domain-whitelist"                 : "RegDomains to never remove universal tracking parameters from."
		},
		"lists": {
			"utp-prefixes": "If a query parameter starts with any of the strings in this list (such as `utm_`) it is removed."
		},
		"maps": {
			"hwwwwdpafqdnp_lang_query_params": "The name of the `HostWithoutWWWDotPrefixAndFqdnPeriod`'s language query parameter."
		},
		"named_partitionings": {
			"hwwwwdpafqdnp_categories": "Categories of similar websites with shared cleaning methods."
		},
		"job_context": {
			"vars": {
				"SOURCE_HOST"      : "The `Host` of the \"source\" of the jobs. Usually the webpage it came from.",
				"SOURCE_REG_DOMAIN": "The `RegDomain` of the \"source\" of the jobs, Usually the webpage it came from."
			}
		},
		"task_context": {
			"vars": {
				"bsky_handle"      : "The handle of an `@user.bsky.social`, used to replace the `/did:plc:12345678` in the URL with the actual handle.",
				"faci_site_name"   : "For furaffinity contact info links, the name of the website the contact info is for. Used for unmangling.",
				"link_text"        : "The text of the link the job came from.",
				"redirect_shortcut": "For links that use redirect sites but have the final URL in the link's text/title/whatever, this is used to avoid sending that HTTP request.",
				"twitter_handle"   : "The handle of the twitter user for a `/i/web/status/` and `/i/user/` twitter URLs."
			}
		}
	},
	"params": {
		"vars": {
			"bluesky-embed-host": "fxbsky.app",
			"breezewiki-host"   : "breezewiki.com",
			"invidious-host"    : "yewtu.be",
			"nitter-host"       : "nitter.net",
			"pixiv-embed-host"  : "phixiv.net",
			"twitter-embed-host": "vxtwitter.com"
		},
		"sets": {
			"bypass.vip-hwwwwdpafqdnps": [
				"adfoc.us", "admiregirls-byme.com", "all-fans.online", "badgirlsdrop.com", "bit.do", "bit.ly", "booo.st", "boost.ink", "bst.gg",
				"cemendemons.com", "depravityweb.co", "fansmega.com", "free-leaks.com", "goldmega.online", "hotstars-leaks.com", "ift.tt", "is.gd",
				"leakutopia.site", "links-loot.com", "linksloot.net", "linkvertise.com", "loot-link.com", "loot-links.com", "lootdest.com",
				"lootdest.info", "lootdest.org", "lootlink.org", "lootlinks.co", "mboost.me", "mega-guy.com", "megadropz.com", "megadumpz.com",
				"newsociety0.co", "ofpacksmega.com", "only-fun.xyz", "onlymega.co", "paster.so", "pnp-drops.me", "premiumstashdrop.com", "rareofhub.com",
				"rebrand.ly", "rekonise.com", "secret-links.com", "secretpack-links.com", "socialwolvez.com", "st.news", "sub2get.com", "sub2unlock.com",
				"sub2unlock.io", "sub2unlock.net", "sub4unlock.io", "t.co", "tavernleaks.com", "thepremium.online", "tiny.cc", "tinylf.com",
				"tinylink.onl", "tinyurl.com", "tomxcontent.com", "unlock.com", "unlocknow.net", "v.gd", "wc.wtf", "work.ink", "xprmpacks.com"
			],
			"email-link-format-1-hosts": ["action.openmedia.org"],
			"https-upgrade-host-blacklist": ["orteil.dashnet.org", "localhost"],
			"redirect-hwwwwdpafqdnps": [
				"2kgam.es", "4.nbcla.com", "a.aliexpress.com", "a.co", "ab.co", "abc7.la", "abc7ne.ws", "adobe.ly", "aje.io", "aje.io", "amzn.asia", "amzn.ew",
				"amzn.to", "api.link.agorapulse.com", "api.linkr.com", "apple.co", "b23.tv", "bbc.in", "bit.ly", "bitly.com", "bitly.com", "bityl.co",
				"blizz.ly", "blockclubchi.co", "bloom.bg", "boxd.it", "buff.ly", "bzfd.it", "cbr.sh", "cbsn.ws", "cfl.re", "chn.ge", "chng.it",
				"clckhl.co", "cnb.cx", "cnn.it", "cons.lv", "cos.lv", "cutt.ly", "db.tt", "dcdr.me", "depop.app.link", "dis.gd", "dlvr.it", "econ.st",
				"etsy.me", "fal.cn", "fanga.me", "fb.me", "fdip.fr", "flip.it", "forms.gle", "g.co", "glo.bo", "go.bsky.app", "go.forbes.com",
				"go.icj-cij.org", "go.microsoft.com", "go.nasa.gov", "go.undp.org", "goo.gl", "goo.su", "gum.co", "hmstr.fr", "hulu.tv", "ift.tt",
				"intel.ly", "interc.pt", "is.gd", "iwe.one", "j.mp", "jbgm.es", "k00.fr", "katy.to", "kck.st", "kre.pe", "kre.pe", "kre.pe",
				"l.euronews.com", "l.leparisien.fr", "l.leparisien.fr", "lin.ee", "line.ee", "link.animaapp.com", "linkr.it", "lnkd.in", "loom.ly",
				"loom.ly", "lpc.ca", "m.sesame.org", "mol.im", "mply.io", "msft.it", "msi.gm", "mzl.la", "n.opn.tl", "n.pr", "nas.cr", "nbc4i.co",
				"ninten.do", "ntdo.co.uk", "nvda.ws", "ny.ti", "nyer.cm", "nyp.st", "nyti.ms", "nyto.ms", "on.forbes.com", "on.ft.com", "on.ft.com",
				"on.msnbc.com", "on.nyc.gov", "onl.bz", "onl.la", "onl.sc", "open-api.tiktok.com", "operagx.gg", "orlo.uk", "ow.ly", "peoplem.ag",
				"perfht.ml", "pin.it", "pixiv.me", "pl.go-ga.me", "play.st", "politi.co", "prn.to", "propub.li", "pulse.ly", "py.pl", "qr1.be", "rb.gy",
				"rb.gy", "rblx.co", "rdbl.co", "redd.it", "reut.rs", "rog.gg", "rzr.to", "s.goodsmile.link", "s.team", "s76.co", "share.firefox.dev",
				"shor.tf", "shorturl.at", "sonic.frack.deals", "sou42.co", "spoti.fi", "spr.ly", "spr.ly", "spr.ly", "sqex.to", "square.link",
				"sta.sh", "t.co", "t.ly", "t2m.io", "theatln.tc", "thecut.io", "thef.pub", "thr.cm", "thrn.co", "tiny.cc", "tinylf.com", "tmblr.co",
				"tmz.me", "to.pbs.org", "tps.to", "tr.ee", "trib.al", "u.jd.com", "unes.co", "unf.pa", "uni.cf", "uniceflink.org", "visitlink.me",
				"vm.tiktok.com", "w.wiki", "wlgrn.com", "wlo.link", "wn.nr", "wp.me", "wwdc.io", "x.alibaba.com", "x.gd", "xbx.ly", "xhslink.com", "yrp.ca"
			],
			"redirect-reg-domains": [
				"adj.st", "goo.gl", "o93x.net", "onelink.me", "page.link", "pusle.ly", "visitlink.me"
			],
			"remove-www-subdomain-reg-domain-blacklist": ["shorturl.at", "proozy.com", "teepublic.com"],
			"unmobile-reg-domain-blacklist": ["tumblr.com", "deviantart.com"],
			"utps": [
				"Tcsack", "__hsfp", "__hssc", "__hstc", "__io_lv", "__s", "_branch_match_id", "_branch_referrer", "_clde", "_cldee", "_ga",
				"_gl", "_hsenc", "_io_session_id", "_kx", "_ope", "_openstat", "_sgm_action", "_sgm_campaign", "_sgm_source", "_trkparms",
				"_trksid", "_zucks_suid", "action_object_map", "action_ref_map", "action_type_map", "adfrom", "adjust_adgroup", "adjust_campaign",
				"adjust_creative", "adjust_referrer", "adjust_tracker", "adjust_tracker_limit", "admitad_uid", "af_ad", "af_adset", "af_click_lookback",
				"af_force_deeplink", "af_xp", "aiad_clid", "ar_ad", "ar_adgroup", "ar_campaign", "ar_channel", "ar_clx", "ar_strategy", "asgtbndr",
				"at_campaign", "at_campaign_type", "at_creation", "at_emailtype", "at_link", "at_link_id", "at_link_origin", "at_link_type", "at_medium",
				"at_ptr_name", "at_recipient_id", "at_recipient_list", "at_send_date", "awc", "bsft_aaid", "bsft_clkid", "bsft_eid", "bsft_ek",
				"bsft_mid", "bsft_uid", "cjdata", "cjevent", "click", "cm_cr", "cm_me", "cmpid", "cuid", "cx_click", "cx_recsOrder", "cx_recsWidget",
				"dclid", "dpg_campaign", "dpg_content", "dpg_medium", "dpg_source", "ebisAdID", "erid", "et_rid", "external_click_id", "famad_xuid",
				"fb_action_ids", "fb_action_types", "fb_comment_id", "fb_ref", "fb_source", "fbclid", "gad_source", "gbraid", "gci", "gclid", "gclsrc",
				"gps_adid", "guccounter", "guce_referrer", "guce_referrer_sig", "hsCtaTracking", "hsa_acc", "hsa_ad", "hsa_cam", "hsa_grp", "hsa_kw",
				"hsa_la", "hsa_mt", "hsa_net", "hsa_ol", "hsa_src", "hsa_tgt", "hsa_ver", "hsctatracking", "icid", "iclid", "intcmp", "ir_adid",
				"ir_campaignid", "ir_partnerid", "irclickid", "irgwc", "is_retargeting", "itm_campaign", "itm_content", "itm_medium", "itm_source",
				"itm_term", "jmtyClId", "maf", "mc_eid", "message", "mindbox", "mindbox-click-id", "mindbox-message-key", "mkt_tok", "ml_subscriber",
				"ml_subscriber_hash", "msclkid", "mt_link_id", "mtm_campaign", "mtm_cid", "mtm_content", "mtm_group", "mtm_keyword", "mtm_medium",
				"mtm_placement", "mtm_source", "nx_source", "oft_c", "oft_ck", "oft_d", "oft_id", "oft_ids", "oft_k", "oft_lk", "oft_sk", "oly_anon_id",
				"oly_enc_id", "oprtrack", "pk_campaign", "pk_cid", "pk_medium", "pk_source", "pk_vid", "rb_clickid", "ref", "referer", "rtkcid",
				"s_cid", "sms_click", "sms_source", "sms_uph", "spot_im_redirect_source", "srsltid", "ss_email_id", "sscid", "tduid", "ttclid",
				"twclid", "unicorn_click_id", "user_email_address", "usqp", "utm", "vc_lpp", "vero_conv", "vero_id", "vgo_ee", "vsm_cid", "vsm_pid",
				"vsm_type", "wbraid", "wickedid", "wpb_advertiser", "wpb_id", "wt_mc", "xtor", "yclid", "ymclid", "ymid", "ysclid"

			],
			"utps-reg-domain-whitelist": ["bambulab.com"]
		},
		"lists": {
			"utp-prefixes": [
				"__s", "at_custom", "cm_mmc", "utm_"
			]
		},
		"maps": {
			"hwwwwdpafqdnp_lang_query_params": {
				"map": {
					"instagram.com": "hl",
					"threads.net": "hl"
				},
				"else": "lang"
			}
		},
		"named_partitionings": {
			"hwwwwdpafqdnp_categories": {
				"alibaba": ["alibaba.com", "aliexpress.com", "1688.com"],
				"bluesky": ["bsky.app"],
				"bluesky-embed-hosts": ["fxbsky.app"],
				"breezewiki": [
					"antifandom.com", "breeze.hostux.net", "breeze.mint.lgbt", "breeze.nohost.network", "breeze.whateveritworks.org",
					"breezewiki.catsarch.com", "breezewiki.com", "breezewiki.frontendfriendly.xyz", "breezewiki.hyperreal.coffee", "breezewiki.nadeko.net",
					"breezewiki.nadekonfkhwlxwwk4ycbvq42zvcjmvo5iakl4tajojjwxd4a5dcetuyd.onion", "breezewiki.pussthecat.org", "breezewiki.woodland.cafe",
					"bw.artemislena.eu", "bw.hamstro.dev", "bw.projectsegfau.lt", "bw.skunky7dhv7nohsoalpwe3sxfz3fbkad7r3wk632riye25vqm3meqead.onion",
					"nerd.whatever.social", "z.opnxng.com"
				],
				"deviantart-embed-hosts": ["fxdeviantart.com"],
				"discord-external": ["images-ext-1.discordapp.net", "images-ext-2.discordapp.net", "images-ext-3.discordapp.net"],
				"disney": ["disney.com", "marvel.com"],
				"furaffinity": ["furaffinity.net", "sfw.furaffinity.net"],
				"instagram": ["instagram.com", "threads.net"],
				"invidious": [
					"inv.nadeko.net", "inv.nadekonw7plitnjuawu6ytjsl7jlglk2t6pyq6eftptmiv3dvqndwvyd.onion", "invidious.nerdvpn.de", "yewtu.be",
					"zzlsbhhfvwg3oh36tcvx4r7n6jrw7zibvyvfxqlodcwn3mfrvzuq.b32.i2p"
				],
				"lmgtfy": ["lmgtfy.com", "lmgtfy.app", "letmegooglethat.com", "lmgtfy.click", "letmegoogleforyou.com", "lmgt.org"],
				"nitter": [
					"26oq3gioiwcmfojub37nz5gzbkdiqp7fue5kvye7d4txv4ny6fb4wwid.onion", "4g47cxugkohbweao2x66nnxxfoe3k7gdfzxej537nhdbwr522sbjxeqd.onion", "4kzgzonccxuv4ctforjqx565jgd4bocgnzsy3dg4fmdf3ye2iciq.b32.i2p",
					"6g7w5lt6qcidh6vtue64udzld2mjnvxlpgddvn34qywxafxdv6a3w5id.onion", "aaaaaxx74hbzeibageieowryhsqvimbdiitfkfe47tvgawkwkjh3coqd.onion",
					"axd6uavsstsrvstva4mzlzh4ct76rc6zdug3nxdgeitrzczhzf4q.b32.i2p", "bird.habedieeh.re",
					"bird.habeehrhadazsw3izbrbilqajalfyqqln54mrja3iwpqxgcuxnus7eid.onion", "ckzuw5misyahmg7j5t5xwwuj3bwy62jfolxyux4brfflramzsvvd3syd.onion",
					"ec5nvbycpfa5k6ro77blxgkyrzbkv7uy6r5cngcbkadtjj2733nm3uyd.onion", "erpnncl5nhyji3c32dcfmztujtl3xaddqb457jsbkulq24zqq7ifdgad.onion",
					"fbdi323aj3t6hdx4jtkuwxrnafzskquciowu2yu3jizfssaq35aow6ad.onion", "gseczlzmiv23p5vhsktyd7whquq2uy3c5fgkmdohh453qp3daoua.b32.i2p",
					"i23nv6w3juvzlw32xzoxcqzktegd4i4fu3nmnc2ewv4ggiu4ledwklad.onion", "ibsboeui2im5o7dxnik3s5yghufumgy5abevtij5nbizequfpu4qi4ad.onion",
					"iwgu3cv7ywf3gssed5iqtavmrlszgsxazkmwwnt4h2kdait75thdyrqd.onion", "jebqj47jgxleaiosfcxfibx2xdahjettuydlxbg64azd4khsxv6kawid.onion",
					"n.sneed4fmhevap3ci4xhf4wgkf72lwk275lcgomnfgwniwmqvaxyluuid.onion", "nitraeju2mipeziu2wtcrqsxg7h62v5y4eqgwi75uprynkj74gevvuqd.onion",
					"nitter.catsarchywsyuss6jdxlypsw5dc7owd5u5tr6bujxb7o6xw2hipqehyd.onion",
					"nitter.coffee2m3bjsrrqqycx6ghkxrnejl2q6nl7pjw2j4clchjj6uk5zozad.onion",
					"nitter.daturab6drmkhyeia4ch5gvfc2f3wgo6bhjrv3pz6n7kxmvoznlkq4yd.onion",
					"nitter.esmail5pdn24shtvieloeedh7ehz3nrwcdivnfhfcedl7gf4kwddhkqd.onion",
					"nitter.g4c3eya4clenolymqbpgwz3q3tawoxw56yhzk4vugqrl6dtu3ejvhjid.onion", "nitter.holo-mix.com", "nitter.io.lol", "nitter.kavin.rocks",
					"nitter.kylrth.com", "nitter.l4qlywnpwqsluw65ts7md3khrivpirse744un3x7mlskqauz5pyuzgqd.onion", "nitter.lucabased.xyz",
					"nitter.lunar.icu", "nitter.micohauwkjbyw5meacrb4ipicwvwg4xtzl7y7viv53kig2mdcsvwkyyd.onion", "nitter.moomoo.me", "nitter.net",
					"nitter.pjsfkvpxlinjamtawaksbnnaqs2fc2mtvmozrzckxh7f3kis6yea25ad.onion", "nitter.poast.org", "nitter.priv.loki",
					"nitter.privacydev.net", "nitter.privpw3tndpkw6pnp3g727zfgfdzbu3k6a7chv226s3xymv2p4eiuqyd.onion", "nitter.qwik.space",
					"nitter.rawbit.ninja", "nitter.tiekoetter.com", "nitter.v6vgyqpa7yefkorazmg5d5fimstmvm2vtbirt6676mt7qmllrcnwycqd.onion",
					"nitter7bryz3jv7e3uekphigvmoyoem4al3fynerxkj22dmoxoq553qd.onion", "npf37k3mtzwxreiw52ccs5ay4e6qt2fkcs2ndieurdyn2cuzzsfyfvid.onion",
					"nt.vernccvbvyi5qhfzyqengccj7lkove6bjot2xhh5kajhwvidqafczrad.onion", "nttr2iupbb6fazdpr2rgbooon2tzbbsvvkagkgkwohhodjzj43stxhad.onion",
					"pjsfs4ukb6prmfx3qx3a5ef2cpcupkvcrxdh72kqn2rxc2cw4nka.b32.i2p", "pxrhfmieeeqdu5pi4duscycsxqefqphaxgvvrvdtc3ckqn2mcora.b32.i2p",
					"qwikxx2erhx6qrymued6ox2qkf2yeogjwypqvzoif4fqkljixasr6oid.onion", "r2eqimhkvxboaltbdsectoo3hkf476pyemsdykclexzajbfx5v6ojlyd.onion",
					"tm4rwkeysv3zz3q5yacyr4rlmca2c4etkdobfvuqzt6vsfsu4weq.b32.i2p", "twitit.gq",
			    "twitter.ap3jtgssd7qn4vfoa62gi2ijddoblslbeuw5dan3xt7myvqpura5i4qd.onion",
			    "twitter.cepyxplublbyw2f4axy4pyztfbxmf63lrt2c7uwv6wl4iixz53czload.onion",
			    "twitter.prnoid54e44a4bduq5due64jkk7wcnkxcp5kv3juncm7veptjcqudgyd.onion", "u6ikd6zndl3c4dsdq4mmujpntgeevdk5qzkfb57r4tnfeccrn2qa.b32.i2p",
			    "vernzdedoxuflrrxc4vbatbkpjh4k22ecgiqgimdiif62onhagva.b32.i2p", "vfaomgh4jxphpbdfizkm5gbtjahmei234giqj4facbwhrfjtcldauqad.onion",
			    "wiio4sgs4247brk7hj6qck2jxnvldwfdbguigc5ivpxrsegnliyfvuqd.onion", "xcancel.com", "xnaas.github.io"
				],
				"pixiv-embed-hosts": ["phixiv.net"],
				"twitter-embed-hosts": ["fixupx.com", "fixvx.com", "fxtwitter.com", "girlcockx.com", "stupidpenisx.com", "vxtwitter.com", "yiffx.com"]
			}
		},
		"http_client_config": {
			"default_headers": {
				"user-agent": "Firefox",
				"sec-gpc": "1",
				"dnt": "1"
			},
			"referer": false,
			"redirect_policy": "None"
		}
	},
	"commons": {
		"mappers": {
			"extract-from-page": {"If": {
				"condition": {"Not": {"FlagIsSet": "no-network"}},
				"mapper": {"All": [
					{"Common": "universal"},
					{"SetPart": {
						"part": "Whole",
						"value": {"Cache": {
							"category": "redirect",
							"key": {"Part": "Whole"},
							"value": {"Modified": {
								"value": {"HttpRequest": {}},
								"modification": {"All": [
									{"CommonCallArg": "extractor"},
									{"CommonCallArg": "parser"}
								]}
							}}
						}}
					}}
				]}
			}},

			"redirect-shortcut": {"If": {
				"condition": {"All": [
					{"Not": {"StringIs": {"left": {"Var": {"type": "TaskContext", "name": "redirect_shortcut"}}, "right": null}}},
					{"StringIs": {
						"left" : {"Var": {"type": "JobContext", "name": "SOURCE_REG_DOMAIN"}},
						"right": {"Var": {"type": "Common", "name": "expected_reg_domain"}}
					}},
					{"Not": {"FlagIsSet": {"type": "Scratchpad", "name": "redirect_shortcut_used"}}}
				]},
				"mapper": {"All": [
					{"SetPart": {"part": "Whole", "value": {"Var": {"type": "TaskContext", "name": "redirect_shortcut"}}}},
					{"SetScratchpadFlag": {"name": "redirect_shortcut_used", "value": true}}
				]}
			}},

			"universal": {"Rules": [
				{
					"condition": {"All": [
						{"PartIs": {"part": "Scheme", "value": "http"}},
						{"Not": {"FlagIsSet": "no-https-upgrade"}},
						{"Not": "HostIsIp"},
						{"Not": {"PartMatches": {
							"part": "Host",
							"matcher": {"InSet": "https-upgrade-host-blacklist"}
						}}}
					]},
					"mapper": {"SetPart": {"part": "Scheme", "value": "https"}}
				},
				{"SharedCondition": {
					"condition": {"Not": {"PartIs": {"part": "RegDomain", "value": null}}},
					"rules": [
						{
							"condition": {"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "utps-reg-domain-whitelist"}}}},
							"mapper": {"All": [
								{"RemoveQueryParamsMatching": {"Any": [
									{"InSet": "utps"},
									{"ContainsAnyInList": {"where": "Start", "list": "utp-prefixes"}}
								]}},
								{"ModifyPart": {
									"part": "Fragment",
									"modification": {"RemoveQueryParamsMatching": {"Any": [
										{"InSet": "utps"},
										{"ContainsAnyInList": {"where": "Start", "list": "utp-prefixes"}}
									]}
								}}}
							]}
						},
						{
							"condition": {"All": [
								{"SubdomainIs": "www"},
								{"Not": {"Any": [
									{"PartMap": {
										"part": "RegDomain",
										"map": {
											"facebook.com" : {"PartIs": {"part": {"PathSegment": 0}, "value": "share"}},
											"teepublic.com": {"PartIs": {"part": {"PathSegment": 0}, "value": "lic"}}
										}
									}},
									{"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "remove-www-subdomain-reg-domain-blacklist"}}}
								]}}
							]},
							"mapper": {"SetPart": {"part": "Subdomain", "value": null}}
						},
						{"Mapper": {"SetPart": {
							"part": "FqdnPeriod",
							"value": null
						}}}
					]
				}},
				{
					"condition": {"All": [
						{"PartIs": {"part": "Query", "value": ""}},
						{"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "remove-empty-query-reg-domain-blacklist"}}}}
					]},
					"mapper": "RemoveQuery"
				},
				{
					"condition": {"All": [
						{"PartIs": {"part": "Fragment", "value": ""}},
						{"Not": {"PartMatches": {"part": "RegDomain", "matcher": {"InSet": "remove-empty-fragment-reg-domain-blacklist"}}}}
					]},
					"mapper": {"SetPart": {"part": "Fragment", "value": null}}
				},
				{
					"condition": {"Not": {"FlagIsSet": "keep-lang"}},
					"mapper": {"RemoveQueryParam": {"ParamsMap": {"name": "hwwwwdpafqdnp_lang_query_params", "key": {"Part": "HostWithoutWWWDotPrefixAndFqdnPeriod"}}}}
				}
			]},

			"url-from-query-param-or-query": {"FirstNotError": [
				{"GetUrlFromQueryParam": {"Var": {"type": "Common", "name": "param"}}},
				{"CopyPart": {"from": "Query", "to": "Whole"}},
				{"SetPart": {
					"part": "Whole",
					"value": {"Modified": {
						"value": {"Part": "Query"},
						"modification": "UrlDecode"
					}}
				}}
			]}
		}
	},
	"rules": [
		{
			"condition": {"All": [
				{"PartIs": {"part": "Whole", "value": "javascript:void(0);"}},
				{"StringIs": {
					"left": {"Var": {"type": "JobContext", "name": "SOURCE_REG_DOMAIN"}},
					"right": "furaffinity.net"
				}},
				{"StringIs": {"left": {"Modified": {"value": {"Var": {"type": "TaskContext", "name": "faci_site_name"}}, "modification": "Lowercase"}}, "right": "website"}}
			]},
			"mapper": {"SetPart": {
				"part": "Whole",
				"value": {"Join": {"values": ["https://", {"Var": {"type": "TaskContext", "name": "link_text"}}]}}
			}}
		},
		{"SharedCondition": {
			"condition": {"PartIsOneOf": {"part": "Scheme", "values": ["http", "https"]}},
			"rules": [
				{
					"condition": {"Any": [
						{"PartMatches": {
							"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
							"matcher": {"Any": [
								{"InSet": "redirect-hwwwwdpafqdnps"},
								{"InSet": "bypass.vip-hwwwwdpafqdnps"},
								{"IsOneOf": [
									"1link.club", "action.openmedia.org", "allmylinks.com", "api.linkr.bio", "api.pinterest.com", "awin1.com", "bfy.tw", "boxd.it",
									"bugzil.la", "buymeacoff.ee", "buymeacoffee.com", "cach.me", "carleton.ca", "cash.app", "click.notification.elsevier.com",
									"deviantart.com", "duckduckgo.com", "duckduckgo.com", "duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion",
									"e.emailalerts.cnn.com", "facebook.com", "goodreads.com", "google.com", "gprivate.com", "href.li", "instagr.am", "instagram.com",
									"l.instagram.com", "l.threads.com", "lmddgtfy.net", "lmgtfy2.com", "lnk.bio", "m.vk.com", "old.reddit.com", "open.substack.com",
									"out.reddit.com", "pawoo.net", "pixiv.net", "preview.tinyurl.com", "proxy.notsobot.com", "rd.goodreads.com", "reddit.com", "reurl.cc",
									"shareasale-analytics.com", "shareasale.com", "sketchfab.com", "sketchfab.com", "skfb.ly", "smarturl.it", "ss3.shipstation.com",
									"steamcommunity.com", "subscribestar.adult", "substack.com", "t.umblr.com", "tee.pub", "teepublic.com", "tinyurl.com", "toyhou.se",
									"twpf.jp", "urldefense.com", "vk.com", "youtube.com", "apexpartner.app", "redirect.viglink.com", "linkprotect.cudasvc.com", "ro.blox.com"
								]},
								{"Contains": {"value": "google"}}
							]}
						}},
						{"TreatErrorAsFail": {"PartMatches": {
							"part": "RegDomain",
							"matcher": {"Any": [
								{"IsOneOf": ["smartadserver.com", "lnk.to"]},
								{"InSet": "redirect-reg-domains"}
							]}
						}}}
					]},
					"mapper": {"Rule": {
						"Repeat": {
							"rules": [
								{
									"PartMap": {
										"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
										"map": {
											"1link.club": {"Common": {
												"name": "extract-from-page",
												"args": {
													"string_modifications": {
														"extractor": {"StripBefore": "<a id=\"download\""},
														"parser": {"GetHtmlAttribute": "href"}
													}
												}
											}},
											"action.openmedia.org": {"If": {
												"condition": {"PartContains": {"part": "Path", "value": "/page/email/click", "where": "Start"}},
												"mapper": "RemoveQuery"
											}},
											"allmylinks.com": {"Common": {
												"name": "redirect-shortcut",
												"args": {"vars": {"expected_reg_domain": "allmylinks.com"}}
											}},
											"api.linkr.bio": {"If": {
												"condition": {"PathIs": "/callbacks/go"},
												"mapper": {"GetUrlFromQueryParam": "url"}
											}},
											"api.linkr.com": {"If": {
												"condition": {"PathIs": "/callbacks/go"},
												"mapper": {"GetUrlFromQueryParam": "url"}
											}},
											"awin1.com": {"If": {
												"condition": {"PathIs": "/cread.php"},
												"mapper": {"TryElse": {
													"try": {"GetUrlFromQueryParam": "ued"},
													"else": {"If": {
														"condition": {"Not": {"FlagIsSet": "no-network"}},
														"mapper": {"All": [
															{"Common": "universal"},
															{"ExpandRedirect": {}},
															{"RemoveQueryParams": ["source", "awc", "sv1", "sv_campaign_id"]}
														]}
													}}
												}}
											}},
											"bfy.tw": {"Common": {
												"name": "extract-from-page",
												"args": {
													"string_modifications": {
														"extractor": {"StripBefore": "<a href="},
														"parser": {"GetHtmlAttribute": "href"}
													}
												}
											}},
											"boxd.it": {"All": [
												{"Common": "universal"},
												{"SetPart": {"part": "Subdomain", "value": null}}
											]},
											"bugzil.la": {"All": [
												{"SetHost": "bugzilla.mozilla.org"},
												{"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "id"}}},
												{"SetPart": {"part": "Path", "value": "/show_bug.cgi"}}
											]},
											"buymeacoff.ee": {"SetHost": "buymeacoffee.com"},
											"cach.me": {"SetHost": "cash.app"},
											"click.notification.elsevier.com": {"If": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "CL0"}},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": "Path"},
														"modification": {"All": [
															{"KeepSegmentRange": {"split": "/", "start": 2}},
															"UrlDecode"
														]}
													}}
												}}
											}},
											"deviantart.com": {"If": {
												"condition": {"PathIs": "/users/outgoing"},
												"mapper": {"Common": {
													"name": "url-from-query-param-or-query",
													"args": {"vars": {"param": "url"}}
												}}
											}},
											"duckduckgo.com": {"If": {
												"condition": {"PathIs": "/l/"},
												"mapper": {"GetUrlFromQueryParam": "uddg"}
											}},
											"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"If": {
												"condition": {"PathIs": "/l/"},
												"mapper": {"GetUrlFromQueryParam": "uddg"}
											}},
											"e.emailalerts.cnn.com": {"SetPart": {
												"part": "Whole",
												"value": {"Modified": {
													"value": {"Part": "Query"},
													"modification": {"All": [
														{"KeepNthSegment": {"split": "/", "index": 2}},
														{"RemoveChar": 0},
														"Base64Decode",
														{"KeepNthSegment": {"split": ",", "index": -1}}
													]}
												}}
											}},
											"go.bsky.app": {"TryElse": {
												"try": {"GetUrlFromQueryParam": "u"},
												"else": {"If": {
													"condition": {"Not": {"FlagIsSet": "no-network"}},
													"mapper": {"ExpandRedirect": {}}
												}}
											}},
											"goodreads.com": {"If": {
												"condition": {"PathIs": "/gp/r.html"},
												"mapper": {"GetUrlFromQueryParam": "U"}
											}},
											"gprivate.com": {"Common": {
												"name": "extract-from-page",
												"args": {
													"string_modifications": {
														"extractor": {"KeepAfter": "window.location = "},
														"parser": "GetJsStringLiteralPrefix"
													}
												}
											}},
											"href.li": {"SetPart": {
												"part": "Whole",
												"value": {"Modified": {
													"value": {"Part": "Query"},
													"modification": "UrlDecode"
												}}
											}},
											"instagr.am": {"SetHost": "instagram.com"},
											"l.instagram.com": {"GetUrlFromQueryParam": "u"},
											"l.threads.com": {"GetUrlFromQueryParam": "u"},
											"linkprotect.cudasvc.com": {"GetUrlFromQueryParam": "a"},
											"lmddgtfy.net": {"SetHost": "duckduckgo.com"},
											"lmgtfy2.com": {"If": {
												"condition": {"Not": {"PartIs": {"part": {"QueryParam": "q"}, "value": null}}},
												"mapper": {
													"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Map": {
																"value": {"Part": {"QueryParam": "s"}},
																"map": {
																	"g": {"Map": {
																		"value": {"Part": {"QueryParam": "t"}},
																		"map": {
																			"w" : "https://google.com/search?q=",
																			"i" : "https://google.com/search?tbm=isch&q=",
																			"v" : "https://google.com/search?tbm=vid&q=",
																			"m" : "https://google.com/maps?q=",
																			"n" : "https://google.com/search?tbm=nws&q=",
																			"s" : "https://google.com/search?tbm=shop&q=",
																			"b" : "https://google.com/search?tbm=bks&q=",
																			"f" : "https://google.com/finance?q=",
																			"sc": "https://scholar.google.com/scholar?q="
																		},
																		"if_null": "https://www.google.com/search?q="
																	}},
																	"c": "https://chat.openai.com/search?q=",
																	"b": "https://startpage.com/search?q=",
																	"y": "https://search.yahoo.com/search?q=",
																	"d": "https://duckduckgo.com/?q=",
																	"k": "https://ask.com/web?q=",
																	"a": "https://search.aol.com/aol/search?q=",
																	"w": "https://wikipedia.org/w/index.php?search=",
																	"s": "https://snopes.com/search/?q="
																}
															}},
															"modification": {"Append": {"Part": {"QueryParam": "q"}}}
														}}
													}
												}
											}},
											"lnk.bio": {"If": {
												"condition": {"PathIs": "/go"},
												"mapper": {"GetUrlFromQueryParam": "d"}
											}},
											"mfy.gg": {"SetHost": "metafy.gg"},
											"o93x.net": {"GetUrlFromQueryParam": "u"},
											"open-api.tiktok.com": {"AllowQueryParams": ["open_id"]},
											"open.substack.com": {"If": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "pub"}},
												"mapper": {"All": [
													{"CopyPart": {"from": {"PathSegment": 1}, "to": "Subdomain"}},
													{"SetPart": {"part": {"PathSegment": 0}, "value": null}},
													{"SetPart": {"part": {"PathSegment": 0}, "value": null}}
												]}
											}},
											"out.reddit.com": {"GetUrlFromQueryParam": "url"},
											"pixiv.net": {"If": {
												"condition": {"PathIs": "/jump.php"},
												"mapper": {"Common": {
													"name": "url-from-query-param-or-query",
													"args": {"vars": {"param": "url"}}
												}}
											}},
											"preview.tinyurl.com": {"All": [
												{"SetPart": {"part": "Subdomain", "value": null}},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "preview"}}
											]},
											"proxy.notsobot.com": {"GetUrlFromQueryParam": "url"},
											"rd.goodreads.com": {"If": {
												"condition": {"PathIs": "/gp/r.html"},
												"mapper": {"GetUrlFromQueryParam": "U"}
											}},
											"redirect.viglink.com": {"TryElse": {
												"try": {"GetUrlFromQueryParam": "u"},
												"else": {"GetUrlFromQueryParam": "out"}
											}},
											"reurl.cc": {"CacheUrl": {
												"category": "redirect",
												"mapper": {"If": {
													"condition": {"Not": {"FlagIsSet": "no-network"}},
													"mapper": {"SetPart": {
														"part": "Whole",
														"value": {"HttpRequest": {"response_handler": {"Header": "target"}}}
													}}
												}}
											}},
											"ro.blox.com": {"GetUrlFromQueryParam": "af_web_dp"},
											"shareasale-analytics.com": {"If": {
												"condition": {"PartContains": {"part": "Path", "value": ".cfm", "where": "End"}},
												"mapper": {"FirstNotError": [
													{"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Part": {"QueryParam": "urllink"}},
															"modification": {"All": [
																{"StripMaybePrefix": "http://"},
																{"StripMaybePrefix": "https://"},
																{"Insert": {"index": 0, "value": "https://"}}
															]}
														}}
													}},
													{"All": [
														{"AllowQueryParams": ["d", "b", "u", "m"]},
														{"Common": "universal"},
														{"CacheUrl": {
															"category": "redirect",
															"key": {"Part": "Whole"},
															"mapper": {"SetPart": {
																"part": "Whole",
																"value": {"Modified": {
																	"value": {"HttpRequest": {}},
																	"modification": {"All": [
																		{"KeepAfter": "replace("},
																		"GetJsStringLiteralPrefix"
																	]}
																}}
															}} 
														}}
													]}
												]}
											}},
											"shareasale.com": {"If": {
												"condition": {"PartContains": {"part": "Path", "value": ".cfm", "where": "End"}},
												"mapper": {"FirstNotError": [
													{"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Part": {"QueryParam": "urllink"}},
															"modification": {"All": [
																{"StripMaybePrefix": "http://"},
																{"StripMaybePrefix": "https://"},
																{"Insert": {"index": 0, "value": "https://"}}
															]}
														}}
													}},
													{"All": [
														{"SetHost": "shareasale-analytics.com"},
														{"AllowQueryParams": ["d", "b", "u", "m"]},
														{"Common": "universal"},
														{"CacheUrl": {
															"category": "redirect",
															"key": {"Part": "Whole"},
															"mapper": {"SetPart": {
																"part": "Whole",
																"value": {"Modified": {
																	"value": {"HttpRequest": {}},
																	"modification": {"All": [
																		{"KeepAfter": "replace("},
																		"GetJsStringLiteralPrefix"
																	]}
																}}
															}} 
														}}
													]}
												]}
											}},
											"shorturl.at": {"SetPart": {"part": "Subdomain", "value": "www"}},
											"skfb.ly": {"All": [
												{"SetHost": "sketchfab.com"},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "s"}}
											]},
											"smarturl.it": {"Common": {
												"name": "extract-from-page",
												"args": {
													"string_modifications": {
														"extractor": {"KeepAfter": "\"originalUrl\":"},
														"parser": "GetJsStringLiteralPrefix"
													}
												}
											}},
											"ss3.shipstation.com": {"SetPart": {
												"part": "Whole",
												"value": {"Join": {
													"values": [
														"https://",
														{"Modified": {
															"value": {"Part": "Whole"},
															"modification": {"StripPrefix": "https://ss3.shipstation.com/"}
														}}
													]
												}}
											}},
											"steamcommunity.com": {"If": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "linkfilter"}},
												"mapper": {"GetUrlFromQueryParam": "u"}
											}},
											"subscribestar.adult": {"If": {
												"condition": {"PathIs": "/away"},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": {"QueryParam": "url"}},
														"modification": {"All": [
															{"Replace": {"find": "\n", "replace": ""}},
															"Base64Decode"
														]}
													}}
												}}
											}},
											"substack.com": {"Rules": [
												{
													"condition": {"PathIs": "/app-link/post"},
													"mapper": {"AllowQueryParams": ["publication_id", "post_id", "submitLike", "action"]}
												},
												{
													"condition": {"All": [
														{"PartIs": {"part": {"PathSegment": 0}, "value": "redirect"}},
														{"PartMatches": {"part": {"PathSegment": 1}, "matcher": {"LengthIs": 36}}}
													]},
													"mapper": "RemoveQuery"
												},
												{
													"condition": {"PartContains": {"part": "Path", "where": "Start", "value": "/redirect/2/"}},
													"mapper": {"SetPart": {
														"part": "Whole",
														"value": {"Modified": {
															"value": {"Part": {"PathSegment": 2}},
															"modification": {"All": [
																{"KeepNthSegment": {"split": ".", "index": 0}},
																"Base64Decode",
																{"JsonPointer": "/e"}
															]}
														}}
													}}
												}
											]},
											"t.co": {"Common": {
												"name": "redirect-shortcut",
												"args": {"vars": {"expected_reg_domain": "x.com"}}
											}},
											"t.umblr.com": {"GetUrlFromQueryParam": "z"},
											"tee.pub": {"SetHost": "www.teepublic.com"},
											"tinyurl.com": {"All": [
												{"PartMap": {
													"part": {"PathSegment": 0},
													"map": {
														"preview": "None",
														"app": {"SetPart": {"part": {"PathSegment": 0}, "value": "preview"}}
													},
													"else": {"SetPart": {"part": {"BeforePathSegment": 0}, "value": "preview"}}
												}},
												{"Common": {
													"name": "extract-from-page",
													"args": {
														"string_modifications": {
															"extractor": {"KeepAfter": "let url = "},
															"parser": "GetJsStringLiteralPrefix"
														}
													}
												}}
											]},
											"toyhou.se": {"If": {
												"condition": {"PathIs": "/~r"},
												"mapper": {"GetUrlFromQueryParam": "q"}
											}},
											"twpf.jp": {"If": {
												"condition": {"PartIs": {"part": "Path", "value": "/home/jump"}},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": {"QueryParam": "p"}},
														"modification": "UrlDecode"
													}}
												}}
											}},
											"urldefense.com": {"If": {
												"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "v3"}},
												"mapper": {"SetPart": {
													"part": "Whole",
													"value": {"Modified": {
														"value": {"Part": "Whole"},
														"modification": {"All": [
															{"KeepSegmentRange": {"split": "__;", "end": -1}},
															{"KeepSegmentRange": {"split": "__", "start": 1}},
															{"Replace": {"find": "*", "replace": "%"}}
														]}
													}}
												}}
											}},
											"youtube.com": {"If": {
												"condition": {"PathIs": "/redirect"},
												"mapper": {"GetUrlFromQueryParam": "q"}
											}}
										}
									}
								},



								{
									"PartMap": {
										"part": "RegDomain",
										"map": {
											"carleton.ca": {"If": {
												"condition": {"PartIs": {"part": {"QueryParam": "action"}, "value": "redirect"}},
												"mapper": {"GetUrlFromQueryParam": "url"}
											}},
											"lnk.to": {"IgnoreError": {"Common": {
												"name": "extract-from-page",
												"args": {
													"string_modifications": {
														"extractor": {"KeepAfter": "\"originalUrl\":"},
														"parser": "GetJsStringLiteralPrefix"
													}
												}
											}}},
											"onelink.me": "RemoveQuery",
											"pulse.ly": {"All": [
												{"SetHost": "api.link.agorapulse.com"},
												{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "redirect"}}
											]},
											"smartadserver.com": {"If": {
												"condition": {"PathIs": "/click"},
												"mapper": {"GetUrlFromQueryParam": "go"}
											}},
											"visitlink.me": {"SetPart": {"part": "Subdomain", "value": null}},
											"vk.com": {"If": {
												"condition": {"PathIs": "/away.php"},
												"mapper": {"GetUrlFromQueryParam": "to"}
											}}
										}
									}
								},



								{
									"condition": {"All": [
										{"FlagIsSet": "bypass.vip"},
										{"Not": {"FlagIsSet": "no-network"}},
										{"PartMatches": {"part": "HostWithoutWWWDotPrefixAndFqdnPeriod", "matcher": {"InSet": "bypass.vip-hwwwwdpafqdnps"}}}
									]},
									"mapper": {"All": [
										{"Common": "universal"},
										{"CacheUrl": {
											"category": "redirect",
											"mapper": {"SetPart": {
												"part": "Whole",
												"value": {"Modified": {
													"value": {"HttpRequest": {
														"url": {"Join": {
															"values": [
																{"IfStringIsNone": {
																	"value": {"NoneTo": {
																		"value": {"Var": "bypass.vip-api-key"},
																		"if_none": {"Var": {"type": "Env", "name": "URL_CLEANER_BYPASS_VIP_API_KEY"}}
																	}},
																	"then": "https://api.bypass.vip/bypass?url=",
																	"else": "https://api.bypass.vip/premium/bypass?url="
																}},
																{"Modified": {"value": {"Part": "Whole"}, "modification": "UrlEncode"}}
															]
														}},
														"headers": {
															"x-api-key": {"NoneTo": {
																"value": {"Var": "bypass.vip-api-key"},
																"if_none": {"Var": {"type": "Env", "name": "URL_CLEANER_BYPASS_VIP_API_KEY"}}
															}}
														}
													}},
													"modification": {"JsonPointer": "/result"}
												}}
											}}
										}}
									]}
								},



								{
									"PartMap": {
										"part": "DomainMiddle",
										"map": {
											"google": {"If": {
												"condition": {"PathIs": "/url"},
												"mapper": {"GetUrlFromQueryParam": "q"}
											}}
										}
									}
								},



								{
									"condition": {"All": [
										{"PartMatches": {
											"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
											"matcher": {"InSet": "email-link-format-1-hosts"}
										}},
										{"PartContains": {"part": "Path", "value": "/page/email/redirect", "where": "Start"}}
									]},
									"mapper": {"All": [
										{"CopyPart": {"from": {"QueryParam": "campaignpageurl"}, "to": "Whole"}},
										{"RemoveQueryParams": ["ea.url.id"]}
									]}
								},



								{
									"condition": {"All": [
										{"Not": {"FlagIsSet": "no-network"}},
										{"Any": [
											{"PartMatches": {
												"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
												"matcher": {"InSet": "redirect-hwwwwdpafqdnps"}
											}},
											{"TreatErrorAsFail": {"PartMatches": {
												"part": "RegDomain",
												"matcher": {"InSet": "redirect-reg-domains"}
											}}},
											{"PartMap": {
												"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
												"map": {
													"allmylinks.com": {"PathIs": "/link/out"},
													"apexpartner.app": {"PartIs": {"part": {"PathSegment": 0}, "value": "redirect"}},
													"api.pinterest.com": {"PartIs": {"part": {"PathSegment": 0}, "value": "url_shortener"}},
													"facebook.com": {"PartContains": {"part": "Path", "where": "Start", "value": "/share/"}},
													"old.reddit.com": {"PartContains": {"part": "Path", "value": "/s/"}},
													"pawoo.net": {"PartIs": {"part": {"PathSegment": 0}, "value": "oauth_authentications"}},
													"qudsnen.co": {"Not": {"PartIs": {"part": {"QueryParam": "p"}, "value": null}}},
													"reddit.com": {"PartContains": {"part": "Path", "value": "/s/"}},
													"sketchfab.com": {"PartIs": {"part": {"PathSegment": 0}, "value": "s"}},
													"substack.com": {"Any": [
														{"All": [
															{"PartIs": {"part": {"PathSegment": 0}, "value": "redirect"}},
															{"Not": {"PartIs": {"part": {"PathSegment": 1}, "value": "2"}}}
														]},
														{"PathIs": "/app-link/post"}
													]},
													"teepublic.com": {"PartIs": {"part": {"PathSegment": 0}, "value": "lic"}}
												}
											}},
											{"All": [
												{"PartMatches": {
													"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
													"matcher": {"InSet": "email-link-format-1-hosts"}
												}},
												{"PartContains": {"part": "Path", "value": "/page/email/click", "where": "Start"}}
											]}
										]}
									]},
									"mapper": {"All": [
										{"Common": "universal"},
										{"ExpandRedirect": {}}
									]}
								}
							]
						}}
					}
				},



				{
					"SharedCondition": {
						"condition": {"All": [
							{"FlagIsSet": "unmobile"},
							{"TreatErrorAsFail": {"Not": {
								"PartMatches": {
									"part": "RegDomain",
									"matcher": {"InSet": "unmobile-reg-domain-blacklist"}
								}
							}}}
						]},
						"rules": [
							{
								"condition": {"Any": [
									{"PartIs": {"part": {"SubdomainSegment": 0}, "value": "m"}},
									{"PartIs": {"part": {"SubdomainSegment": 0}, "value": "mobile"}}
								]},
								"mapper": {"SetPart": {"part": {"SubdomainSegment": 0}, "value": null}}
							},
							{
								"condition": {"Any": [
									{"PartIs": {"part": {"SubdomainSegment": 1}, "value": "m"}},
									{"PartIs": {"part": {"SubdomainSegment": 1}, "value": "mobile"}}
								]},
								"mapper": {"SetPart": {"part": {"SubdomainSegment": 1}, "value": null}}
							}
						]
					}
				},



				{"StringMap": {
					"value": {"ParamsNamedPartitioning": {"name": "hwwwwdpafqdnp_categories", "element": {"Part": "HostWithoutWWWDotPrefixAndFqdnPeriod"}}},
					"map": {
						"alibaba": {"RemoveQueryParams": ["spm"]},
						"bluesky-embed-hosts": {"SetPart": {"part": "RegDomain", "value": "bsky.app"}},
						"breezewiki": {"If": {
							"condition": {"All": [
								{"Any": [
									{"FlagIsSet": "breezewiki"},
									{"FlagIsSet": "unbreezewiki"}
								]},
								{"Not": {"PathIs": "/"}}
							]},
							"mapper": {"All": [
								{"SetHost": "fandom.com"},
								{"MovePart": {"from": {"PathSegment": 0}, "to": "Subdomain"}}
							]}
						}},
						"deviantart-embed-hosts": {"SetPart": {"part": "RegDomain", "value": "deviantart.com"}},
						"discord-external": {"If": {
							"condition": {"FlagIsSet": "discord-unexternal"},
							"mapper": {"SetPart": {
								"part": "Whole",
								"value": {"Modified": {
									"value": {"Part": "Path"},
									"modification": {"RegexReplace": {"regex": "/[^/]+/[^/]+/([^/]+)/([^/]+)/([^?#]+)", "replace": "$1://$2/$3"}}
								}}
							}}
						}},
						"disney": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
						"instagram": {"RemoveQueryParams": ["igshid", "igsh", "xmt", "ig_mid", "e", "g"]},
						"invidious": {"If": {
							"condition": {"All": [
								{"Any": [
									{"FlagIsSet": "invidious"},
									{"FlagIsSet": "uninvidious"}
								]},
								{"Not": {"PathIs": "/"}}
							]},
							"mapper": {"SetHost": "youtube.com"}
						}},
						"lmgtfy": {"All": [
							{"SetHost": "google.com"},
							{"SetPart": {"part": "Path", "value": "/search"}}
						]},
						"nitter": {"If": {
							"condition": {"All": [
								{"Any": [
									{"FlagIsSet": "nitter"},
									{"FlagIsSet": "unnitter"}
								]},
								{"Not": {"PathIs": "/"}}
							]},
							"mapper": {"SetHost": "x.com"}
						}},
						"pixiv-embed-hosts": {"SetHost": "pixiv.net"},
						"twitter-embed-hosts": {"SetHost": "x.com"}
					}
				}},



				{
					"StringMap": {
						"value": {"ErrorToNone": {"ParamsNamedPartitioning": {
							"name": "hwwwwdpafqdnp_categories",
							"element": {"Modified": {
								"value": {"Var": {"type": "JobContext", "name": "SOURCE_HOST"}},
								"modification": {"StripMaybePrefix": "www."}
							}}
						}}},
						"map": {
							"alibaba": {"RemoveQueryParams": ["spm", "file"]},
							"bluesky": {"If": {
								"condition": {"All": [
									{"PartContains": {"part": "Path", "where": "Start", "value": "/profile/did:plc:"}},
									{"Not": {"StringIs": {"left": {"Var": {"type": "TaskContext", "name": "bsky_handle"}}, "right": null}}}
								]},
								"mapper": {"SetPart": {"part": {"PathSegment": 1}, "value": {"Var": {"type": "TaskContext", "name": "bsky_handle"}}}}
							}},
							"furaffinity": {"If": {
								"condition": {"Not": {"StringIs": {
									"left" : {"Var": {"type": "TaskContext", "name": "faci_site_name"}},
									"right": null
								}}},
								"mapper": {"SetPart": {
									"part": "Whole",
									"value": {"Modified": {
										"value": {"Var": {"type": "TaskContext", "name": "link_text"}},
										"modification": {"Map": {
											"value": {"Modified": {"value": {"Var": {"type": "TaskContext", "name": "faci_site_name"}}, "modification": "Lowercase"}},
											"map": {
												"bluesky"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?bsky\\.app/)?(?:profile/)?([^/]+)$"           , "replace": "https://bsky.app/profile/$1"       }},
												"cara"         : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?cara\\.app/)?([^/]+)$"                        , "replace": "https://cara.app/$1"               }},
												"dealer's den" : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?thedealersden\\.com/)?(?:store/)?([^/]+)$"    , "replace": "https://thedealersden.com/store/$1"}},
												"deviantart"   : {"RegexReplace": {"regex": "^(?:https?://)?(?:www\\.)?(?:([^.]+)\\.)?(?:deviantart\\.com/?)?([^/]*)$"  , "replace": "https://deviantart.com/$1$2"       }},
												"etsy"         : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?etsy\\.com/)?(?:shop/)?([^/]+)$"              , "replace": "https://etsy.com/shop/$1"          }},
												"facebook"     : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?facebook\\.com/)?([^/]+)$"                    , "replace": "https://facebook.com/$1"           }},
												"furry network": {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?furrynetwork\\.com/)?([^/]+)$"                , "replace": "https://furrynetwork.com/$1"       }},
												"inkbunny"     : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?inkbunny\\.net/)?([^/]+)$"                    , "replace": "https://inkbunny.net/$1"           }},
												"itaku"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?itaku\\.ee/)?(?:profile/)?([^/]+)$"           , "replace": "https://itaku.ee/profile/$1"       }},
												"ko-fi"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?ko-fi\\.com/)?([^/]+)$"                       , "replace": "https://ko-fi.com/$1"              }},
												"patreon"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?patreon\\.com/)?([^/]+)$"                     , "replace": "https://patreon.com/$1"            }},
												"picarto"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?picarto\\.tv/)?([^/]+)$"                      , "replace": "https://picarto.tv/$1"             }},
												"piczel"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?piczel\\.tv/)?(?:watch/)?([^/]+)$"            , "replace": "https://piczel.tv/watch/$1"        }},
												"pixiv"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?pixiv\\.net/)?(?:[a-z-]/)?(?:users/)?([^/]+)$", "replace": "https://pixiv.net/en/users/$1"     }},
												"sofurry"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:www\\.)?([^.]+)\\.sofurry\\.com/?$"                      , "replace": "https://$1.sofurry.com"            }},
												"steam"        : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?steamcommunity\\.com/)?(?:id/)?([^/]+)$"      , "replace": "https://steamcommunity.com/id/$1"  }},
												"transfur"     : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?transfur\\.com/)?(?:users/)?([^/]+)$"         , "replace": "https://transfur.com/users/$1"     }},
												"tumblr"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:www\\.)?(?:([^.]+)\\.)?(?:tumblr\\.com/?)?([^/]*)$"      , "replace": "https://$1$2.tumblr.com"           }},
												"twitch"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?twitch\\.tv/)?([^/]+)$"                       , "replace": "https://twitch.tv/$1"              }},
												"twitter"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com/)?@?([^/]+)$"             , "replace": "https://x.com/$1"                  }},
												"weasyl"       : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?weasyl\\.com/)?~?([^/]+)$"                    , "replace": "https://weasyl.com/~$1"            }},
												"x"            : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com/)?@?([^/]+)$"             , "replace": "https://x.com/$1"                  }},
												"youtube"      : {"RegexReplace": {"regex": "^(?:https?://)?(?:(?:www\\.)?youtube\\.com/)?([^/]+)$"                     , "replace": "https://youtube.com/$1"            }}
											},
											"else": {"Set": {"Part": "Whole"}}
										}}
									}}
								}}
							}}
						}
					}
				},



				{
					"PartMap": {
						"comment-1": "If you can't get a certain domain to work here, it may be because Mozilla's Public Suffix List, therefore the psl crate, and therefore UrlPart consideres it a suffix.",
						"comment-2": "There's a PartMap under this one for DomainSuffix. Try it there.",
						"part": "RegDomain",
						"map": {
							"acer.com": {"RemoveQueryParamsMatching": {"Contains": {"where": "Start", "value": "internal_"}}},
							"addons.mozilla.org": {"RemoveQueryParams": ["platform", "appver"]},
							"alibaba.com": {"RemoveQueryParams": ["spm", "selectedCarrierCode", "fsb", "tracelog", "wx_navbar_tramsparent"]},
							"amtrak.com": {"RemoveQueryParams": ["atv", "cmp"]},
							"apexgamingpcs.com": {"RemoveQueryParams": ["linkId", "affluencerId"]},
							"atom.bio": {"RemoveQueryParams": ["menu_origin"]},
							"bbc.com": {"RemoveQueryParamsMatching": {"Contains": {"where": "Start", "value": "at_"}}},
							"be.net": {"SetHost": "behance.net"},
							"beacons.ai": {"RemoveQueryParamsMatching": {"Any": [
								{"Contains": {"value": "refer", "where": "Start"}},
								{"IsOneOf": ["pageViewSource", "show_back_button"]}
							]}},
							"bell.ca": {"All": [
								{"RemoveQueryParams": ["INT"]},
								{"If": {
									"condition": {"TreatErrorAsFail": {"PartContains": {"part": "Fragment", "where": "Start", "value": "INT="}}},
									"mapper": {"SetPart": {"part": "Fragment", "value": null}}
								}}
							]},
							"boosty.to": {"RemoveQueryParams": ["share"]},
							"browserstack.com": {"ModifyPart": {
								"part": "Fragment",
								"modification": {"RemoveQueryParamsMatching": {"IsOneOf": ["ref", "source"]}}
							}},
							"bsky.social": {"If": {
								"condition": {"Not": {"PartIsOneOf": {"part": "Subdomain", "values": ["www", null]}}},
								"mapper": {"All": [
									{"SetPart": {"part": "Path", "value": {"Join": {"values": ["/profile/", {"Part": "Domain"}]}}}},
									{"SetHost": "bsky.app"}
								]}
							}},
							"cbc.ca": {"RemoveQueryParams": ["__vfz"]},
							"cbsnews.com": {"RemoveQueryParams": ["ftag", "linkId"]},
							"cnbc.com": {"RemoveQueryParams": ["par"]},
							"cnn.com": {"All": [
								{"RemoveQueryParams": ["bt_ee", "bt_ts"]},
								{"If": {
									"condition": {"PartContains": {"part": {"PathSegment": -1}, "value": "h_", "where": "Start"}},
									"mapper": {"SetPart": {"part": {"PathSegment": -1}, "value": null}}
								}}
							]},
							"deviantart.com": {"If": {
								"condition": {"All": [
									{"Not": {"PartIs": {"part": "Subdomain", "value": "www"}}},
									{"Not": {"PartIs": {"part": "Subdomain", "value": ""}}}
								]},
								"mapper": {"MovePart": {"from": "Subdomain", "to": {"BeforePathSegment": 0}}}
							}},
							"drinkctrl.com": {"RemoveQueryParams": ["redirect", "ref", "tid"]},
							"duckduckgo.com": {"RemoveQueryParams": ["t", "atb", "ia"]},
							"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"RemoveQueryParams": ["t", "atb", "ia"]},
							"facebook.com": {"All": [
								{"If": {
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "reel"}},
									"mapper": "RemoveQuery"
								}},
								{"RemoveQueryParams": ["fs", "s", "mibextid", "rf", "share_url", "rdid"]}
							]},
							"fandom.com": {"All": [
								{"PartMap": {
									"part": {"PathSegment": 1},
									"map": {
										"Special:Search": {"RemoveQueryParams": ["scope", "navigationSearch"]}
									}
								}},
								{"If": {
									"condition": {"FlagIsSet": "breezewiki"},
									"mapper": {"All": [
										{"CopyPart": {"from": "Subdomain", "to": {"BeforePathSegment": 0}}},
										{"SetPart": {"part": "Host", "value": {"Var": "breezewiki-host"}}},
										{"PartMap": {
											"part": {"PathSegment": 2},
											"map": {
												"Special:Search": {"All": [
													{"SetPart": {"part": {"PathSegment": 1}, "value": "search"}},
													{"SetPart": {"part": {"PathSegment": 2}, "value": null}},
													{"MovePart": {"from": {"QueryParam": "query"}, "to": {"QueryParam": "q"}}}
												]}
											}
										}}
									]}
								}}
							]},
							"fori.io": {"SetHost": "foriio.com"},
							"furaffinity.net": {"All": [
								{"If": {
									"condition": {"All": [
										{"FlagIsSet": "furaffinity-sfw"},
										{"PartIsOneOf": {"part": "Subdomain", "values": ["www", null]}}
									]},
									"mapper": {"SetPart": {"part": "Subdomain", "value": "sfw"}}}
								},
								{"If": {
									"condition": {"All": [
										{"FlagIsSet": "furaffinity-unsfw"},
										{"PartIs": {"part": "Subdomain", "value": "sfw"}}
									]},
									"mapper": {"SetPart": {"part": "Subdomain", "value": null}}
								}}
							]},
							"gelbooru.com": {"If": {
								"condition": {"PartIs": {"part": {"QueryParam": "page"}, "value": "post"}},
								"mapper": {"RemoveQueryParams": ["tags"]}
							}},
							"go.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
							"goodreads.com": {"All": [
								{"RemoveQueryParams": ["ref_"]},
								{"If": {
									"condition": {"PartContains": {"part": "Path", "where": "Start", "value": "/book/show/"}},
									"mapper": "RemoveQuery"
								}}
							]},
							"history.com": {"If": {
								"condition": {"TreatErrorAsFail": {"PartMatches": {"part": "Fragment", "matcher": {"Contains": {"value": "link_time", "where": "Start"}}}}},
								"mapper": {"SetPart": {"part": "Fragment", "value": null}}
							}},
							"hp.com": {"RemoveQueryParamsMatching": {"Any": [
								{"IsOneOf": ["jumpid", "_its", "adcampaigngroup", "campaignID"]},
								{"Contains": {"value": "sv_", "where": "Start"}}
							]}},
							"hulu.com": {"RemoveQueryParams": ["from"]},
							"inkbunny.net": {"If": {
								"condition": {"PathIs": "/submissionsviewall.php"},
								"mapper": {"RemoveQueryParams": ["rid"]}
							}},
							"instagram.com": {"If": {
								"condition": {"All": [
									{"FlagIsSet": "instagram-unprofilecard"},
									{"PartIs": {"part": {"PathSegment": 1}, "value": "profilecard"}}
								]},
								"mapper": {"SetPart": {"part": {"PathSegment": 1}, "value": null}}
							}},
							"ipetitions.com": {"If": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "petition"}},
								"mapper": "RemoveQuery"
							}},
							"lenovo.com": {"RemoveQueryParams": ["IPromoID", "orgRef"]},
							"linktr.ee": {"RemoveQueryParamsMatching": {"Any": [
								{"IsOneOf": ["ltsid"]},
								{"Contains": {"value": "lt_utm", "where": "Start"}}
							]}},
							"loblaws.ca": {"RemoveQueryParams": ["navid", "icid", "icta"]},
							"marshmallow-qa.com": {"RemoveQueryParams": ["t"]},
							"marvel.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
							"minds.com": {"RemoveQueryParams": ["referrer"]},
							"overpass-turbo.eu": {"If": {
								"condition": {"All": [
									{"Not": {"FlagIsSet": "no-network"}},
									{"PartIs": {"part": {"PathSegment": 0}, "value": "s"}}
								]},
								"mapper": {"All": [
									{"Common": "universal"},
									{"ExpandRedirect": {}}
								]}
							}},
							"patreon.com": {"RemoveQueryParams": ["redirect_uri", "fan_landing"]},
							"pawoo.net": {"RemoveQueryParams": ["provider"]},
							"pixiv.net": {"If": {
								"condition": {"PathIs": "/member.php"},
								"mapper": {"All": [
									{"SetPart": {"part": "Path", "value": "/users"}},
									{"CopyPart": {"from": {"QueryParam": "id"}, "to": "NextPathSegment"}},
									"RemoveQuery"
								]}
							}},
							"reddit.com": {"All": [
								{"RemoveQueryParams": ["share_id"]},
								{"PartMap": {
									"part": {"PathSegment": 0},
									"map": {
										"search": {"RemoveQueryParams": ["cid"]},
										"domain": {"AllowQueryParams": ["count", "after"]}
									},
									"else": {"AllowQueryParams": ["f"]}
								}}
							]},
							"rule34.xxx": {"If": {
								"condition": {"All": [
									{"FlagIsSet": "remove-unused-search-query"},
									{"PartIs": {"part": {"QueryParam": "s"}, "value": "view"}}
								]},
								"mapper": {"RemoveQueryParams": ["tags"]}
							}},
							"snapchat.com": {"RemoveQueryParams": ["purpose", "sp"]},
							"spotify.com": {"All": [
								{"If": {
									"condition": {"PartIs": {"part": {"PathSegment": 1}, "value": "album"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
								}},
								{"PartMap": {
									"part": {"PathSegment": 0},
									"map": {
										"album": "RemoveQuery"
									},
									"else": {"RemoveQueryParams": ["si"]}
								}}
							]},
							"stackoverflow.com": {"RemoveQueryParams": ["so_medium", "so_source", "c"]},
							"sta.sh": {"All": [
								{"SetPart": {"part": "Host", "value": "deviantart.com"}},
								{"SetPart": {"part": {"BeforePathSegment": 0}, "value": "stash"}}
							]},
							"steampowered.com": {"RemoveQueryParams": ["snr"]},
							"subscribestar.adult": {"RemoveQueryParams": ["redirect_notice"]},
							"support.google.com": {"AllowQueryParams": ["q"]},
							"teepublic.com": {"All": [
								{"If": {
									"condition": {"TreatErrorAsFail": {"PartContains": {"part": "Fragment", "value": "D1V", "where": "End"}}},
									"mapper": {"SetPart": {"part": "Fragment", "value": null}}
								}},
								{"RemoveQueryParams": ["countrycode"]}
							]},
							"teespring.com": "RemoveQuery",
							"theguardian.com": {"RemoveQueryParams": ["CMP"]},
							"thelancet.com": {"If": {
								"condition": {"PartIsOneOf": {"part": {"PathSegment": 0}, "values": ["commissions", "journals"]}},
								"mapper": "RemoveQuery"
							}},
							"theonion.com": {"AllowQueryParams": ["s"]},
							"thrn.co": {"All": [
								{"SetHost": "throne.com"},
								{"SetPart": {"part": {"PathSegment": 0}, "value": null}}
							]},
							"tiktok.com": {"RemoveQueryParamsMatching": {"Any": [
								{"IsOneOf": ["checksum", "source", "u_code", "timestamp", "user_id", "enable_checksum"]},
								{"ContainsAny": {"values": ["_", "sec_", "ug", "is_from", "sender", "share", "social_"], "where": "Start"}}
							]}},
							"tumblr.com": {"Rules": [
								{
									"condition": {"QueryHasParam": "redirect_to"},
									"mapper": {"All": [
										{"CopyPart": {"from": {"QueryParam": "redirect_to"}, "to": "Path"}},
										"RemoveQuery"
									]}
								},
								{
									"condition": {"PathIs": "/safe-mode"},
									"mapper": {"GetUrlFromQueryParam": "url"}
								},
								{
									"condition": {"Not": {"PartIs": {"part": {"PathSegment": 0}, "value": "search"}}},
									"mapper": "RemoveQuery"
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "login_required"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
								},
								{
									"condition": {"All": [
										{"FlagIsSet": "tumblr-unsubdomain-blog"},
										{"Not": {"TreatErrorAsFail": {"PartIsOneOf": {"part": "Subdomain", "values": ["at", "www"]}}}}
									]},
									"mapper": {"All": [
										{"If": {
											"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "post"}},
											"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
										}},
										{"MovePart": {"from": "Subdomain", "to": {"BeforePathSegment": 0}}}
									]}
								}
							]},
							"twitter.com": {"SetPart": {"part": "RegDomain", "value": "x.com"}},
							"washingtonpost.com": {"All": [
								{"RemoveQueryParams": ["itid", "nid", "arcId", "account_location", "tid", "oscode", "s_l", "acqEntType", "p", "s_ct"]},
								{"If": {
									"condition": {"TreatErrorAsFail": {"PartContains": {"part": "Fragment", "value": "link", "where": "Start"}}},
									"mapper": {"SetPart": {"part": "Fragment", "value": null}}
								}}
							]},
							"xiaohongshu.com": {"RemoveQueryParamsMatching": {"ContainsAny": {
								"values": ["xsec", "xhs", "app", "share"],
								"where": "Start"
							}}},
							"yahoo.com": {"RemoveQueryParams": ["p", "src", "pspid", "activity", ".src", "specId", "y"]},
							"youtu.be": {"All": [
								{"SetHost" : "youtube.com"},
								{"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "v"}}},
								{"SetPart" : {"part": "Path", "value": "watch"}},
								{"RemoveQueryParams": ["si", "feature", "pp"]}
							]},
							"youtube.com": {"All": [
								{"RemoveQueryParams": ["si", "feature", "pp", "app"]},
								{"If": {
									"condition": {"PartMap": {
										"part": {"PathSegment": 0},
										"map": {
											"shorts": {"FlagIsSet": "youtube-unshort"},
											"live"  : {"FlagIsSet": "youtube-unlive"},
											"embed" : {"FlagIsSet": "youtube-unembed"}
										}
									}},
									"mapper": {"All": [
										{"CopyPart": {"from": {"PathSegment": 1}, "to": {"QueryParam": "v"}}},
										{"SetPart": {"part": "Path", "value": "watch"}}
									]}
								}},
								{"If": {
									"condition": {"All": [
										{"FlagIsSet": "youtube-unplaylist"},
										{"PartIs": {"part": {"PathSegment": 0}, "value": "watch"}}
									]},
									"mapper": {"RemoveQueryParams": ["list"]}
								}},
								{"If": {
									"condition": {"Not": {"FlagIsSet": "youtube-keep-sub-confirmation"}},
									"mapper": {"RemoveQueryParams": ["sub_confirmation"]}
								}},
								{"If": {
									"condition": {"FlagIsSet": "invidious"},
									"mapper": {"SetPart": {"part": "Host", "value": {"Var": "invidious-host"}}}
								}}
							]}
						}
					}
				},
				{
					"PartMap": {
						"part": "DomainSuffix",
						"map": {
							"carrd.co": {"RemoveQueryParams": ["ref"]}
						}
					}
				},
				{
					"PartMap": {
						"part": "HostWithoutWWWDotPrefixAndFqdnPeriod",
						"map": {
							"aliexpress.com": {"If": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "item"}},
								"mapper": "RemoveQuery"
							}},
							"apps.apple.com": {"RemoveQueryParams": ["pt", "ct", "mt"]},
							"at.tumblr.com": {"All": [
								{"SetHost": "tumblr.com"},
								{"SetPart": {"part": {"PathSegment": 1}, "value": null}},
								"RemoveQuery"
							]},
							"bsky.app": {"Rules": [
								{"SharedCondition": {
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "profile"}},
									"rules": [
										{
											"condition": {"PartContains": {"part": {"PathSegment": 1}, "where": "End", "value": ".bsky"}},
											"mapper": {"ModifyPart": {"part": {"PathSegment": 1}, "modification": {"Append": ".social"}}}
										},
										{
											"condition": {"All": [
												{"Not": {"PartContains": {"part": {"PathSegment": 1}, "value": "."}}},
												{"Not": {"PartContains": {"part": {"PathSegment": 1}, "value": ":"}}}
											]},
											"mapper": {"ModifyPart": {"part": {"PathSegment": 1}, "modification": {"Append": ".bsky.social"}}}
										}
									]
								}},
								{
									"condition": {"FlagIsSet": "embed-compatibility"},
									"mapper": {"SetPart": {"part": "RegDomain", "value": "fxbsky.app"}}
								}
							]},
							"danbooru.donmai.us": {"If": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "posts"}},
								"mapper": {"RemoveQueryParams": ["q"]}
							}},
							"overview.mail.yahoo.com": "RemoveQuery",
							"play.google.com": {"RemoveQueryParams": ["referrer"]},
							"sale.alibaba.com": {"If": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "p"}},
								"mapper": {"RemoveQueryParams": ["wx_navbar_transparent", "path", "ncms_spm", "prefetchKey", "wx_xpage", "spm", "cardType"]}
							}},
							"support.google.com": {"RemoveQueryParams": ["ref_topic"]},
							"teepublic.com": {"SetPart": {"part": "Subdomain", "value": "www"}},
							"wlo.link": {"SetHost": "link.space"},
							"x.com": {"Rules": [
								{
									"condition": {"PathIs": "/i/flow/login"},
									"mapper": {"SetPart": {
										"part": "Whole",
										"value": {"Join": {"values": ["https://x.com", {"Part": {"QueryParam": "redirect_after_login"}}]}}
									}}
								},
								{
									"condition": {"Not": {"StringIs": {"left": {"Var": {"type": "TaskContext", "name": "twitter_handle"}}, "right": null}}},
									"mapper": {"ModifyPart": {
										"part": "Path",
										"modification": {"RegexReplace": {
											"regex": "i/web|i/user/\\d+",
											"replace": {"Var": {"type": "TaskContext", "name": "twitter_handle"}}
										}}
									}}
								},
								{
									"condition": {"Not": {"PartIs": {"part": {"PathSegment": 0}, "value": "intent"}}},
									"mapper": {"AllowQueryParams": ["q", "f", "pf", "lf"]}
								},
								{
									"condition": {"All": [
										{"FlagIsSet": "embed-compatibility"},
										{"PartIs": {"part": {"PathSegment": 1}, "value": "status"}}
									]},
									"mapper": {"SetPart": {"part": "Host", "value": {"Var": "twitter-embed-host"}}}
								},
								{
									"condition": {"FlagIsSet": "nitter"},
									"mapper": {"SetPart": {"part": "Host", "value": {"Var": "nitter-host"}}}
								}
							]}
						}
					}
				},
				{
					"PartRuleMap": {
						"part": "DomainMiddle",
						"map": {
							"amazon": {"Rules": [
								{
									"condition": {"PartContains": {"part": "Path", "value": "/dp/"}},
									"mapper": {"AllowQueryParams": ["aod"]}
								},
								{
									"PartMap": {
										"part": "Path",
										"map": {
											"/s": {"AllowQueryParams": ["k", "i", "rh", "bbn"]},
											"/gp/buyagain": {"AllowQueryParams": ["ats"]},
											"/gp/customer-reviews": "RemoveQuery",
											"/amazonprime": "RemoveQuery"
										}
									}
								},
								{"Mapper": {"RemoveQueryParamsMatching": {"Any": [
									{"IsOneOf": ["ref", "ref_", "ie", "_encoding", "content-id", "store_ref"]},
									{"Contains": {"value": "pd_", "where": "Start"}},
									{"Contains": {"value": "pf_", "where": "Start"}}
								]}}},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "product-reviews"}},
									"mapper": "RemoveQuery"
								},
								{
									"condition": {"Any": [
										{"PartContains": {"part": {"PathSegment": -1}, "where": "Start", "value": "ref="}},
										{"All": [
											{"PartContains": {"part": "Path", "value": "/dp/"}},
											{"Any": [
												{"PartContains": {"part": {"PathSegment": -1}, "where": "Anywhere", "value": "-"}},
												{"PartMatches" : {"part": {"PathSegment": -1}, "matcher": {"OnlyTheseChars": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "-"]}}}
											]}
										]}
									]},
									"mapper": {"SetPart": {"part": {"PathSegment": -1}, "value": null}}
								},
								{
									"condition": {"PartContains": {"part": "Path", "where": "Start", "value": "/gp/offer-listing/"}},
									"mapper": {"All": [
										{"SetPart": {"part": {"PathSegment": 0}, "value": "dp"}},
										{"SetPart": {"part": {"PathSegment": 1}, "value": null}},
										{"SetPart": {"part": {"QueryParam": "aod"}, "value": "1"}}
									]}
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 1}, "value": "dp"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 0}, "value": null}}
								},
								{
									"condition": {"PartIs": {"part": {"PathSegment": 3}, "value": "dp"}},
									"mapper": {"SetPart": {"part": {"PathSegment": 2}, "value": null}}
								}
							]},
							"bestbuy": {"Mapper": {"RemoveQueryParams": ["icmp"]}},
							"ebay": {
								"condition": {"PartIs": {"part": {"PathSegment": 0}, "value": "itm"}},
								"mapper": "RemoveQuery"
							},
							"google": {"Rules": [
								{"PartMap": {
									"part": "Path",
									"map": {
										"/search": {"AllowQueryParams": ["hl", "q", "tbm", "p", "udm", "filter", "vsrid", "vsdim", "vsint", "ins_vfs", "nfpr"]},
										"/setprefs": {"RemoveQueryParams": ["sa", "ved"]}
									}
								}},
								{"Mapper": {"All": [
									{"RemoveQueryParams": ["sca_esv", "usp"]},
									{"ModifyPart": {
										"part": "Fragment",
										"modification": {"RemoveQueryParamsMatching": {"IsOneOf": ["vhid", "vssid"]}}
									}}
								]}}
							]},
							"onion": {
								"condition": {"FlagIsSet": "tor2web2tor"},
								"mapper": {"SetPart": {"part": "DomainSuffix", "value": null}}
							},
							"pinterest": {
								"condition": {"Not": {"PartIs": {"part": {"PathSegment": 0}, "value": "search"}}},
								"mapper": "RemoveQuery"
							},
							"walmart": {
								"condition": {"PartIs": {"part": {"PathSegment": 1}, "value": "ip"}},
								"mapper": {"SetPart": {"part": {"PathSegment": 2}, "value": null}}
							}
						}
					}
				},



				{"Mapper": {"Common": "universal"}}
			]
		}}
	]
}
