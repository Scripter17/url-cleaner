{
	"docs": {
		"name": "The bundled cleaner",
		"description": [
			"The bundled cleaner; Meant for general purpose every day URL Cleaning.",
			"Licensed under the AGPL 3.0 or later."
		],
		"params": {
			"flags": {
				"keep_affiliate": "Don't remove affiliate info from affiliate links.",

				"bypass_vip"                : "Use [bypass.vip](https://bypass.vip) to expand various complicated/otherwise unsupported redirect sites.",
				"keep_http"                 : "Disable upgrading `http` URLs to `https`. See the `nh_keep_http` set if you only want to not upgrade specific hosts.",
				"no_network"                : "Don't make any network requests. Some redirect websites will still work because they include the destination in the URL.",
				"remove_unused_search_query": "Remove search queries from URLs that aren't search results (for example, posts).",
				"tor2web2tor"               : "Change `**.onion.**` hosts to `**.onion`.",

				"discord_unexternal"     : "Change `images-ext-*.discordapp.net` URLs to the original images they refer to.",
				"instagram_unprofilecard": "Change `instagram.com/username/profilecard` to `instagram.com/username`.",
				"tumblr_unsubdomain_blog": "Change `blog.tumblr.com` to `tumblr.com/blog`.",
				"youtube_unplaylist"     : "Remove the `list` query param from `youtube.com/watch` URLs.",
				"youtube_unshort"        : "Change `youtube.com/shorts/abc` to `youtube.com/watch?v=abc`."
			},
			"vars": {
				"client_type": {
					"desc": "Whether the client is a desktop or mobile device.",
					"required": false,
					"unset": "Keep URLs as-is.",
					"variants": {
						"desktop": "to change mobile URLs to desktop URLs.",
						"mobile" : "to change dekstop URLs to mobile URLs."
					}
				},

				"bypass_vip_api_key": {
					"desc": "The API key used for [bypass.vip](https://bypass.vip). Overrides the `URL_CLEANER_BYPASS_VIP_API_KEY` environment var.",
					"required": false
				},

				"bluesky_mode": {
					"desc": "Decides what host to replace Bluesky/Bluesky embed hosts with.",
					"required": false,
					"unset": "Set Bluesky and Bluesky embed hosts to `bsky.app`.",
					"variants": {
						"canon": "Always set it to `bsky.app`.",
						"embed": "Always set it to the `bluesky_embed_host` var."
					}
				},
				"bluesky_embed_host": {
					"desc": "The Bluesky embed host to use.",
					"required": true
				},

				"fandom_mode": {
					"desc": "Decides what to replace Fandom/Breezewiki URLs with.",
					"required": false,
					"unset": "Keep fandom URLs as-is and change Breezewiki URLs to the `breezewiki_host` var.",
					"variants": {
						"canon"     : "Set to fandom.",
						"breezewiki": "Set to the `breezewiki_host` var."
					}
				},
				"breezewiki_host": {
					"desc": "The Breezewiki host to use.",
					"required": true
				},

				"furaffinity_mode": {
					"desc": "Decides what host to replace reddit hosts with.",
					"required": false,
					"unset": "Keep as-is.",
					"variants": {
						"canon": "Set to `furaffinity.net`.",
						"sfw"  : "Set to `sfw.furaffinity.net`.",
						"nsfw" : "Set to `www.furaffinity.net`."
					}
				},

				"pixiv_mode": {
					"desc": "Decides what host to replace pixiv/pixiv embed hosts with.",
					"required": false,
					"unset": "Set pixiv and pixiv embed hosts to `www.pixiv.net`.",
					"variants": {
						"canon": "Always set it to `www.pixiv.net`.",
						"embed": "Always set it to the `pixiv_embed_host` var."
					}
				},
				"pixiv_embed_host": {
					"desc": "The pixiv embed host to use.",
					"required": true
				},

				"reddit_mode": {
					"desc": "Decides what host to replace reddit hosts with.",
					"required": false,
					"unset": "Keep as-is.",
					"variants": {
						"old": "Set to `old.reddit.com`.",
						"new": "Set to `www.reddit.com`."
					}
				},

				"twitter_mode": {
					"desc": "Decides what host to replace twitter/twitter embed/Nitter hosts with.",
					"required": false,
					"unset": "Set twitter and twitter embed hosts to `x.com` and Nitter hosts to the `nitter_host` var.",
					"variants": {
						"canon" : "Always set it to `x.com`.",
						"embed" : "Always set it to the `twitter_embed_host` var.",
						"nitter": "Always set it to the `nitter_host` var. Defaults to unset."
					}
				},
				"twitter_embed_host": {
					"desc": "The twitter embed host to use.",
					"required": true
				},
				"nitter_host": {
					"desc": "The Nitter host to use.",
					"required": true
				},

				"youtube_mode": {
					"desc": "Decides what host to replace youtube/Invidious hosts with.",
					"required": false,
					"unset": "Set youtube hosts to `www.youtube.com` and Invidious hosts to the `invidious_host` var.",
					"variants": {
						"canon"    : "Always set it to `www.youtube.com`.",
						"invidious": "Always set it to the `invidious_host` var."
					}
				},
				"invidious_host": {
					"desc": "The Invidious host to use.",
					"required": true
				}
			},
			"sets": {
				"utps": "Universal tracking parameters to remove from all URLs without explicit allowances. See the `utp_prefixes` for a list of prefixes only used for universal tracking parameters.",

				"nh_keep_http": "The `NormalizedHost`s to not upgrade from `http` to `https`."
			},
			"lists": {
				"utp_prefixes": "Prefixes only used for universal tracking parameters. See the `utps` set for specific query params to always remove."
			},
			"partitionings": {
				"nh_categories": "Categories of similar websites with shared cleaning methods.",

				"rd_www_subdomain": "The `RegDomain`s to ensure/remove `www` `Subdomain`s.",
				"dm_www_subdomain": "The `DomainMiddle`s to ensure/remove `www` `Subdomain`s.",

				"dm_expand_mode": "How to handle redirect `DomainMiddle`s.",
				"nh_expand_mode": "How to handle redirect `NormalizedHost`s.",
				"rd_expand_mode": "How to handle redirect `RegDomain`s,",

				"mobilizer": "Which part at which value makes a `NormalizedHost`/`RegDomain` a mobile URL."
			}
		},
		"task_context": {
			"vars": {
				"unmangle_mode": "The unmangle mode to use.",
				"site": "The name of the website used in the contact_info unmangle_mode.",
				"text": "The text of the link used in the contact_info unmangle_mode."
			}
		},
		"environment_vars": {
			"URL_CLEANER_BYPASS_VIP_API_KEY": "The API key used for [bypass.vip](https://bypass.vip). Can be overridden with the `bypass_vip_api_key` var."
		}
	},
	"params": {
		"vars": {
			"bluesky_embed_host": "fxbsky.app",
			"pixiv_embed_host"  : "phixiv.net",
			"twitter_embed_host": "fixupx.com",

			"breezewiki_host": "breezewiki.com",
			"invidious_host" : "yewtu.be",
			"nitter_host"    : "nitter.net"
		},
		"sets": {
			"nh_keep_http": ["cos.lv", "localhost", "orteil.dashnet.org", "smartytags.com"],

			"utps": [
				"", "ActionID", "AffiliateID", "NaPm", "OutLink", "Tcsack", "__hsfp", "__hssc", "__hstc", "__io_lv", "__s", "_bdadid", "_bhlid", "_branch_match_id",
				"_branch_referrer", "_clde", "_cldee", "_ga", "_gl", "_hsenc", "_hsmi", "_io_session_id", "_kx", "_ope", "_openstat", "_sgm_action", "_sgm_campaign",
				"_sgm_pinned", "_sgm_source", "_sgm_term", "_zucks_suid", "a8", "a_aid", "acm", "action_object_map", "action_ref_map", "action_type_map", "adc_publisher",
				"adc_token", "adcref", "adfrom", "adj_campaign", "adj_creative", "adj_label", "adj_t", "adjust_adgroup", "adjust_campaign", "adjust_creative", "adjust_referrer",
				"adjust_tracker", "adjust_tracker_limit", "admitad_uid", "adobe_mc_ref", "adobe_mc_sdid", "adsterra_clid", "adsterra_placement_id", "af_ad", "af_adset",
				"af_click_lookback", "af_force_deeplink", "af_xp", "afid", "aiad_clid", "aid", "asc_campaign", "asc_refurl", "asc_source", "asgtbndr", "at_campaign",
				"at_campaign_type", "at_creation", "at_emailtype", "at_link", "at_link_id", "at_link_origin", "at_link_type", "at_medium", "at_ptr_name", "at_recipient_id",
				"at_recipient_list", "at_send_date", "awc", "bbeml", "bemobdata", "beyond_uzcvid", "beyond_uzmcvid", "bid", "bsft_aaid", "bsft_clkid", "bsft_eid", "bsft_ek",
				"bsft_mid", "bsft_uid", "btag", "campid", "cid", "cjdata", "cjevent", "clickTrackInfo", "clid", "cm_cr", "cm_me", "cmpid", "cooper", "cstrackid", "cuid", "cvid",
				"cvrid", "cvrpid", "cvrsid", "cx_click", "cx_recsOrder", "cx_recsWidget", "cxt", "dclid", "dmmref", "dpg_campaign", "dpg_content", "dpg_medium", "dpg_source",
				"dt_dapp", "ebisAdID", "ebisOther1", "ebisOther2", "ebisOther3", "ebisOther4", "ebisOther5", "embeds_referring_euri", "embeds_referring_origin", "emcs_t",
				"ems_dl", "epi", "erid", "et_rid", "external_click_id", "famad_xuid", "fb_action_ids", "fb_action_types", "fb_comment_id", "fb_ref", "fb_source", "fbadid",
				"fbclid", "frm", "from", "from_country", "gad_source", "gbraid", "gci", "gclid", "gclsrc", "gps_adid", "guccounter", "guce_referrer", "guce_referrer_sig",
				"hsCtaTracking", "hsa_acc", "hsa_ad", "hsa_cam", "hsa_grp", "hsa_kw", "hsa_la", "hsa_mt", "hsa_net", "hsa_ol", "hsa_src", "hsa_tgt", "hsa_ver", "i3_ord",
				"i3_ref", "ici", "iclid", "igshid", "int_campaign", "int_content", "int_medium", "int_source", "int_term", "ir_adid", "ir_campaignid", "ir_partnerid",
				"irclickid", "irgwc", "is_retargeting", "itm_campaign", "itm_content", "itm_medium", "itm_source", "itm_term", "jmtyClId", "l-id", "laz_trackid", "line_uid",
				"loclid", "maf", "mallCode", "mbid", "mc_cid", "mc_eid", "mindbox-click-id", "mindbox-message-key", "mkt_tok", "mkttid", "ml_subscriber", "ml_subscriber_hash",
				"msclkid", "mt_adset", "mt_campaign", "mt_click_id", "mt_creative", "mt_link_id", "mt_medium", "mt_network", "mt_sub1", "mt_sub2", "mt_sub3", "mt_sub4",
				"mt_sub5", "mtm_campaign", "mtm_cid", "mtm_content", "mtm_group", "mtm_keyword", "mtm_medium", "mtm_placement", "mtm_source", "naver", "nb_expid_meta",
				"nb_placement", "nclid", "newsstand", "ns_campaign", "ns_fee", "ns_linkname", "ns_mchannel", "ns_source", "nv", "nx_source", "ocid", "oft_c", "oft_ck", "oft_d",
				"oft_id", "oft_ids", "oft_k", "oft_lk", "oft_sk", "oly_anon_id", "oly_enc_id", "oprtrack", "oref", "personaclick_input_query", "personaclick_search_query", "pg",
				"phfp", "phone_code", "pk_campaign", "pk_cid", "pk_medium", "pk_source", "pk_vid", "plink", "promotionId", "publish_id", "rb_clickid", "recom", "recommended_by",
				"recommended_code", "ref", "ref_src", "ref_type", "ref_url", "refsrc", "rtkcid", "s-id", "s_cid", "sc", "sc_customer", "sc_eh", "sc_uid", "scid", "scm",
				"search_domain", "search_source", "sms_click", "sms_source", "sms_uph", "source_ve_path", "sp_atk", "spm", "spot_im_redirect_source", "src_module",
				"src_tab_page_id", "srsltid", "ss_email_id", "sscid", "stm_medium", "stm_source", "sub_rt", "tag3", "tduid", "trackcode", "trafficFrom", "ttclid", "tw_medium",
				"tw_profile_id", "tw_source", "twclid", "unicorn_click_id", "union_lens", "urrad", "user_email_address", "usqp", "utm_ad", "utm_adgroup", "utm_adset",
				"utm_affiliate", "utm_brand", "utm_campaign", "utm_campaign_name", "utm_campaignid", "utm_channel", "utm_cid", "utm_content", "utm_creative", "utm_emcid",
				"utm_emmid", "utm_id", "utm_id_", "utm_journey_id", "utm_keyword", "utm_medium", "utm_name", "utm_place", "utm_product", "utm_pubreferrer", "utm_reader",
				"utm_referrer", "utm_serial", "utm_servlet", "utm_session", "utm_siteid", "utm_social", "utm_social-type", "utm_source", "utm_source_code",
				"utm_source_platform", "utm_supplier", "utm_swu", "utm_tag", "utm_term", "utm_umguk", "utm_userid", "utm_viz_id", "uzcid", "vc_lpp", "vero_conv", "vero_id",
				"vgo_ee", "vsm_cid", "vsm_pid", "vsm_type", "wbraid", "wgexpiry", "wgu", "wickedid", "wt_mc", "xmt", "xptdk", "xtor", "yclid", "ymclid", "ymid", "ysclid"
			]
		},
		"lists": {
			"utp_prefixes": [
				"__s", "_utm", "at_custom", "cm_mmc", "mkt_tok", "utm_"
			]
		},
		"partitionings": {
			"nh_categories": {
				"bluesky": ["bsky.app"],
				"bluesky_embed_hosts": ["fxbsky.app"],

				"deviantart_embed_hosts": ["fxdeviantart.com"],

				"pixiv": ["pixiv.net"],
				"pixiv_embed_hosts": ["phixiv.net"],

				"twitter": ["x.com", "twitter.com"],
				"twitter_embed_hosts": ["fixupx.com", "fixvx.com", "fxtwitter.com", "girlcockx.com", "stupidpenisx.com", "vxtwitter.com", "yiffx.com"],
				"nitter": [
					"bird.habedieeh.re", "nitter.holo-mix.com", "nitter.io.lol", "nitter.kavin.rocks", "nitter.kylrth.com", "nitter.lucabased.xyz", "nitter.lunar.icu",
					"nitter.moomoo.me", "nitter.net", "nitter.poast.org", "nitter.privacydev.net", "nitter.priv.loki", "nitter.qwik.space", "nitter.rawbit.ninja",
					"nitter.tiekoetter.com", "twitit.gq", "xcancel.com", "xnaas.github.io",

					"4kzgzonccxuv4ctforjqx565jgd4bocgnzsy3dg4fmdf3ye2iciq.b32.i2p", "axd6uavsstsrvstva4mzlzh4ct76rc6zdug3nxdgeitrzczhzf4q.b32.i2p",
					"gseczlzmiv23p5vhsktyd7whquq2uy3c5fgkmdohh453qp3daoua.b32.i2p", "pjsfs4ukb6prmfx3qx3a5ef2cpcupkvcrxdh72kqn2rxc2cw4nka.b32.i2p",
					"pxrhfmieeeqdu5pi4duscycsxqefqphaxgvvrvdtc3ckqn2mcora.b32.i2p", "tm4rwkeysv3zz3q5yacyr4rlmca2c4etkdobfvuqzt6vsfsu4weq.b32.i2p",
					"u6ikd6zndl3c4dsdq4mmujpntgeevdk5qzkfb57r4tnfeccrn2qa.b32.i2p", "vernzdedoxuflrrxc4vbatbkpjh4k22ecgiqgimdiif62onhagva.b32.i2p",

					        "26oq3gioiwcmfojub37nz5gzbkdiqp7fue5kvye7d4txv4ny6fb4wwid.onion",        "4g47cxugkohbweao2x66nnxxfoe3k7gdfzxej537nhdbwr522sbjxeqd.onion",
					        "6g7w5lt6qcidh6vtue64udzld2mjnvxlpgddvn34qywxafxdv6a3w5id.onion",        "aaaaaxx74hbzeibageieowryhsqvimbdiitfkfe47tvgawkwkjh3coqd.onion",
					"twitter.ap3jtgssd7qn4vfoa62gi2ijddoblslbeuw5dan3xt7myvqpura5i4qd.onion", "nitter.catsarchywsyuss6jdxlypsw5dc7owd5u5tr6bujxb7o6xw2hipqehyd.onion",
					"twitter.cepyxplublbyw2f4axy4pyztfbxmf63lrt2c7uwv6wl4iixz53czload.onion",        "ckzuw5misyahmg7j5t5xwwuj3bwy62jfolxyux4brfflramzsvvd3syd.onion",
					 "nitter.coffee2m3bjsrrqqycx6ghkxrnejl2q6nl7pjw2j4clchjj6uk5zozad.onion", "nitter.daturab6drmkhyeia4ch5gvfc2f3wgo6bhjrv3pz6n7kxmvoznlkq4yd.onion",
					        "ec5nvbycpfa5k6ro77blxgkyrzbkv7uy6r5cngcbkadtjj2733nm3uyd.onion",        "erpnncl5nhyji3c32dcfmztujtl3xaddqb457jsbkulq24zqq7ifdgad.onion",
					 "nitter.esmail5pdn24shtvieloeedh7ehz3nrwcdivnfhfcedl7gf4kwddhkqd.onion",        "fbdi323aj3t6hdx4jtkuwxrnafzskquciowu2yu3jizfssaq35aow6ad.onion",
					 "nitter.g4c3eya4clenolymqbpgwz3q3tawoxw56yhzk4vugqrl6dtu3ejvhjid.onion",   "bird.habeehrhadazsw3izbrbilqajalfyqqln54mrja3iwpqxgcuxnus7eid.onion",
					        "i23nv6w3juvzlw32xzoxcqzktegd4i4fu3nmnc2ewv4ggiu4ledwklad.onion",        "ibsboeui2im5o7dxnik3s5yghufumgy5abevtij5nbizequfpu4qi4ad.onion",
					        "iwgu3cv7ywf3gssed5iqtavmrlszgsxazkmwwnt4h2kdait75thdyrqd.onion",        "jebqj47jgxleaiosfcxfibx2xdahjettuydlxbg64azd4khsxv6kawid.onion",
					 "nitter.l4qlywnpwqsluw65ts7md3khrivpirse744un3x7mlskqauz5pyuzgqd.onion", "nitter.micohauwkjbyw5meacrb4ipicwvwg4xtzl7y7viv53kig2mdcsvwkyyd.onion",
					        "nitraeju2mipeziu2wtcrqsxg7h62v5y4eqgwi75uprynkj74gevvuqd.onion",        "nitter7bryz3jv7e3uekphigvmoyoem4al3fynerxkj22dmoxoq553qd.onion",
					        "npf37k3mtzwxreiw52ccs5ay4e6qt2fkcs2ndieurdyn2cuzzsfyfvid.onion",        "nttr2iupbb6fazdpr2rgbooon2tzbbsvvkagkgkwohhodjzj43stxhad.onion",
					 "nitter.pjsfkvpxlinjamtawaksbnnaqs2fc2mtvmozrzckxh7f3kis6yea25ad.onion", "nitter.privpw3tndpkw6pnp3g727zfgfdzbu3k6a7chv226s3xymv2p4eiuqyd.onion",
					"twitter.prnoid54e44a4bduq5due64jkk7wcnkxcp5kv3juncm7veptjcqudgyd.onion",        "qwikxx2erhx6qrymued6ox2qkf2yeogjwypqvzoif4fqkljixasr6oid.onion",
					        "r2eqimhkvxboaltbdsectoo3hkf476pyemsdykclexzajbfx5v6ojlyd.onion",      "n.sneed4fmhevap3ci4xhf4wgkf72lwk275lcgomnfgwniwmqvaxyluuid.onion",
					 "nitter.v6vgyqpa7yefkorazmg5d5fimstmvm2vtbirt6676mt7qmllrcnwycqd.onion",     "nt.vernccvbvyi5qhfzyqengccj7lkove6bjot2xhh5kajhwvidqafczrad.onion",
					        "vfaomgh4jxphpbdfizkm5gbtjahmei234giqj4facbwhrfjtcldauqad.onion",        "wiio4sgs4247brk7hj6qck2jxnvldwfdbguigc5ivpxrsegnliyfvuqd.onion"
				],

				"youtube": ["youtube.com", "m.youtube.com"],
				"youtu_be": ["youtu.be"],
				"invidious": [
					"inv.nadeko.net", "inv.nadekonw7plitnjuawu6ytjsl7jlglk2t6pyq6eftptmiv3dvqndwvyd.onion", "invidious.nerdvpn.de", "yewtu.be",
					"zzlsbhhfvwg3oh36tcvx4r7n6jrw7zibvyvfxqlodcwn3mfrvzuq.b32.i2p"
				],

				"breezewiki": [
					"antifandom.com", "breeze.hostux.net", "breeze.mint.lgbt", "breeze.nohost.network", "breeze.whateveritworks.org", "breezewiki.catsarch.com", "breezewiki.com",
					"breezewiki.frontendfriendly.xyz", "breezewiki.hyperreal.coffee", "breezewiki.nadeko.net",
					"breezewiki.nadekonfkhwlxwwk4ycbvq42zvcjmvo5iakl4tajojjwxd4a5dcetuyd.onion", "breezewiki.pussthecat.org", "breezewiki.woodland.cafe", "bw.artemislena.eu",
					"bw.hamstro.dev", "bw.projectsegfau.lt", "bw.skunky7dhv7nohsoalpwe3sxfz3fbkad7r3wk632riye25vqm3meqead.onion", "nerd.whatever.social", "z.opnxng.com"
				],

				"alibaba": ["1688.com", "alibaba.com", "aliexpress.com", "m.1688.com", "sale.alibaba.com"],
				"discord_external": [
					"images-ext-1.discordapp.net", "images-ext-2.discordapp.net", "images-ext-3.discordapp.net", "images-ext-4.discordapp.net", "images-ext-5.discordapp.net"
				],
				"disney": ["disney.com", "marvel.com"],
				"furaffinity": ["furaffinity.net", "sfw.furaffinity.net"],
				"instagram": ["instagram.com", "threads.com", "threads.net"],
				"lmgtfy": ["letmegoogleforyou.com", "letmegooglethat.com", "lmgt.org", "lmgtfy.app", "lmgtfy.click", "lmgtfy.com"]
			},



			"rd_www_subdomain": {
				"ensure": [
					"1688.com", "9news.com.au", "abc.net.au", "adjust.com", "afp.com", "agorapulse.com", "alibaba.com", "animaapp.com", "anrdoezrs.net", "apple.com", "bbc.com",
					"behance.net", "bell.ca", "bizrate.com", "boot.dev", "boycat.io", "browserstack.com", "cbc.ca", "cbsnews.com", "change.org", "cnbc.com", "cnn.com",
					"crunchyroll.com", "deviantart.com", "disney.com", "dw.com", "elsevier.com", "emjcd.com", "entripy.com", "etsy.com", "euronews.com", "facebook.com",
					"fandom.com", "fiverr.com", "forbes.com", "france24.com", "ft.com", "furaffinity.net", "go.com", "go2cloud.org", "gofundme.com", "goodreads.com", "google.com",
					"habedieeh.re", "howl.link", "hp.com", "iana.org", "icloud.com", "kff.org", "leaffilter.ca", "lego.com", "lenovo.com", "linkr.it", "loblaws.ca", "marvel.com",
					"mediafire.com", "microsoft.com", "minds.com", "mozilla.org", "mydealz.de", "nasa.gov", "nature.com", "ndw.jp", "nyc.gov", "nytimes.com", "obo.de", "ojrq.net",
					"onet.pl", "paps.jp", "patreon.com", "pbs.org", "pcoptimum.ca", "phoronix.com", "pinterest.com", "pixiv.net", "pxf.io", "razer.com", "reuters.com",
					"sfchronicle.com", "shopyourlikes.com", "snapchat.com", "sng.link", "sub2get.com", "techpowerup.com", "teepublic.com", "temu.com", "theguardian.com",
					"threads.com", "tiekoetter.com", "tiktok.com", "tmz.com", "torproject.org", "tribler.org", "tumblr.com", "twitch.tv", "undp.org", "unlock.com", "walmart.com",
					"whitehouse.gov", "wsj.com", "xiaohongshu.com", "xp-pen.com", "yahoo.com", "youtube.com"
				],
				"remove": [
					"2kgam.es", "ab.co", "abcnews.link", "acer.com", "adfoc.us", "adguardteam.github.io", "admiregirls-byme.com", "adobe.ly", "aje.io", "all-fans.online",
					"allegro.pl", "amn.st", "amzn.to", "antifandom.com", "apexpartner.app", "artemislena.eu", "b23.tv", "badgirlsdrop.com", "bambulab.com", "bbc.in", "beacons.ai",
					"bfy.tw", "bgfn.sh", "bitly.com", "bityl.co", "blizz.ly", "blockclubchi.co", "bloom.bg", "boost.ink", "boosty.to", "breezewiki.com", "bsky.app", "buff.ly",
					"bugzil.la", "buymeacoffee.com", "bzfd.it", "carleton.ca", "carrd.co", "cash.app", "catsarch.com", "cbsn.ws", "cemendemons.com", "cfl.re", "chn.ge", "chng.it",
					"chtbl.com", "click.fan", "cnb.cx", "cnn.it", "cp2077.ly", "crnch.it", "cutt.ly", "db.tt", "dcdr.me", "depravityweb.co", "dotomi.com", "duckduckgo.com",
					"econ.st", "eepurl.com", "etsy.me", "fal.cn", "fansly.com", "fansmega.com", "fdip.fr", "firefox.dev", "forms.gle", "free-leaks.com", "frontendfriendly.xyz",
					"fxbsky.app", "g.co", "gelbooru.com", "girlcockx.com", "glo.bo", "goldmega.online", "goo.gle", "goo.su", "goodsmile.link", "got.cr", "gumroad.com",
					"hamstro.dev", "hmstr.fr", "hotstars-leaks.com", "href.li", "hubs.la", "hulu.tv", "hyperreal.coffee", "ift.tt", "inkbunny.net", "intel.ly", "interc.pt",
					"iwe.one", "j.mp", "ja.ma", "jbgm.es", "k00.fr", "kavin.rocks", "kck.st", "kre.pe", "kylrth.com", "l8r.it", "leakutopia.site", "linkr.bio", "linkr.com",
					"links-loot.com", "linksloot.net", "linktr.ee", "lmddgtfy.net", "lmgtfy.app", "lmgtfy.com", "lnkd.in", "loot-link.com", "loot-links.com", "lootdest.com",
					"lootdest.info", "lootdest.org", "lootlink.org", "lootlinks.co", "lunar.icu", "mboost.me", "mega-guy.com", "megadropz.com", "megadumpz.com", "melscience.com",
					"metafy.gg", "mint.lgbt", "mol.im", "mply.io", "msft.it", "msi.gm", "mzl.la", "n.pr", "nas.cr", "nbc4i.co", "newsociety0.co", "nine.social", "ninten.do",
					"nitter.net", "nohost.network", "nvda.ws", "nyti.ms", "ofpacksmega.com", "only-fun.xyz", "onlymega.co", "opnxng.com", "ow.ly", "paster.so", "pawoo.net",
					"people.com", "peoplem.ag", "perfht.ml", "pin.it", "pixiv.me", "play.st", "pnp-drops.me", "poast.org", "politi.co", "premiumstashdrop.com", "prn.to",
					"propub.li", "pussthecat.org", "py.pl", "qr.io", "qr.link", "qr1.be", "qrco.de", "qrcodes.pro", "rareofhub.com", "rawbit.ninja", "rdbl.co", "rdcu.be", "redd.it",
					"reurl.cc", "reut.rs", "s.team", "s76.co", "sbuxjoin.com", "scim.ag", "secretpack-links.com", "sendgrid.net", "shor.tf", "sketchfab.com", "socialwolvez.com",
					"sou42.co", "sponsr.is", "spoti.fi", "spotify.link", "sqex.to", "square.link", "st.news", "stackoverflow.com", "steamcommunity.com", "stupidpenisx.com",
					"sub2unlock.com", "sub2unlock.io", "sub4unlock.io", "subscribestar.adult", "substack.com", "t.co", "t.ly", "tavernleaks.com", "tee.pub", "than.gs", "thangs.com",
					"theatln.tc", "thecut.io", "theonion.com", "throne.com", "tinylf.com", "tinyurl.com", "tmblr.co", "toyhou.se", "tpu.me", "tr.ee", "umblr.com", "unf.pa",
					"uni.cf", "ur0.link", "urldefense.com", "visitlink.me", "w.wiki", "whatever.social", "wlgrn.com", "wlo.link", "wn.nr", "wp.me", "x.com", "x.gd", "xcancel.com",
					"xhslink.com", "xnaas.github.io", "xprmpacks.com", "yewtu.be", "yiffx.com", "zionism.observer"
				]
			},
			"dm_www_subdomain": {
				"ensure": ["amazon", "google"],
				"remove": []
			},



			"dm_expand_mode": {
				"redirect": [],
				"special": ["google"]
			},
			"nh_expand_mode": {
				"bypass_vip": [
					"adfoc.us", "admiregirls-byme.com", "all-fans.online", "badgirlsdrop.com", "bit.do", "booo.st", "boost.ink", "bst.gg", "cemendemons.com", "depravityweb.co",
					"fansmega.com", "free-leaks.com", "goldmega.online", "hotstars-leaks.com", "leakutopia.site", "links-loot.com", "linksloot.net", "linkvertise.com",
					"loot-link.com", "loot-links.com", "lootdest.com", "lootdest.info", "lootdest.org", "lootlink.org", "lootlinks.co", "mboost.me", "mega-guy.com", "megadropz.com",
					"megadumpz.com", "newsociety0.co", "ofpacksmega.com", "only-fun.xyz", "onlymega.co", "paster.so", "pnp-drops.me", "premiumstashdrop.com", "rareofhub.com",
					"rekonise.com", "secret-links.com", "secretpack-links.com", "socialwolvez.com", "st.news", "sub2get.com", "sub2unlock.com", "sub2unlock.io", "sub2unlock.net",
					"sub4unlock.io", "tavernleaks.com", "thepremium.online", "tinylink.onl", "tomxcontent.com", "unlock.com", "unlocknow.net", "v.gd", "wc.wtf", "work.ink",
					"xprmpacks.com"
				],
				"redirect": [
					"2kgam.es", "4.nbcla.com", "7ny.tv", "a.aliexpress.com", "a.co", "ab.co", "abc7.la", "abc7ne.ws", "abcnews.link", "adobe.ly", "aje.io", "amn.st", "amzn.asia",
					"amzn.eu", "amzn.ew", "amzn.to", "anrdoezrs.net", "api.link.agorapulse.com", "apple.co", "b23.tv", "bbc.in", "bgfn.sh", "bit.ly", "bityl.co", "blizz.ly",
					"blockclubchi.co", "bloom.bg", "boxd.it", "buff.ly", "bzfd.it", "cbr.sh", "cbsn.ws", "cfl.re", "chatter.one", "chn.ge", "chng.it", "clckhl.co",
					"click.email.pcoptimum.ca", "click.fan", "click.linksynergy.com", "cnb.cx", "cons.lv", "cp2077.ly", "crnch.it", "cutt.ly", "db.tt", "dcdr.me", "diplo.de",
					"dis.gd", "dlvr.it", "econ.st", "eepurl.com", "etsy.me", "fal.cn", "fanga.me", "fb.me", "fdip.fr", "flip.it", "flyac.ca", "forms.gle", "g.co", "glo.bo",
					"go.forbes.com", "go.france24.com", "go.icj-cij.org", "go.microsoft.com", "go.nasa.gov", "go.nature.com", "go.undp.org", "gofund.me", "goo.gl", "goo.gle",
					"goo.su", "goodsmile.link", "got.cr", "gum.co", "hmstr.fr", "hov.to", "howl.link", "hubs.la", "hulu.tv", "ift.tt", "ind.pd", "intel.ly", "interc.pt", "iwe.one",
					"j.mp", "ja.ma", "jbgm.es", "k00.fr", "kck.st", "kre.pe", "l.euronews.com", "l.ledauphine.com", "l.leparisien.fr", "l8r.it", "line.ee", "link.animaapp.com",
					"link.chtbl.com", "link.space", "linkr.it", "loom.ly", "lpc.ca", "m.sesame.org", "mavelyinfluencer.com", "mol.im", "mondly.app", "mply.io", "msft.it", "msi.gm",
					"mzl.la", "n.opn.tl", "n.pr", "nbc4i.co", "nine.social", "ninten.do", "ntdo.co.uk", "nvda.ws", "ny.ti", "nyti.ms", "nyto.ms", "obo.de", "ojrq.net", "on.fb.me",
					"on.forbes.com", "on.ft.com", "on.kff.org", "on.nyc.gov", "on.wsj.com", "onl.bz", "onl.la", "onl.sc", "onl.tw", "operagx.gg", "opr.as", "orlo.uk", "peoplem.ag",
					"perfht.ml", "pin.it", "pixiv.me", "pl.go-ga.me", "play.st", "politi.co", "prn.to", "propub.li", "pulse.ly", "py.pl", "qr.paps.jp", "qrco.de", "rb.gy",
					"rblx.co", "rdbl.co", "rdcu.be", "rebrand.ly", "redirect.global.commerce-connector.com", "reut.rs", "rog.gg", "rzr.to", "s.click.aliexpress.com",
					"s.goodsmile.link", "s.spr.ly", "s.team", "s76.co", "sbuxjoin.com", "scanqr.to", "scim.ag", "share.firefox.dev", "share.temu.com", "shor.tf", "shorturl.at",
					"shrsl.com", "sonic.frack.deals", "sou42.co", "sponsr.is", "spoti.fi", "spr.ly", "sqex.to", "square.link", "sta.sh", "t.co", "t.ly", "theatln.tc", "thecut.io",
					"thef.pub", "thrn.co", "tiny.cc", "tinylf.com", "tmblr.co", "to.pbs.org", "tps.to", "tr.ee", "u.jd.com", "unes.co", "unf.pa", "uni.cf", "uniceflink.org",
					"ur0.link", "visitlink.me", "vm.tiktok.com", "vt.tiktok.com", "w.wiki", "wccf.tech", "wlgrn.com", "wn.nr", "wp.me", "wwdc.io", "x.alibaba.com", "x.gd", "xbx.ly",
					"xhslink.com", "zurl.co"
				],
				"sometimes_redirect": [
					"abc.net.au", "allmylinks.com", "apexpartner.app", "api.pinterest.com", "bitly.com", "facebook.com", "gumroad.com", "hisubway.com", "mydealz.de",
					"old.reddit.com", "ow.ly", "pawoo.net", "qr.io", "qudsnen.co", "reddit.com", "sketchfab.com", "snapchat.com", "t2m.io", "teepublic.com", "thangs.com"
				],
				"special": [
					"1link.club", "adguardteam.github.io", "affiliate.xp-pen.com", "allegro.pl", "api.linkr.bio", "api.linkr.com", "app.adjust.com", "awin1.com", "bfy.tw",
					"bugzil.la", "buymeacoff.ee", "cj.dotomi.com", "click.notification.elsevier.com", "cnn.it", "cos.lv", "deviantart.com", "drinkctrl.com", "duckduckgo.com",
					"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion", "e.emailalerts.cnn.com", "e.newsletters.cnn.com", "emjcd.com", "fans.ly", "fansly.com",
					"fiverr.com", "global.temu.com", "go.bsky.app", "go.shopyourlikes.com", "go.skimresources.com", "goodreads.com", "goto.walmart.com", "gprivate.com",
					"gznmedia.go2cloud.org", "href.li", "instagr.am", "is.gd", "l.instagram.com", "l.mlive.com", "l.threads.com", "lego.com", "li.cnn.com", "link.blissy.com",
					"link.sfchronicle.com", "linkprotect.cudasvc.com", "lmddgtfy.net", "lmgtfy2.com", "lnk.bio", "lnkd.in", "mel.sc", "mfy.gg", "nas.cr", "nyer.cm", "nyp.st",
					"o93x.net", "on.msnbc.com", "on.theatln.tc", "open-api.tiktok.com", "open.substack.com", "out.reddit.com", "p.liadm.com", "pixiv.net", "preview.tinyurl.com",
					"proxy.notsobot.com", "qr.link", "qr1.be", "qrcc.me", "qrcodes.pro", "qrtiger.com", "rd.bizrate.com", "rd.goodreads.com", "redirect.viglink.com", "reurl.cc",
					"ro.blox.com", "shareasale-analytics.com", "shareasale.com", "skfb.ly", "smarturl.it", "smartyt.ag", "smartytags.com", "spotify.link", "ss3.shipstation.com",
					"star.aliexpress.com", "steamcommunity.com", "subscribestar.adult", "substack.com", "t.umblr.com", "tee.pub", "than.gs", "thr.cm", "tinyurl.com", "tmz.me",
					"toyhou.se", "tpu.me", "twpf.jp", "u.afp.com", "urldefense.com", "v.redd.it", "wlo.link", "youtube.com"
				]
			},
			"rd_expand_mode": {
				"redirect": ["a9yw.net", "goo.gl", "o93x.net", "page.link", "pusle.ly", "pxf.io", "visitlink.me", "trib.al"],
				"sometimes_redirect": ["cmail20.com", "sendgrid.net"],
				"special": [
					"adj.st", "alibaba.com", "app.link", "awstrack.me", "carleton.ca", "digidip.net", "dw.com", "fb.watch", "list-manage.com", "lnk.to", "nbcla.com", "onelink.me",
					"pulse.ly", "smartadserver.com", "sng.link", "vk.com"
				]
			},



			"mobilizer": {
				"sd_m"              : ["facebook.com", "twitch.tv", "vk.com", "youtube.com"],
				"sd_mobile"         : ["abc.net.au"],
				"if_sd_sds_0_m"     : ["bulbagarden.net"],
				"if_sd_sds_0_mobile": [],
				"if_sd_sds_1_m"     : ["wikipedia.org"],
				"if_sd_sds_1_mobile": [],
				"qp_m_1"            : [],
				"qp_mobile_1"       : [],
				"ps_0_mobile"       : [],
				"ps_1_mobile"       : ["drive.google.com"],

				"special_1688": ["detail.1688.com", "m.1688.com"]
			}
		}
	},
	"functions": {
		"actions": {
			"expand_redirect": {"If": {
				"if": {"FlagIsNotSet": "no_network"},
				"then": {"All": [
					{"Function": "universal"},
					{"Cache": {
						"subject": "redirect",
						"action": {"Join": {"HttpRequest": {
							"request": {
								"const_headers": {"CallArg": "headers"}
							},
							"response": {"Require3xx": {"Header": "Location"}}
						}}}
					}}
				]}
			}},



			"extract_from_body": {"If": {
				"if": {"FlagIsNotSet": "no_network"},
				"then": {"All": [
					{"Function": "universal"},
					{"SetWhole": {"Cache": {
						"subject": "redirect",
						"key": {"Part": "Whole"},
						"value": {"HttpRequest": {
							"request": {
								"const_headers": {"CallArg": "headers"}
							},
							"response": {"ExtractFromBody": {
								"extractors": [
									{
										"prefix": {"CallArg": "prefix"},
										"suffix": {"CallArg": "suffix"},
										"strip_prefix": {"CallArg": "strip_prefix"},
										"strip_suffix": {"CallArg": "strip_suffix"},
										"parser": {"CallArg": "parser"}
									}
								]
							}}
						}}
					}}}
				]}
			}},



			"universal": {"All": [
				{"If": {
					"if": {"All": [
						{"SchemeIs": "http"},
						{"FlagIsNotSet": "keep_http"},
						{"Not": "HostIsIp"},
						{"Not": {"NormalizedHostIsInSet": "nh_keep_http"}}
					]},
					"then": {"SetScheme": "https"}
				}},
				{"HandleParams": {
					"fragment": true,
					"names": "utps",
					"prefixes": "utp_prefixes",
					"except_names": {"PartMap": {
						"part": "NormalizedHost",
						"map": {
							"adj.st"                     : ["adj_t"],
							"carrefourpl.snrpage.com"    : ["utm_source"],
							"em.dynamicyield.com"        : ["cuid"],
							"forbes.ru"                  : ["erid"],
							"gaugau.futabanet.jp"        : ["utm_content"],
							"glavnoe.life"               : ["utm_campaign", "utm_content", "utm_medium", "utm_referrer", "utm_source", "utm_term"],
							"greenbuildingadvisor.com"   : ["oly_enc_id"],
							"insurancexblog.blogspot.com": ["utm_source"],
							"kommersant.ru"              : ["erid"],
							"lifehacker.ru"              : ["erid"],
							"mmcref.pl"                  : ["utm_medium"],
							"mootoon.co.kr"              : ["cuid"],
							"passport.jlcpcb.com"        : ["from"],
							"rd.bizrate.com"             : ["utm_campaign", "utm_medium"],
							"reddit.app.link"            : ["utm_content"],
							"redirects.tradedoubler.com" : ["utm_campaign", "utm_content"],
							"tradedoubler.com"           : ["tduid"],
							"video-shoper.ru"            : ["utm_source"],
							"yandex.go.link"             : ["adj_t"],

							"a8cv.amiami.jp"             : {"If": {"if": {"PathStartsWith": "/click"}, "then": ["a8"]}},
							"apimeishi.meituan.com"      : {"If": {"if": {"PathStartsWith": "/meishi/poi"}, "then": ["utm_medium"]}},
							"booklive.jp"                : {"If": {"if": {"PathStartsWith": "/vcentry/landing"}, "then": ["vc_lpp"]}},
							"converti.se"                : {"If": {"if": {"PathStartsWith": "/click"}, "then": ["wgexpiry"]}},
							"portal-portm.meituan.com"   : {"If": {"if": {"PathStartsWith": "/horn"}, "then": ["utm_medium"]}},
							"sendgb.com"                 : {"If": {"if": {"PathStartsWith": "/upload"}, "then": ["utm_source"]}},
							"t.send.vt.edu"              : {"If": {"if": {"PathStartsWith": "/r"}, "then": ["utm_campaign", "utm_medium", "utm_source"]}},
							"transfernow.net"            : {"If": {"if": {"Any": [{"PathSegmentIs": {"index": 1, "value": "cld"}}, {"PathStartsWith": "/d/start"}]}, "then": ["utm_source"]}},
							"uploadnow.io"               : {"If": {"if": {"PathSegmentIs": {"index": 1, "value": "share"}}, "then": ["utm_source"]}}
						}
					}}
				}},
				{"StringMap": {
					"value": {"Var": "client_type"},
					"map": {
						"desktop": {"FirstMatchingPartPartitioning": {
							"parts": ["NormalizedHost", "RegDomain"],
							"partitioning": "mobilizer",
							"map": {
								"sd_m": {"If": {
									"if"  : {"SubdomainIs" : "m"},
									"then": {"SetSubdomain": null}
								}},
								"sd_mobile": {"If": {
									"if"  : {"SubdomainIs" : "mobile"},
									"then": {"SetSubdomain": null}
								}},
								"if_sd_sds_0_m": {"If": {
									"if"  : {"SubdomainSegmentIs" : {"index": 0, "value": "m"}},
									"then": {"SetSubdomainSegment": {"index": 0, "value": null}}
								}},
								"if_sd_sds_0_mobile": {"If": {
									"if"  : {"SubdomainSegmentIs" : {"index": 0, "value": "mobile"}},
									"then": {"SetSubdomainSegment": {"index": 0, "value": null}}
								}},
								"if_sd_sds_1_m": {"If": {
									"if"  : {"SubdomainSegmentIs" : {"index": 1, "value": "m"}},
									"then": {"SetSubdomainSegment": {"index": 1, "value": null}}
								}},
								"if_sd_sds_1_mobile": {"If": {
									"if"  : {"SubdomainSegmentIs" : {"index": 1, "value": "mobile"}},
									"then": {"SetSubdomainSegment": {"index": 1, "value": null}}
								}},
								"qp_m_1"     : {"SetQueryParam": {"param": "m"     , "value": null}},
								"qp_mobile_1": {"SetQueryParam": {"param": "mobile", "value": null}},
								"ps_0_mobile": {"If": {
									"if"  : {"PathSegmentIs" : {"index": 0, "value": "mobile"}},
									"then": {"SetPathSegment": {"index": 0, "value": null}}
								}},
								"ps_1_mobile": {"If": {
									"if"  : {"PathSegmentIs" : {"index": 1, "value": "mobile"}},
									"then": {"SetPathSegment": {"index": 1, "value": null}}
								}},

								"special_1688": {"SetSubdomain": "detail"}
							}
						}},
						"mobile": {"FirstMatchingPartPartitioning": {
							"parts": ["NormalizedHost", "RegDomain"],
							"partitioning": "mobilizer",
							"map": {
								"sd_m": {"If": {
									"if": {"SubdomainIsOneOf": ["www", null]},
									"then": {"SetSubdomain": "m"}
								}},
								"sd_mobile": {"If": {
									"if": {"SubdomainIsOneOf": ["www", null]},
									"then": {"SetSubdomain": "mobile"}
								}},
								"if_sd_sds_0_m": {"If": {
									"if": {"Not": {"Any": [
										{"SubdomainIs": null},
										{"SubdomainSegmentIs": {"index": 0, "value": "m"}}
									]}},
									"then": {"InsertSubdomainSegment": {"index": 0, "value": "m"}}
								}},
								"if_sd_sds_0_mobile": {"If": {
									"if": {"Not": {"Any": [
										{"SubdomainIs": null},
										{"SubdomainSegmentIs": {"index": 0, "value": "mobile"}}
									]}},
									"then": {"InsertSubdomainSegment": {"index": 0, "value": "mobile"}}
								}},
								"if_sd_sds_1_m": {"If": {
									"if": {"Not": {"Any": [
										{"SubdomainIs": null},
										{"SubdomainSegmentIs": {"index": 1, "value": "m"}}
									]}},
									"then": {"InsertSubdomainSegment": {"index": 1, "value": "m"}}
								}},
								"if_sd_sds_1_mobile": {"If": {
									"if": {"Not": {"Any": [
										{"SubdomainIs": null},
										{"SubdomainSegmentIs": {"index": 1, "value": "mobile"}}
									]}},
									"then": {"InsertSubdomainSegment": {"index": 1, "value": "mobile"}}
								}},
								"qp_m_1": {"If": {
									"if"  : {"QueryParamIs" : {"param": "m", "value": null}},
									"then": {"SetQueryParam": {"param": "m", "value": "1"}}
								}},
								"qp_mobile_1": {"If": {
									"if"  : {"QueryParamIs" : {"param": "mobile", "value": null}},
									"then": {"SetQueryParam": {"param": "mobile", "value": "1"}}
								}},
								"ps_0_mobile": {"If": {
									"if": {"Not": {"PathSegmentIs": {"index": 0, "value": "mobile"}}},
									"then": {"InsertPathSegment"  : {"index": 0, "value": "mobile"}}
								}},
								"ps_1_mobile": {"If": {
									"if": {"Not": {"PathSegmentIs": {"index": 1, "value": "mobile"}}},
									"then": {"InsertPathSegment"  : {"index": 1, "value": "mobile"}}
								}},

								"special_1688": {"SetSubdomain": "m"}
							}
						}}
					}
				}},
				{"PartPartitioning": {
					"part": "RegDomain",
					"partitioning": "rd_www_subdomain",
					"map": {
						"ensure": {"If": {
							"if": {"SubdomainIs": null},
							"then": {"SetSubdomain": "www"}
						}},
						"remove": {"If": {
							"if": {"SubdomainIs": "www"},
							"then": {"SetSubdomain": null}
						}}
					},
					"else": {"PartPartitioning": {
						"part": "DomainMiddle",
						"partitioning": "dm_www_subdomain",
						"map": {
							"ensure": {"If": {
								"if": {"SubdomainIs": null},
								"then": {"SetSubdomain": "www"}
							}},
							"remove": {"If": {
								"if": {"SubdomainIs": "www"},
								"then": {"SetSubdomain": null}
							}}
						}
					}}
				}},
				{"IgnoreError": "RemoveFqdnPeriod"}
			]},



			"url_from_query_param_or_query": {"FirstNotError": [
				{"GetUrlFromQueryParam": {"Var": {"CallArg": "param"}}},
				{"CopyPart": {
					"from": "Query",
					"to": "Whole"
				}},
				{"SetWhole": {"Modified": {
					"value": {"Part": "Query"},
					"modification": "PercentDecode"
				}}}
			]},



			"twitter": {"All": [
				{"If": {
					"if": {"PathIs": "/i/flow/login"},
					"then": {"Join": {"Part": {"QueryParam": "redirect_after_login"}}}
				}},
				{"PartMap": {
					"part": {"PathSegment": 0},
					"map": {
						"intent": {"AllowQueryParams": ["screen_name", "tweet_id", "text"]},
						"search": {"AllowQueryParams": ["q", "f", "pf", "lf"]}
					},
					"else": "RemoveQuery"
				}},
				{"StringMap": {
					"value": {"Var": "twitter_mode"},
					"map": {
						"canon" : {"SetHost": "x.com"},
						"embed" : {"SetHost": {"Var": "twitter_embed_host"}},
						"nitter": {"SetHost": {"Var": "nitter_host"}}
					},
					"if_none": {"SetHost": {"CallArg": "default_host"}}
				}}
			]},



			"pixiv": {"StringMap": {
				"value": {"Var": "pixiv_mode"},
				"map": {
					"canon": {"SetHost": "www.pixiv.net"},
					"embed": {"SetHost": {"Var": "pixiv_embed_host"}}
				},
				"if_none": {"SetHost": {"CallArg": "default_host"}}
			}},



			"bluesky": {"All": [
				{"If": {
					"if": {"PathStartsWith": "/profile/"},
					"then": {"All": [
						{"If": {
							"if": {"PathSegmentMatches": {
								"index": 1,
								"matcher": {"All": [
									{"Not": {"EndsWith": ".bsky.social"}},
									{"Modified": {
										"modification": {"TryElse": {
											"try": {"StripBefore": "."},
											"else": {"Set": ""}
										}},
										"matcher": {"IsPrefixOf": ".bsky.social"}
									}}
								]}
							}},
							"then": {"ModifyPathSegment": {
								"index": 1,
								"modification": {"All": [
									{"KeepMaybeBefore": "."},
									{"Append": ".bsky.social"}
								]}
							}}
						}}
					]}
				}},
				{"StringMap": {
					"value": {"Var": "bluesky_mode"},
					"map": {
						"embed": {"SetHost": {"Var": "bluesky_embed_host"}}
					},
					"if_none": {"SetHost": "bsky.app"}
				}}
			]},



			"youtube": {"All": [
				{"RemoveQueryParams": ["si", "feature", "pp", "app", "ab_channel", "pbjreload"]},
				{"If": {
					"if": {"PartMap": {
						"part": {"PathSegment": 0},
						"map": {
							"shorts": {"FlagIsSet": "youtube_unshort"},
							"live"  : "Always",
							"embed" : "Always"
						}
					}},
					"then": {"All": [
						{"CopyPart": {
							"from": {"PathSegment": 1},
							"to": {"QueryParam": "v"}
						}},
						{"SetPath": "/watch"}
					]}
				}},
				{"If": {
					"if": {"All": [
						{"FlagIsSet": "youtube_unplaylist"},
						{"PathStartsWith": "/watch"}
					]},
					"then": {"RemoveQueryParam": "list"}
				}},
				{"StringMap": {
					"value": {"Var": "youtube_mode"},
					"map": {
						"canon"    : {"SetHost": "www.youtube.com"},
						"invidious": {"SetHost": {"Var": "invidious_host"}}
					},
					"if_none": {"SetHost": {"CallArg": "default_host"}}
				}}
			]}
		}
	},
	"action": {"If": {
		"if": {"SchemeIsOneOf": ["http", "https"]},
		"then": {"All": [
			{"StringPartitioning": {
				"value": {"JobSourceHostPart": "NormalizedHost"},
				"partitioning": "nh_categories",
				"map": {
					"alibaba": {"RemoveQueryParams": ["spf", "file"]},
					"furaffinity": {"If": {
						"if": {"StringIs": {
							"left": {"Var": {"TaskContext": "unmangle_mode"}},
							"right": "contact_info"
						}},
						"then": {"SetWhole": {"Modified": {
							"value": {"Var": {"TaskContext": "text"}},
							"modification": {"Map": {
								"value": {"Var": {"TaskContext": "site"}},
								"map": {
									"website"       : "None",
									"ao3"           : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)archiveofourown\\.org)?/?(?:users/)?@?([^/]+)"  , "replace": "https://archiveofourown.org/users/$1"}},
									"bluesky"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?bsky\\.app/profile)?/?@?([^/]+)$"              , "replace": "https://bsky.app/profile/$1"         }},
									"cara"          : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?cara\\.app)?/?@?([^/]+)/?$"                    , "replace": "https://cara.app/$1"                 }},
									"dealer's den"  : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?thedealersden\\.com/store)?/?@?([^/]+)$"       , "replace": "https://thedealersden.com/store/$1"  }},
									"deviantart"    : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?(?:([^.]+)\\.)?(?:deviantart\\.com)?/?@?([^/]*)$" , "replace": "https://deviantart.com/$1$2"         }},
									"etsy"          : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?etsy\\.com/shop)?/?@?([^/]+)$"                 , "replace": "https://etsy.com/shop/$1"            }},
									"facebook"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?facebook\\.com)?/?@?([^/]+)$"                  , "replace": "https://facebook.com/$1"             }},
									"fanfiction.net": {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?fanfiction\\.net)?/?(?:u?/)?@?([^/]+)/?$"      , "replace": "https://fanfiction.net/u/$1"         }},
									"furry network" : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?furrynetwork\\.com)?/?@?([^/]+)$"              , "replace": "https://furrynetwork.com/$1"         }},
									"inkbunny"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?inkbunny\\.net)?/?([^/]+)$"                    , "replace": "https://inkbunny.net/$1"             }},
									"itaku"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?itaku\\.ee/profile)?/?([^/]+)$"                , "replace": "https://itaku.ee/profile/$1"         }},
									"ko-fi"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?ko-fi\\.com)?/?([^/]+)$"                       , "replace": "https://ko-fi.com/$1"                }},
									"patreon"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?patreon\\.com)?/?([^/]+)$"                     , "replace": "https://patreon.com/$1"              }},
									"picarto"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?picarto\\.tv)?/?@?([^/]+)$"                    , "replace": "https://picarto.tv/$1"               }},
									"piczel"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?piczel\\.tv/watch)?/?@?([^/]+)$"               , "replace": "https://piczel.tv/watch/$1"          }},
									"pixiv"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?pixiv\\.net/(?:[a-z-]+/)?users)?/?@?([^/]+)/?$", "replace": "https://pixiv.net/en/users/$1"       }},
									"reddit"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?reddit\\.com)?/?(?:u?/)?@?([^/]+)/?$"          , "replace": "https://reddit.com/u/$1"             }},
									"sofurry"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?([^.]+)(?:\\.sofurry\\.com/?)?$"                  , "replace": "https://$1.sofurry.com"              }},
									"steam"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?steamcommunity\\.com/id)?/?@?([^/]+)$"         , "replace": "https://steamcommunity.com/id/$1"    }},
									"telegram"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?(?:t\\.me)?/?@?([^/]+)$"                          , "replace": "https://t.me/$1"                     }},
									"tiktok"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?tiktok.com)?/?@?([^/]+)/?$"                    , "replace": "https://tiktok.com/@$1"              }},
									"toyhou.se"     : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?toyhou\\.se)?/?@?([^/]+)/?$"                   , "replace": "https://toyhou.se/$1"                }},
									"transfur"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?transfur\\.com)?/?(?:(?:users)?/)?@?([^/]+)$"  , "replace": "https://transfur.com/users/$1"       }},
									"tumblr"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?(?:([^.]+)\\.)?(?:tumblr\\.com)?/?@?([^/]*)$"     , "replace": "https://$1$2.tumblr.com"             }},
									"twitch"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?twitch\\.tv)?/?@?([^/]+)$"                     , "replace": "https://twitch.tv/$1"                }},
									"twitter"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com)?/?@?([^/]+)$"             , "replace": "https://x.com/$1"                    }},
									"wattpad"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)wattpad\\.com/users)?/?@?([^/]+)/?$"            , "replace": "https://wattpad.com/user/$1"         }},
									"weasyl"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?weasyl\\.com)?/?@?~?([^/]+)$"                  , "replace": "https://weasyl.com/~$1"              }},
									"x"             : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com)?/?@?([^/]+)$"             , "replace": "https://x.com/$1"                    }},
									"youtube"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?youtube\\.com)?/?@?([^/]+)$"                   , "replace": "https://youtube.com/$1"              }}
								},
								"else": {"Error": "Unknown Furaffinity contact info field."}
							}}
						}}}
					}}
				}
			}},



			{"Repeat": {
				"actions": [
					{"PartPartitioning": {
						"part": "DomainMiddle",
						"partitioning": "dm_expand_mode",
						"map": {
							"redirect": {"Function": "expand_redirect"},
							"special": {"PartMap": {
								"part": "DomainMiddle",
								"map": {
									"google": {"If": {
										"if": {"PathIs": "/url"},
										"then": {"TryElse": {
											"try": {"GetUrlFromQueryParam": "q"},
											"else": {"GetUrlFromQueryParam": "url"}
										}}
									}}
								}
							}}
						}
					}},



					{"PartPartitioning": {
						"part": "RegDomain",
						"partitioning": "rd_expand_mode",
						"map": {
							"redirect": {"Function": "expand_redirect"},
							"sometimes_redirect": {"If": {
								"if": {"PartMap": {
									"part": "RegDomain",
									"map": {
										"cmail20.com": {"All": [
											{"PathStartsWith": "/t/"},
											{"Any": [
												{"PathContains": {"at": {"EndsAt": 6}, "value": "-l-"}},
												{"PathContains": {"at": {"EndsAt": 6}, "value": "-i-"}}
											]}
										]},
										"sendgrid.net": {"PathIs": "/ls/click"}
									}
								}},
								"then": {"Function": "expand_redirect"}
							}},
							"special": {"PartMap": {
								"part": "RegDomain",
								"map": {
									"adj.st": {"TryElse": {
										"try": {"GetUrlFromQueryParam": "adj_fallback"},
										"else": {"Function": "expand_redirect"}
									}},
									"alibaba.com": {"If": {
										"if": {"PathStartsWith": "/x/"},
										"then": {"All": [
											"RemoveQuery",
											{"Function": "expand_redirect"}
										]}
									}},
									"app.link": {"All": [
										{"AllowQueryParam": "$fallback_url"},
										{"ModifySubdomain": {"StripMaybeSuffix": "-alternate"}},
										{"If": {
											"if": {"Not": {"PathStartsWith": "/e/"}},
											"then": {"InsertPathSegment": {"index": 0, "value": "e"}}
										}},
										{"If": {
											"if": {"FlagIsNotSet": "no_network"},
											"then": {"All": [
												{"Function": "universal"},
												{"SetWhole": {"Cache": {
													"subject": "redirect",
													"key": {"Part": "Whole"},
													"value": {"HttpRequest": {
														"request": {
															"const_headers": {"Literal": {
																"map": {
																	"user-agent": "curl/8.12.1"
																}
															}}
														},
														"response": {"NoneTo": {
															"handler": {"Header": "location"},
															"if_none": {"ExtractFromBody": {
																"extractors": [
																	{
																		"prefix": "<meta property=\"og:url\"",
																		"suffix": ">",
																		"parser": {"GetHtmlAttribute": "content"}
																	},
																	{
																		"prefix": "<a class=\"secondary-action\"",
																		"suffix": ">",
																		"parser": {"GetHtmlAttribute": "href"}
																	},
																	{
																		"prefix": "<div class=\"form-get-the-app\">",
																		"suffix": "",
																		"parser": {"Set": {"Part": "Whole"}}
																	}
																]
															}}
														}}
													}}}
												}},
												{"RemoveQueryParam": "$web_only"}
											]}
										}}
									]},
									"awstrack.me": {"SetWhole": {"Modified": {
										"value": {"Part": {"PathSegment": 1}},
										"modification": "PercentDecode"
									}}},
									"carleton.ca": {"If": {
										"if": {"QueryParamIs": {"param": "action", "value": "redirect"}},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"digidip.net": {"If": {
										"if": {"PathStartsWith": "/visit"},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"dw.com": {"If": {
										"if": {"PathStartsWith": "/p/"},
										"then": {"All": [
											{"SetHost": "www.dw.com"},
											{"Function": "expand_redirect"}
										]}
									}},
									"fb.watch": {"All": [
										{"RemoveQueryParams": ["mibextid", "ref", "share_url"]},
										{"Function": "expand_redirect"}
									]},
									"list-manage.com": {"If": {
										"if": {"PathStartsWith": "/track/click"},
										"then": {"All": [
											{"Function": "expand_redirect"},
											{"RemoveQueryParam": "mc_cid"}
										]}
									}},
									"lnk.to": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "\"originalUrl\":",
												"suffix": "\",\""
											},
											"flags": ["strip_prefix"],
											"string_modifications": {
												"parser": {"TryElse": {
													"try": "GetJsStringLiteralPrefix",
													"else": {"Set": {"Part": "Whole"}}
												}}
											}
										}
									}},
									"nbcla.com": {"SetHost": "trib.al"},
									"onelink.me": {"All": [
										"RemoveQuery",
										{"Function": "expand_redirect"}
									]},
									"pulse.ly": {"If": {
										"if": {"FlagIsNotSet": "no_network"},
										"then": {"All": [
											{"SetWhole": {"Join": {"values": [
												"https://api.link.agorapulse.com/redirect",
												{"Part": "Path"}
											]}}},
											{"Function": "expand_redirect"}
										]}
									}},
									"smartadserver.com": {"If": {
										"if": {"PathIs": "/click"},
										"then": {"GetUrlFromQueryParam": "go"}
									}},
									"sng.link": {"All": [
										"RemoveQuery",
										{"SetPathSegment": {"index": 0, "value": "a"}},
										{"Function": {
											"name": "expand_redirect",
											"args": {
												"actions": {
													"after": {"RemoveQueryParam": "referrer"}
												}
											}
										}}
									]},
									"twitch.com": {"All": [
										{"SetHost": "www.twitch.tv"},
										{"RemoveQueryParam": "desktop-redirect"}
									]},
									"vk.com": {"If": {
										"if": {"PathIs": "/away.php"},
										"then": {"GetUrlFromQueryParam": "to"}
									}}
								},
								"else": {"Error": "Unhandled rd_expand_mode::special element."}
							}}
						}
					}},



					{"PartPartitioning": {
						"part": "NormalizedHost",
						"partitioning": "nh_expand_mode",
						"map": {
							"bypass_vip": {"If": {
								"if": {"All": [
									{"FlagIsSet": "bypass_vip"},
									{"FlagIsNotSet": "no_network"}
								]},
								"then": {"All": [
									{"Function": "universal"},
									{"Cache": {
										"subject": "redirect",
										"action": {"SetWhole": {"Modified": {
											"value": {"HttpRequest": {
												"request": {
													"url": {"Join": {
														"values": [
															"https://api.bypass.vip/premium/bypass?url=",
															{"Modified": {"value": {"Part": "Whole"}, "modification": "PercentEncode"}}
														]
													}},
													"dynamic_headers": {
														"x-api-key": {"NoneTo": {
															"value": {"Var": "bypass_vip_api_key"},
															"if_none": {"Var": {"Env": "URL_CLEANER_BYPASS_VIP_API_KEY"}}
														}}
													}
												}
											}},
											"modification": {"JsonPointer": "/result"}
										}}}
									}}
								]}
							}},
							"redirect": {"Function": "expand_redirect"},
							"sometimes_redirect": {"If": {
								"if": {"PartMap": {
									"part": "NormalizedHost",
									"map": {
										"abc.net.au"              : {"All": [{"PathStartsWith": "/news/"}, {"PathSegmentMatches": {"index": 1, "matcher": "AllAsciiDigit"}}]},
										"allmylinks.com"          : {"PathIs": "/link/out"},
										"apexpartner.app"         : {"PathStartsWith": "/redirect/"},
										"api.pinterest.com"       : {"PathStartsWith": "/url_shortener/"},
										"bitly.com"               : {"Not": {"Any": [{"PathIs": "/"}, {"HasPathSegment": 1}]}},
										"facebook.com"            : {"PathStartsWith": "/share/"},
										"gumroad.com"             : {"PathStartsWith": "/u/"},
										"hisubway.com"            : {"HasQueryParam": "link"},
										"mydealz.de"              : {"PathStartsWith": "/visit/"},
										"old.reddit.com"          : {"PathContains": {"value": "/s/", "at": {"After": 0}}},
										"ow.ly"                   : {"Not": {"PathStartsWith": "/i/"}},
										"pawoo.net"               : {"PathStartsWith": "/oauth_authentications/"},
										"qr.io"                   : {"PathStartsWith": "/r/"},
										"qudsnen.co"              : {"HasQueryParam": "p"},
										"reddit.com"              : {"PathContains": {"value": "/s/", "at": {"After": 0}}},
										"shareasale-analytics.com": {"PathEndsWith": ".cfm"},
										"shareasale.com"          : {"PathEndsWith": ".cfm"},
										"sketchfab.com"           : {"PathStartsWith": "/s/"},
										"snapchat.com"            : {"PathStartsWith": "/t/"},
										"t2m.io"                  : {"Not": {"PathIs": "/"}},
										"teepublic.com"           : {"PathStartsWith": "/lic/"},
										"thangs.com"              : {"PathStartsWith": "/m/"}
									},
									"else": {"Error": "Unhandled nh_expand_mode::sometimes_redirect element."}
								}},
								"then": {"Function": "expand_redirect"}
							}},
							"special": {"PartMap": {
								"part": "NormalizedHost",
								"map": {
									"1link.club": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "<a id=\"download\"",
												"suffix": ">"
											},
											"string_modifications": {
												"parser": {"GetHtmlAttribute": "href"}
											}
										}
									}},
									"adguardteam.github.io": {"If": {
										"if": {"PathIs": "/AnonymousRedirect/redirect.html"},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"affiliate.xp-pen.com": {"All": [
										{"If": {
											"if": {"FlagIsNotSet": "keep_affiliate"},
											"then": {"RemoveQueryParam": "a_aid"}
										}},
										{"Function": "expand_redirect"}
									]},
									"allegro.pl": {"If": {
										"if": {"PathStartsWith": "/affiliate"},
										"then": {"GetUrlFromQueryParam": "redirect_url"}
									}},
									"api.linkr.bio": {"If": {
										"if": {"PathIs": "/callbacks/go"},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"api.linkr.com": {"If": {
										"if": {"PathIs": "/callbacks/go"},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"app.adjust.com": {"All": [
										{"If": {
											"if": {"FlagIsNotSet": "keep_affiliate"},
											"then": "RemoveQuery"
										}},
										{"Function": "expand_redirect"}
									]},
									"awin1.com": {"If": {
										"if": {"PathIs": "/cread.php"},
										"then": {"TryElse": {
											"try": {"GetUrlFromQueryParam": "ued"},
											"else": {"Function": {
												"name": "expand_redirect",
												"args": {
													"actions": {
														"after": {"HandleParams": {
															"names": ["source", "awc", "sv1", "sv_campaign_id"],
															"prefixes": ["awin_"]
														}}
													}
												}
											}}
										}}
									}},
									"bfy.tw": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "<a href=",
												"suffix": ">"
											},
											"string_modifications": {
												"parser": {"GetHtmlAttribute": "href"}
											}
										}
									}},
									"bugzil.la": {"All": [
										{"SetHost": "bugzilla.mozilla.org"},
										{"If": {
											"if": {"Not": {"PathIs": "/"}},
											"then": {"All": [
												{"If": {
													"if"  : {"PathSegmentMatches": {"index": 0, "matcher": "IsNumber"}},
													"then": {"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "id"}}},
													"else": {"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "quicksearch"}}}
												}},
												{"SetPath": "/show_bug.cgi"}
											]}
										}}
									]},
									"buymeacoff.ee": {"SetHost": "buymeacoffee.com"},
									"cash.me": {"SetHost": "cash.app"},
									"cj.dotomi.com": {"All": [
										"RemoveQuery",
										{"Function": "expand_redirect"}
									]},
									"cnn.it": {"All": [
										"RemoveQuery",
										{"Function": "expand_redirect"}
									]},
									"click.notification.elsevier.com": {"If": {
										"if": {"PathStartsWith": "/CL0/"},
										"then": {"SetWhole": {"Modified": {
											"value": {"Part": "Path"},
											"modification": {"All": [
												{"KeepSegmentRange": {"split": "/", "start": 2, "end": -3}},
												"PercentDecode"
											]}
										}}}
									}},
									"cos.lv": {"All": [
										{"SetScheme": "http"},
										{"Function": "expand_redirect"}
									]},
									"deviantart.com": {"If": {
										"if": {"PathIs": "/users/outgoing"},
										"then": {"Function": {
											"name": "url_from_query_param_or_query",
											"args": {"vars": {"param": "url"}}
										}}
									}},
									"drinkctrl.com": {"If": {
										"if": {"All": [
											{"PathStartsWith": "/discount/"},
											{"FlagIsNotSet": "keep_affiliate"}
										]},
										"then": {"All": [
											{"SetPath": {"NoneTo": {
												"value": {"Part": {"QueryParam": "redirect"}},
												"if_none": "/"
											}}},
											"RemoveQuery"
										]}
									}},
									"duckduckgo.com": {"If": {
										"if": {"PathIs": "/l/"},
										"then": {"GetUrlFromQueryParam": "uddg"}
									}},
									"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"If": {
										"if": {"PathIs": "/l/"},
										"then": {"GetUrlFromQueryParam": "uddg"}
									}},
									"e.emailalerts.cnn.com": {"SetWhole": {"Modified": {
										"value": {"Part": "Query"},
										"modification": {"IfMatches": {
											"matcher": {"HasSegment": {"split": "/", "index": 8}},
											"then": {"KeepModifiedSegments": {
												"split": "/",
												"indices": [2, 5],
												"modification": {"All": [
													{"RemoveChar": 0},
													"Base64Decode"
												]},
												"join": ""
											}},
											"else": {"All": [
												{"KeepSegment": {"split": "/", "index": 2}},
												{"RemoveChar": 0},
												"Base64Decode"
											]}
										}}
									}}},
									"e.newsletters.cnn.com": {"SetWhole": {"Modified": {
										"value": {"Part": "Query"},
										"modification": {"IfMatches": {
											"matcher": {"HasSegment": {"split": "/", "index": 8}},
											"then": {"KeepModifiedSegments": {
												"split": "/",
												"indices": [2, 5],
												"modification": {"All": [
													{"RemoveChar": 0},
													"Base64Decode"
												]},
												"join": ""
											}},
											"else": {"All": [
												{"KeepSegment": {"split": "/", "index": 2}},
												{"RemoveChar": 0},
												"Base64Decode"
											]}
										}}
									}}},
									"emjcd.com": {"All": [
										"RemoveQuery",
										{"Function": "expand_redirect"}
									]},
									"fans.ly": {"SetHost": "fansly.com"},
									"fansly.com": {"If": {
										"if": {"PathIs": "/redirect/external"},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"fiverr.com": {"All": [
										{"If": {
											"if": {"PathStartsWith": "/share/"},
											"then": {"SetPathSegment": {"index": 0, "value": "s"}}
										}},
										{"If": {
											"if": {"Any": [
												{"PathSegmentIs": {"index": 0, "value": "s"}},
												{"PartMatches": {"part": "PathSegments", "matcher": "IsNumber"}}
											]},
											"then": {"Function": {
												"name": "expand_redirect",
												"args": {
													"maps": {
														"headers": {
															"map": {
																"user-agent": "Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0"
															}
														}
													}
												}
											}}
										}}
									]},
									"global.temu.com": {"SetHost": "www.temu.com"},
									"go.bsky.app": {"TryElse": {
										"try": {"GetUrlFromQueryParam": "u"},
										"else": {"Function": "expand_redirect"}
									}},
									"go.shopyourlikes.com": {"If": {
										"if": {"PathSegmentIs": {
											"index": 0,
											"value": "pi"
										}},
										"then": {"All": [
											{"AllowQueryParam": "afId"},
											{"Function": "expand_redirect"}
										]}
									}},
									"go.skimresources.com": {"GetUrlFromQueryParam": "url"},
									"goto.walmart.com": {"TryElse": {
										"try": {"GetUrlFromQueryParam": "u"},
										"else": {"All": [
											"RemoveQuery",
											{"Function": "expand_redirect"}
										]}
									}},
									"gznmedia.go2cloud.org": {"All": [
										{"AllowQueryParams": ["campaign_id", "aff_id", "aff_sub2"]},
										{"Function": {
											"name": "expand_redirect",
											"args": {
												"maps": {
													"headers": {
														"map": {
															"user-agent": "FireFox"
														}
													}
												}
											}
										}}
									]},
									"goodreads.com": {"If": {
										"if": {"PathIs": "/gp/r.html"},
										"then": {"GetUrlFromQueryParam": "U"}
									}},
									"gprivate.com": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "window.location = ",
												"suffix": "</script>"
											},
											"flags": ["strip_prefix"],
											"string_modifications": {
												"parser": "GetJsStringLiteralPrefix"
											}
										}
									}},
									"href.li": {"SetWhole": {"Part": {"PositionRange": {
										"start": "BeforeQuery",
										"end": "AfterFragment"
									}}}},
									"instagr.am": {"SetHost": "www.instagram.com"},
									"is.gd": {"If": {
										"if": {"All": [
											{"FlagIsNotSet": "no_network"},
											{"Not": {"PathIs": "/"}},
											{"Not": {"PathEndsWith": ".php"}}
										]},
										"then": {"All": [
											{"Function": "universal"},
											{"SetWhole": {"Cache": {
												"subject": "redirect",
												"key": {"Part": "Whole"},
												"value": {"HttpRequest": {
													"response": {"NoneTo": {
														"handler": {"Header": "location"},
														"if_none": {"ExtractFromBody": {
															"extractors": [
																{
																	"prefix": "<br />",
																	"suffix": "</",
																	"strip_prefix": true,
																	"strip_suffix": true,
																	"parser": {"TryElse": {
																		"try": {"GetHtmlAttribute": "href"},
																		"else": "UnescapeHtml"
																	}}
																}
															]
														}}
													}}
												}}
											}}}
										]}
									}},
									"l.instagram.com": {"GetUrlFromQueryParam": "u"},
									"l.mlive.com": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "<meta http-equiv=\"refresh\"",
												"suffix": ">"
											},
											"string_modifications": {
												"parser": {"All": [
													{"GetHtmlAttribute": "content"},
													{"KeepAfter": "url="}
												]}
											}
										}
									}},
									"l.threads.com": {"GetUrlFromQueryParam": "u"},
									"lego.com": {"If": {
										"if": {"All": [
											{"PathIs": "/rakuten"},
											{"StringIs": {
												"left": {"ExtractPart": {
													"value": {"Part": {"QueryParam": "url"}},
													"part": "RegDomain"
												}},
												"right": "lego.com"
											}}
										]},
										"then": {"GetUrlFromQueryParam": "url"}
									}},
									"li.cnn.com": {"All": [
										{"AllowQueryParams": ["s", "e", "p"]},
										{"SetQueryParam": {
											"param": "bt_ts",
											"value": "1000"
										}},
										{"Function": "expand_redirect"}
									]},
									"link.blissy.com": {"SetHost": "gznmedia.go2cloud.org"},
									"link.sfchronicle.com": {"All": [
										{"If": {
											"if": {"PathSegmentIsOneOf": {
												"index": 0,
												"values": ["external", "click"]
											}},
											"then": {"SetWhole": {"Modified": {
												"value": {"Part": {"PathSegment": 2}},
												"modification": {"Base64Decode": {
													"alphabet": "UrlSafe"
												}}
											}}}
										}},
										{"RemoveQueryParams": ["sid", "ss", "st_rid"]}
									]},
									"linkprotect.cudasvc.com": {"GetUrlFromQueryParam": "a"},
									"lmddgtfy.net": {"SetHost": "duckduckgo.com"},
									"lmgtfy2.com": {"If": {
										"if": {"Not": {"QueryParamIs": {"param": "q", "value": null}}},
										"then": {"SetWhole": {"Modified": {
											"value": {"Map": {
												"value": {"Part": {"QueryParam": "s"}},
												"map": {
													"g": {"Map": {
														"value": {"Part": {"QueryParam": "t"}},
														"map": {
															"w" : "https://google.com/search?q=",
															"i" : "https://google.com/search?tbm=isch&q=",
															"v" : "https://google.com/search?tbm=vid&q=",
															"m" : "https://google.com/maps?q=",
															"n" : "https://google.com/search?tbm=nws&q=",
															"s" : "https://google.com/search?tbm=shop&q=",
															"b" : "https://google.com/search?tbm=bks&q=",
															"f" : "https://google.com/finance?q=",
															"sc": "https://scholar.google.com/scholar?q="
														},
														"if_none": "https://www.google.com/search?q="
													}},
													"c": "https://chat.openai.com/search?q=",
													"b": "https://startpage.com/search?q=",
													"y": "https://search.yahoo.com/search?q=",
													"d": "https://duckduckgo.com/?q=",
													"k": "https://ask.com/web?q=",
													"a": "https://search.aol.com/aol/search?q=",
													"w": "https://wikipedia.org/w/index.php?search=",
													"s": "https://snopes.com/search/?q="
												}
											}},
											"modification": {"Append": {"Part": {"QueryParam": "q"}}}
										}}}
									}},
									"lnk.bio": {"If": {
										"if": {"PathIs": "/go"},
										"then": {"GetUrlFromQueryParam": "d"}
									}},
									"lnkd.in": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "<a ",
												"suffix": ">"
											},
											"string_modifications": {
												"parser": {"GetHtmlAttribute": "href"}
											}
										}
									}},
									"mel.sc": {"SetHost": "melscience.com"},
									"mfy.gg": {"SetHost": "metafy.gg"},
									"nas.cr": {"SetHost": "bit.ly"},
									"nyer.cm": {"SetHost": "trib.al"},
									"nyp.st": {"All": [
										{"SetHost": "bit.ly"},
										{"Function": {
											"name": "expand_redirect",
											"args": {
												"maps": {
													"headers": {
														"map": {
															"host": "nyp.st"
														}
													}
												}
											}
										}}
									]},
									"o93x.net": {"GetUrlFromQueryParam": "u"},
									"on.msnbc.com": {"SetHost": "bit.ly"},
									"on.theatln.tc": {"SetHost": "trib.al"},
									"open-api.tiktok.com": {"All": [
										{"AllowQueryParam": "open_id"},
										{"Function": "expand_redirect"}
									]},
									"open.substack.com": {"If": {
										"if": {"PathStartsWith": "/pub/"},
										"then": {"SetWhole": {"Join": {
											"values": [
												"https://",
												{"AssertMatches": {
													"value": {"Part": {"PathSegment": 1}},
													"matcher": "AllAsciiAlphanumeric"
												}},
												".substack.com/",
												{"Part": {"PathSegmentsAfterFirstN": 2}}
											]
										}}}
									}},
									"out.reddit.com": {"GetUrlFromQueryParam": "url"},
									"p.liadm.com": {"All": [
										{"AllowQueryParams": ["p", "s", "m", "sh2", "sh"]},
										{"Function": "expand_redirect"}
									]},
									"pixiv.net": {"If": {
										"if": {"PathIs": "/jump.php"},
										"then": {"Function": {
											"name": "url_from_query_param_or_query",
											"args": {"vars": {"param": "url"}}
										}}
									}},
									"preview.tinyurl.com": {"SetHost": "tinyurl.com"},
									"proxy.notsobot.com": {"GetUrlFromQueryParam": "url"},
									"qr.link": {"If": {
										"if": {"FlagIsNotSet": "no_network"},
										"then": {"All": [
											{"Function": "universal"},
											{"Cache": {
												"subject": "redirect",
												"action": {"Join": {"HttpRequest": {
													"response": {"NoneTo": {
														"handler": {"Header": "Location"},
														"if_none": {"Require2xx": "Url"}
													}}
												}}}
											}}
										]}
									}},
									"qr1.be": {"If": {
										"if": {"FlagIsNotSet": "no_network"},
										"then": {"All": [
											{"Function": "universal"},
											{"SetWhole": {"Cache": {
												"subject": "redirect",
												"key": {"Part": "Whole"},
												"value": {"HttpRequest": {
													"response": {"TryElse": {
														"try": {"ExtractFromBody": {
															"extractors": [
																{
																	"prefix": "<meta http-equiv",
																	"suffix": ">",
																	"parser": {"All": [
																		{"GetHtmlAttribute": "content"},
																		{"StripPrefix": "0; url = "}
																	]}
																}
															]
														}},
														"else": "Url"
													}}
												}}
											}}}
										]}
									}},
									"qrcc.me": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "_toUrl = ",
												"suffix": "\n"
											},
											"flags": ["strip_prefix"],
											"string_modifications": {
												"parser": {"All": [
													"GetJsStringLiteralPrefix",
													{"Prepend": "https:"}
												]}
											}
										}
									}},
									"qrcodes.pro": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "const redirectUrl = ",
												"suffix": "\n"
											},
											"flags": ["strip_prefix"],
											"string_modifications": {
												"parser": "GetJsStringLiteralPrefix"
											}
										}
									}},
									"qrtiger.com": {"SetHost": "qr1.be"},
									"rd.bizrate.com": {"If": {
										"if": {"PathIs": "/rd2"},
										"then": {"GetUrlFromQueryParam": "t"}
									}},
									"rd.goodreads.com": {"If": {
										"if": {"PathIs": "/gp/r.html"},
										"then": {"GetUrlFromQueryParam": "U"}
									}},
									"redirect.viglink.com": {"TryElse": {
										"try": {"GetUrlFromQueryParam": "u"},
										"else": {"GetUrlFromQueryParam": "out"}
									}},
									"reurl.cc": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "value=\"",
												"suffix": "\""
											},
											"flags": ["strip_prefix", "strip_suffix"],
											"string_modifications": {
												"parser": "UnescapeHtml"
											}
										}
									}},
									"ro.blox.com": {"GetUrlFromQueryParam": "af_web_dp"},
									"shareasale-analytics.com": {"SetHost": "shareasale.com"},
									"shareasale.com": {"TryElse": {
										"try": {"GetUrlFromQueryParam": "urllink"},
										"else": {"All": [
											{"AllowQueryParams": ["b", "u", "m"]},
											{"Function": "expand_redirect"}
										]}
									}},
									"skfb.ly": {"All": [
										{"SetHost": "sketchfab.com"},
										{"InsertPathSegment": {"index": 0, "value": "s"}}
									]},
									"smarturl.it": {"Function": {
										"name": "extract_from_body",
										"args": {
											"string_sources": {
												"prefix": "\"originalUrl\":",
												"suffix": "\",\""
											},
											"flags": ["strip_prefix"],
											"string_modifications": {
												"parser": "GetJsStringLiteralPrefix"
											}
										}
									}},
									"smartyt.ag": {"SetHost": "smartytags.com"},
									"smartytags.com": {"All": [
										{"SetScheme": "http"},
										{"Function": {
											"name": "extract_from_body",
											"args": {
												"string_sources": {
													"prefix": "window.location.href = ",
													"suffix": "\n"
												},
												"flags": ["strip_prefix"],
												"string_modifications": {
													"parser": "GetJsStringLiteralPrefix"
												}
											}
										}}
									]},
									"spotify.link": {"SetHost": "spotify.app.link"},
									"ss3.shipstation.com": {"SetWhole": {"Join": {
										"values": [
											"https://",
											{"Modified": {
												"value": {"Part": "Whole"},
												"modification": {"StripPrefix": "https://ss3.shipstation.com/"}
											}}
										]
									}}},
									"star.aliexpress.com": {"If": {
										"if": {"PathIs": "/share/share.htm"},
										"then": {"GetUrlFromQueryParam": "redirectUrl"}
									}},
									"steamcommunity.com": {"If": {
										"if": {"PathStartsWith": "/linkfilter"},
										"then": {"GetUrlFromQueryParam": "u"}
									}},
									"subscribestar.adult": {"If": {
										"if": {"PathIs": "/away"},
										"then": {"SetWhole": {"Modified": {
											"value": {"Part": {"QueryParam": "url"}},
											"modification": {"All": [
												{"ReplaceAll": {"find": "\n", "replace": ""}},
												"Base64Decode"
											]}
										}}}
									}},
									"substack.com": {"PartMap": {
										"part": {"PathSegment": 0},
										"map": {
											"p": {"RemoveQueryParams": ["token", "r", "showWelcomeOnShare"]},
											"app-link": {"If": {
												"if": {"PathIs": "/app-link/post"},
												"then": {"AllowQueryParams": ["publication_id", "post_id", "submitLike", "action"]}
											}},
											"redirect": {"If": {
												"if": {"PathStartsWith": "/redirect/2/"},
												"then": {"SetWhole": {"Modified": {
													"value": {"Part": {"PathSegment": 2}},
													"modification": {"All": [
														{"KeepBefore": "."},
														"Base64Decode",
														{"JsonPointer": "/e"}
													]}
												}}},
												"else": {"All": [
													"RemoveQuery",
													{"Function": "expand_redirect"}
												]}
											}}
										}
									}},
									"t.umblr.com": {"GetUrlFromQueryParam": "z"},
									"tee.pub": {"All": [
										{"SetHost": "www.teepublic.com"},
										{"Function": "expand_redirect"}
									]},
									"than.gs": {"SetHost": "thangs.com"},
									"thr.cm": {"SetHost": "trib.al"},
									"tinyurl.com": {"All": [
										{"If": {
											"if": {"Not": {"PathStartsWith": "/preview/"}},
											"then": {"InsertPathSegment": {"index": 0, "value": "preview"}}
										}},
										{"Function": {
											"name": "extract_from_body",
											"args": {
												"string_sources": {
													"prefix": "let url = ",
													"suffix": "\n"
												},
												"flags": ["strip_prefix"],
												"string_modifications": {
													"parser": "GetJsStringLiteralPrefix"
												}
											}
										}}
									]},
									"tmz.me": {"SetHost": "www.trib.al"},
									"toyhou.se": {"If": {
										"if": {"PathIs": "/~r"},
										"then": {"GetUrlFromQueryParam": "q"}
									}},
									"tpu.me": {"SetHost": "www.techpowerup.com"},
									"twpf.jp": {"If": {
										"if": {"PathIs": "/home/jump"},
										"then": {"SetWhole": {"Modified": {
											"value": {"Part": {"QueryParam": "p"}},
											"modification": "PercentDecode"
										}}}
									}},
									"u.afp.com": {"Function": {
										"name": "expand_redirect",
										"args": {
											"maps": {
												"headers": {
													"map": {
														"user-agent": "Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0",
														"accept-encoding": "gzip, deflate, br, zstd",
														"sec-fetch-dest": "document"
													}
												}
											}
										}
									}},
									"urldefense.com": {"If": {
										"if": {"PathStartsWith": "/v3/"},
										"then": {"SetWhole": {"Modified": {
											"value": {"Part": "Whole"},
											"modification": {"All": [
												{"KeepSegmentRange": {"split": "__;", "end": -1}},
												{"KeepSegmentRange": {"split": "__", "start": 1}},
												{"ReplaceAll": {"find": "*", "replace": "%"}}
											]}
										}}}
									}},
									"v.redd.it": {"SetWhole": {"Join": {
										"values": ["https://www.reddit.com/video", {"Part": "Path"}]
									}}},
									"wlo.link": {"SetHost": "link.space"},
									"youtube.com": {"If": {
										"if": {"PathIs": "/redirect"},
										"then": {"GetUrlFromQueryParam": "q"}
									}}
								},
								"else": {"Error": "Unhandled nh_expand_mode::special element."}
							}}
						}
					}},



					{"If": {
						"if": {"PathIs": "/page/email/redirect"},
						"then": {"All": [
							{"CopyPart": {"from": {"QueryParam": "campaignpageurl"}, "to": "Whole"}},
							{"RemoveQueryParam": "ea.url.id"}
						]}
					}}
				]
			}},



			{"PartPartitioning": {
				"part": "NormalizedHost",
				"partitioning": "nh_categories",
				"map": {
					"pixiv": {"Function": {
						"name": "pixiv",
						"args": {
							"string_sources": {
								"default_host": "www.pixiv.net"
							}
						}
					}},
					"pixiv_embed_hosts": {"If": {
						"if": {"PathIs": "/"},
						"then": {"PartMap": {
							"part": "NormalizedHost",
							"map": {
								"phixiv.net": {"SetWhole": "https://github.com/thelaao/phixiv"}
							}
						}},
						"else": {"Function": {
							"name": "pixiv",
							"args": {
								"string_sources": {
									"default_host": {"Var": "pixiv_embed_host"}
								}
							}
						}}
					}},



					"twitter": {"Function": {
						"name": "twitter",
						"args": {
							"string_sources": {
								"default_host": "x.com"
							}
						}
					}},
					"twitter_embed_hosts": {"If": {
						"if": {"PathIs": "/"},
						"then": {"PartMap": {
							"part": "NormalizedHost",
							"map": {
								"vxtwitter.com"   : {"SetWhole": "https://github.com/dylanpdx/BetterTwitFix"},
								"fixupx.com"      : {"SetWhole": "https://github.com/FxEmbed/FxEmbed"       },
								"fixvx.com"       : {"SetWhole": "https://github.com/dylanpdx/BetterTwitFix"},
								"stupidpenisx.com": {"SetWhole": "https://github.com/dylanpdx/BetterTwitFix"}
							}
						}},
						"else": {"Function": {
							"name": "twitter",
							"args": {
								"string_sources": {
									"default_host": "x.com"
								}
							}
						}}
					}},
					"nitter": {"Function": {
						"name": "twitter",
						"args": {
							"string_sources": {
								"default_host": {"Var": "nitter_host"}
							}
						}
					}},



					"bluesky": {"Function": "bluesky"},
					"bluesky_embed_hosts": {"If": {
						"if": {"PathIs": "/"},
						"then": {"PartMap": {
							"part": "NormalizedHost",
							"map": {
								"fxbsky.app": {"SetWhole": "https://bsky.app/profile/fxbsky.app"}
							}
						}},
						"else": {"Function": "bluesky"}
					}},



					"youtube": {"Function": {
						"name": "youtube",
						"args": {
							"string_sources": {
								"default_host": {"Part": "Host"}
							}
						}
					}},
					"youtu_be": {"All": [
						{"SetWhole": {"Join": {
							"values": [
								"https://www.youtube.com/watch?v=",
								{"Part": {"PathSegment": 0}}
							]
						}}},
						{"Function": {
							"name": "youtube",
							"args": {
								"string_sources": {
									"default_host": "www.youtube.com"
								}
							}
						}}
					]},
					"invidious": {"Function": {
						"name": "youtube",
						"args": {
							"string_sources":{
								"default_host": {"Var": "invidious_host"}
							}
						}
					}},



					"deviantart_embed_hosts": {"SetRegDomain": "deviantart.com"},



					"breezewiki": {"StringMap": {
						"value": {"Var": "fandom_mode"},
						"map": {
							"canon": {"If": {
								"if": {"Not": {"PathIs": "/"}},
								"then": {"All": [
									{"SetHost": {"Join": {
										"values": [{"Part": {"PathSegment": 0}}, ".fandom.com"]
									}}},
									{"PartMap": {
										"part": {"PathSegment": 1},
										"map": {
											"search": {"All": [
												{"SetPath": "/wiki/Special:Search"},
												{"SetQuery": {"Join": {
													"values": ["query=", {"Part": {"RawQueryParam": "q"}}]
												}}}
											]}
										},
										"else": {"TryElse": {
											"try": {"RemovePathSegment": 0},
											"else": {"SetPath": "/"}
										}}
									}}
								]}
							}},
							"breezewiki": {"SetHost": {"Var": "breezewiki_host"}}
						},
						"if_none": {"SetHost": {"Var": "breezewiki_host"}}
					}},
					"alibaba": {"RemoveQueryParams": [
						"callByHgJs", "cardType", "forcePC", "fsb", "ncms_spm", "path", "prefetchKey", "ptow", "__removesafearea__", "selectedCarrierCode", "spm", "src_cna",
						"tracelog", "wx_navbar_tramsparent", "wx_navbar_transparent", "wx_xpage", "from", "ckvia"
					]},
					"discord_external": {"If": {
						"if": {"FlagIsSet": "discord_unexternal"},
						"then": {"ModifyPart": {
							"part": "Whole",
							"modification": {"RegexReplaceOne": {"regex": ".+?/(https?)/([^/]+)/([^?#]+)", "replace": "$1://$2/$3"}}
						}}
					}},
					"disney": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
					"instagram": {"All": [
						{"HandleParams": {
							"names": ["igshid", "igsh", "xmt", "ig_mid", "e", "g", "hl", "slof"],
							"prefixes": ["xmt=", "source_", "igsh"]
						}},
						{"If": {
							"if": {"RegDomainIs": "threads.net"},
							"then": {"SetHost": "www.threads.com"}
						}}
					]},
					"lmgtfy": {"If": {
						"if": {"HasQueryParam": "q"},
						"then": {"SetWhole": {"Join": {
							"values": [
								"https://google.com/search?q=",
								{"Part": {"RawQueryParam": "q"}}
							]
						}}}
					}}
				}
			}},



			{"PartMap": {
				"part": "RegDomain",
				"map": {
					"acer.com": {"HandleParams": {"prefixes": ["internal_"]}},
					"addons.mozilla.org": {"RemoveQueryParams": ["platform", "appver"]},
					"amtrak.com": {"RemoveQueryParams": ["atv", "cmp"]},
					"apexgamingpcs.com": {"RemoveQueryParams": ["linkId", "affluencerId"]},
					"atom.bio": {"RemoveQueryParam": "menu_origin"},
					"bbc.com": {"HandleParams": {"prefixes": ["at_"]}},
					"be.net": {"SetHost": "www.behance.net"},
					"beacons.ai": {"HandleParams": {
						"names": ["pageViewSource", "show_back_button"],
						"prefixes": ["refer"]
					}},
					"bell.ca": {"If": {
						"if": {"PathIs": "/incrediblebundle"},
						"then": {"SetWhole": "https://www.bell.ca/Bell-Promotions/Promo-code"},
						"else": {"All": [
							{"RemoveFragmentParams": ["INT", "EXT"]},
							{"RemoveQueryParams": ["INT", "EXT"]}
						]}
					}},
					"boosty.to": {"RemoveQueryParam": "share"},
					"booth.pm": {"RemoveQueryParam": "_gl"},
					"browserstack.com": {"RemoveFragmentParams": ["ref", "source"]},
					"bsky.social": {"If": {
						"if": {"Not": {"SubdomainIsOneOf": ["www", null]}},
						"then": {"SetWhole": {"Join": {
							"values": ["https://bsky.app/profile/", {"Part": "Host"}]
						}}}
					}},
					"carrd.com": {"SetRegDomain": "carrd.co"},
					"cbc.ca": {"RemoveQueryParam": "__vfz"},
					"cbsnews.com": {"RemoveQueryParams": ["ftag", "linkId"]},
					"change.org": {"All": [
						{"ModifyPath": {"KeepMaybeBefore": "/exp/"}},
						{"HandleParams": {"prefixes": ["recruit"]}}
					]},
					"cnbc.com": {"RemoveQueryParam": "par"},
					"cnn.com": {"All": [
						{"RemoveQueryParams": ["bt_ee", "bt_ts", "source", "iid"]},
						{"If": {
							"if": {"PathSegmentStartsWith": {"index": -1, "value": "h_"}},
							"then": {"RemovePathSegment": -1}
						}}
					]},
					"crunchyroll.com": {"RemoveQueryParam": "referrer"},
					"deviantart.com": {"If": {
						"if": {"Not": {"SubdomainIsOneOf": ["www", null]}},
						"then": {"All": [
							{"InsertPathSegment": {"index": 0, "value": {"Part": "Subdomain"}}},
							{"SetSubdomain": null}
						]}
					}},
					"drinkctrl.com": {"RemoveQueryParams": ["ref", "tid"]},
					"duckduckgo.com": {"RemoveQueryParams": ["t", "atb", "ia"]},
					"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"RemoveQueryParams": ["t", "atb", "ia"]},
					"facebook.com": {"If": {
						"if": {"PathStartsWith": "/reel/"},
						"then": "RemoveQuery",
						"else": {"RemoveQueryParams": ["fs", "s", "mibextid", "rf", "share_url", "rdid", "extid"]}
					}},
					"fandom.com": {"All": [
						{"PartMap": {
							"part": {"PathSegment": 1},
							"map": {
								"Special:Search": {"RemoveQueryParams": ["scope", "navigationSearch"]}
							}
						}},
						{"StringMap": {
							"value": {"Var": "fandom_mode"},
							"map": {
								"breezewiki": {"PartMap": {
									"part": {"PathSegment": 1},
									"map": {
										"Special:Search": {"All": [
											{"SetPart": {
												"part": {"QueryParam": "q"},
												"value": {"NoneTo": {
													"value": {"EmptyToNone": {"Part": {"PathSegmentsAfterFirstN": 2}}},
													"if_none": {"Part": {"QueryParam": "query"}}
												}}
											}},
											{"RemoveQueryParam": "query"},
											{"SetPath": {"Join": {
												"values": [{"Part": "Subdomain"}, "/search"]
											}}},
											{"SetHost": {"Var": "breezewiki_host"}}
										]}
									},
									"else": {"All": [
										{"InsertPathSegment": {"index": 0, "value": {"Part": "Subdomain"}}},
										{"SetHost": {"Var": "breezewiki_host"}}
									]}
								}}
							}
						}}
					]},
					"fori.io": {"SetHost": "www.foriio.com"},
					"furaffinity.net": {"StringMap": {
						"value": {"Var": "furaffinity_mode"},
						"map": {
							"canon": {"SetHost": "www.furaffinity.net"},
							"sfw"  : {"SetHost": "sfw.furaffinity.net"},
							"nsfw" : {"SetHost": "www.furaffinity.net"}
						}
					}},
					"gelbooru.com": {"If": {
						"if": {"QueryParamIs": {"param": "page", "value": "post"}},
						"then": {"RemoveQueryParam": "tags"}
					}},
					"go.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
					"gofundme.com": {"RemoveQueryParams": ["attribution_id", "ts", "v", "lang"]},
					"goodreads.com": {"If": {
						"if": {"PathStartsWith": "/book/show/"},
						"then": "RemoveQuery",
						"else": {"RemoveQueryParam": "ref_"}
					}},
					"history.com": {"If": {
						"if": {"FragmentIsSomeAndStartsWith": "link_time"},
						"then": "RemoveFragment"
					}},
					"hp.com": {"HandleParams": {
						"names": ["jumpid", "_its", "adcampaigngroup", "campaignID", "source", "subacctid", "subacctname"],
						"prefixes": ["sv_"]
					}},
					"hulu.com": {"RemoveQueryParam": "from"},
					"inkbunny.net": {"If": {
						"if": {"PathIs": "/submissionsviewall.php"},
						"then": {"RemoveQueryParam": "rid"}
					}},
					"instagram.com": {"If": {
						"if": {"All": [
							{"FlagIsSet": "instagram_unprofilecard"},
							{"PathSegmentIs": {"index": 1, "value": "profilecard"}}
						]},
						"then": {"RemovePathSegment": 1}
					}},
					"ipetitions.com": {"If": {
						"if": {"PathStartsWith": "/petition/"},
						"then": "RemoveQuery"
					}},
					"kff.org": {"RemoveQueryParams": ["campaign_id", "emc", "instance_id", "nl", "regi_id", "segment_id", "te", "user_id"]},
					"lego.com": {"All": [
						{"If": {
							"if": {"FlagIsNotSet": "keep_affiliate"},
							"then": {"RemoveQueryParam": "CMP"}
						}},
						{"If": {
							"if": {"SubdomainIs": "shop"},
							"then": {"SetHost": "www.lego.com"}
						}}
					]},
					"lenovo.com": {"If": {
						"if": {"FlagIsSet": "keep_affiliate"},
						"then": {"RemoveQueryParams": ["IPromoID", "orgRef", "gad_campaignid", "s_kwcid", "ef_id", "Program", "pid"]},
						"else": {"RemoveQueryParams": ["IPromoID", "orgRef", "gad_campaignid", "s_kwcid", "ef_id", "Program", "pid", "acid"]}
					}},
					"linktr.ee": {"HandleParams": {
						"names": ["ltsid"],
						"prefixes": ["lt_utm"]
					}},
					"loblaws.ca": {"RemoveQueryParams": ["navid", "icid", "icta"]},
					"marshmallow-qa.com": {"RemoveQueryParam": "t"},
					"marvel.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
					"minds.com": {"RemoveQueryParam": "referrer"},
					"nature.com": {"RemoveQueryParam": "sharing_token"},
					"nytimes.com": {"HandleParams": {
						"names": ["smid", "smtyp", "source", "campaign_id", "emc", "instance_id", "nl", "regi_id", "user_id"],
						"prefixes": ["source"]
					}},
					"overpass-turbo.eu": {"If": {
						"if": {"PathStartsWith": "/s/"},
						"then": {"Function": "expand_redirect"}
					}},
					"patreon.com": {"RemoveQueryParams": ["redirect_uri", "fan_landing", "fromConcierge", "redirect"]},
					"pawoo.net": {"RemoveQueryParam": "provider"},
					"pixiv.net": {"If": {
						"if": {"PathIs": "/member.php"},
						"then": {"SetWhole": {"Join": {"values": [
							"https://pixiv.net/users/",
							{"Part": {"QueryParam": "id"}}
						]}}}
					}},
					"razer.com": {"RemoveQueryParam": "cid"},
					"reddit.com": {"All": [
						{"PartMap": {
							"part": {"PathSegment": 0},
							"map": {
								"search": {"RemoveQueryParams": ["cid", "share_id"]},
								"domain": {"AllowQueryParams": ["count", "after"]}
							}
						}},
						{"StringMap": {
							"value": {"Var": "reddit_mode"},
							"map": {
								"old": {"SetSubdomain": "old"},
								"new": {"SetSubdomain": "www"}
							}
						}}
					]},
					"rule34.xxx": {"If": {
						"if": {"All": [
							{"FlagIsSet": "remove_unused_search_query"},
							{"QueryParamIs": {"param": "s", "value": "view"}}
						]},
						"then": {"RemoveQueryParam": "tags"}
					}},
					"snapchat.com": {"RemoveQueryParams": ["purpose", "sp", "invite_id", "share_id", "sid", "sender_web_id", "device_type", "is_copy_url"]},
					"spotify.com": {"All": [
						{"If": {
							"if": {"PathSegmentIs": {"index": 1, "value": "album"}},
							"then": {"RemovePathSegment": 0}
						}},
						{"If": {
							"if": {"PathStartsWith": "/album/"},
							"then": "RemoveQuery",
							"else": {"RemoveQueryParams": ["si", "nd", "_branch_match_id", "pi"]}
						}}
					]},
					"stackoverflow.com": {"RemoveQueryParams": ["so_medium", "so_source", "c"]},
					"sta.sh": {"All": [
						{"SetHost": "www.deviantart.com"},
						{"SetPathSegment": {"index": 0, "value": "stash"}}
					]},
					"steampowered.com": {"RemoveQueryParam": "snr"},
					"subscribestar.adult": {"RemoveQueryParam": "redirect_notice"},
					"support.google.com": {"AllowQueryParam": "q"},
					"teepublic.com": {"All": [
						{"If": {
							"if": {"PartIsSomeAndContains": {"part": "Fragment", "value": "D1V", "at": "End"}},
							"then": "RemoveFragment"
						}},
						{"RemoveQueryParam": "countrycode"}
					]},
					"teespring.com": "RemoveQuery",
					"theguardian.com": {"RemoveQueryParam": "CMP"},
					"thelancet.com": {"If": {
						"if": {"PathSegmentIsOneOf": {"index": 0, "values": ["commissions", "journals"]}},
						"then": "RemoveQuery"
					}},
					"theonion.com": {"AllowQueryParam": "s"},
					"thrn.co": {"All": [
						{"SetHost": "throne.com"},
						{"RemovePathSegment": 0}
					]},
					"tiktok.com": {"HandleParams": {
						"names": ["checksum", "source", "u_code", "timestamp", "user_id", "enable_checksum", "web_id", "lang"],
						"prefixes": ["_", "sec_", "ug", "is_from", "sender", "share", "social_"]
					}},
					"tumblr.com": {"All": [
						{"If": {
							"if": {"SubdomainIs": "at"},
							"then": {"Function": "expand_redirect"}
						}},
						{"If": {
							"if": {"HasQueryParam": "redirect_to"},
							"then": {"All": [
								{"CopyPart": {"from": {"QueryParam": "redirect_to"}, "to": "Path"}},
								"RemoveQuery"
							]}
						}},
						{"If": {
							"if": {"PathIs": "/safe-mode"},
							"then": {"SetWhole": {"AssertMatches": {
								"value": {"Part": {"QueryParam": "url"}},
								"matcher": {"Regex": "^https?://([^/]+\\.tumblr\\.com\\.?/?|(www\\.)?tumblr\\.com\\.?/[^/]+/?)$"}
							}}}
						}},
						{"If": {
							"if": {"PathStartsWith": "/login_required/"},
							"then": {"RemovePathSegment": 0}
						}},
						{"If": {
							"if": {"PathStartsWith": "/search/"},
							"then": {"RemoveQueryParam": "source"},
							"else": "RemoveQuery"
						}},
						{"If": {
							"if": {"All": [
								{"FlagIsSet": "tumblr_unsubdomain_blog"},
								{"Not": {"Any": [
									{"SubdomainIsOneOf": ["at", "www", null]},
									{"PathStartsWith": "/archive/"},
									{"PartContains": {"part": "Subdomain", "value": "."}}
								]}}
							]},
							"then": {"All": [
								{"If": {
									"if": {"PathStartsWith": "/post/"},
									"then": {"RemovePathSegment": 0}
								}},
								{"InsertPathSegment": {"index": 0, "value": {"Part": "Subdomain"}}},
								{"SetSubdomain": null}
							]}
						}}
					]},
					"twitch.tv": {"RemoveQueryParam": "desktop-redirect"},
					"washingtonpost.com": {"All": [
						{"If": {
							"if": {"FragmentIsSomeAndStartsWith": "link"},
							"then": "RemoveFragment"
						}},
						{"RemoveQueryParamsMatching": {"Any": [
							{"IsOneOf": ["itid", "nid", "arcId", "account_location", "tid", "oscode", "s_l", "acqEntType", "p", "s_ct"]},
							{"Contains": {"value": " "}}
						]}}
					]},
					"xiaohongshu.com": {"HandleParams": {
						"prefixes": ["xsec", "xhs", "app", "share", "author_share"]
					}},
					"yahoo.com": {"RemoveQueryParams": ["p", "src", "pspid", "activity", ".src", "specId", "y"]}
				}
			}},
			{"PartMap": {
				"part": "DomainSuffix",
				"map": {
					"carrd.co": {"RemoveQueryParam": "ref"}
				}
			}},
			{"PartMap": {
				"part": "NormalizedHost",
				"map": {
					"abc.net.au": {"RemoveQueryParam": "future"},
					"abc7ny.com": {"RemoveQueryParams": ["ex_cid", "taid"]},
					"actionnetwork.org": {"RemoveQueryParam": "source"},
					"aliexpress.com": {"If": {
						"if": {"PathStartsWith": "/item/"},
						"then": "RemoveQuery"
					}},
					"apps.apple.com": {"RemoveQueryParams": ["pt", "ct", "mt"]},
					"boot.dev": {"If": {
						"if": {"FlagIsNotSet": "keep_affiliate"},
						"then": {"RemoveQueryParam": "promo"}
					}},
					"danbooru.donmai.us": {"If": {
						"if": {"All": [
							{"PathStartsWith": "/posts"},
							{"FlagIsSet": "remove_unused_search_query"}
						]},
						"then": {"RemoveQueryParam": "q"}
					}},
					"etsy.com": {"RemoveQueryParams": ["etsrc", "dd_referrer"]},
					"in.blissy.com": "RemoveQuery",
					"info.blissy.com": "RemoveQuery",
					"jamanetwork.com": {"RemoveQueryParams": ["guestAccessKey", "linkId"]},
					"landing.streamily.com": {"If": {
						"if": {"FlagIsNotSet": "keep_affiliate"},
						"then": {"RemoveQueryParam": "hss_channel"}
					}},
					"ledauphine.com": {"HandleParams": {
						"names": "__twitter_impression",
						"prefixes": ["at_"]
					}},
					"leaffilter.ca": {"If": {
						"if": {"PathIs": "/fvoautumn"},
						"then": {"SetWhole": "https://www.leaffilter.ca/promo/ready-for-fall/"},
						"else": {"RemoveQueryParams": ["if_dc", "map_phone"]}
					}},
					"media.igram.world": {"GetUrlFromQueryParam": "uri"},
					"mondly.com": {"If": {
						"if": {"All": [
							{"PathStartsWith": "/offer/"},
							{"FlagIsNotSet": "keep_affiliate"}
						]},
						"then": {"RemoveQueryParam": "avangate_src"}
					}},
					"of.com": {"SetHost": "onlyfans.com"},
					"onet.pl": {"RemoveQueryParam": "src"},
					"overview.mail.yahoo.com": "RemoveQuery",
					"people.com": {"RemoveQueryParam": "_gl"},
					"play.google.com": {"All": [
						{"RemoveQueryParam": "referrer"},
						{"If": {
							"if": {"PathIs": "/"},
							"then": {"SetPath": "/store"}
						}}
					]},
					"reuters.com": {"RemoveQueryParam": "taid"},
					"sfchronicle.com": {"RemoveQueryParams": ["hash", "time", "rid", "sid", "ss", "st_rid", "sharecount"]},
					"stackoverflow.com": {"If": {
						"if": {"PathIs": "/"},
						"then": {"SetPath": "/questions"}
					}},
					"support.google.com": {"RemoveQueryParam": "ref_topic"},
					"temu.com": {"PartMap": {
						"part": "Path",
						"map": {
							"/goods.html": {"AllowQueryParam": "goods_id"},
							"/search_result.html": {"RemoveQueryParams": ["search_method", "srch_enter_source", "__vt"]}
						}
					}},
					"tmz.com": {"RemoveQueryParam": "adid"},
					"ts.la": {"SetWhole": {"Join": {
						"values": [
							"https://www.tesla.com/referral",
							{"Part": "Path"}
						]
					}}},
					"wh.gov": {"SetHost": "www.whitehouse.gov"},
					"wsj.com": {"HandleParams": {
						"names": ["mod", "reflink", "locale"],
						"prefixes": ["gaa_"]
					}},
					"xp-pen.com": {"RemoveQueryParams": ["channel", "papClickId"]}
				}
			}},
			{"PartMap": {
				"part": "DomainMiddle",
				"map": {
					"amazon": {"All": [
						{"ModifyPath": {"All": [
							{"StripMaybeBefore": "/dp/"},
							{"KeepMaybeBefore": "/ref="}
						]}},
						{"PartMap": {
							"part": {"PathSegment": 0},
							"map": {
								"amazonprime": "RemoveQuery",
								"dp": {"If": {
									"if": {"FlagIsSet": "keep_affiliate"},
									"then": {"AllowQueryParams": ["aod", "tag"]},
									"else": {"AllowQueryParam": "aod"}
								}},
								"gp": {"PartMap": {
									"part": {"PathSegment": 1},
									"map": {
										"buyagain": {"AllowQueryParam": "ats"},
										"customer-reviews": "RemoveQuery",
										"offer-listing": {"All": [
											{"SetQuery": "aod=1"},
											{"ModifyPath": {"Replacen": {
												"find": "gp/offer-listing",
												"replace": "dp",
												"count": 1
											}}}
										]}
									}
								}},
								"s": {"AllowQueryParams": ["k", "i", "rh", "bbn", "me"]},
								"stores": "RemoveQuery"
							},
							"else": {"HandleParams": {
								"names": ["ref", "ref_", "ie", "_encoding", "content-id", "store_ref", "lp_context_asin"],
								"prefixes": ["pd_", "pf_"]
							}}
						}}
					]},
					"bestbuy": {"RemoveQueryParam": "icmp"},
					"ebay": {"If": {
						"if": {"PathStartsWith": "/itm/"},
						"then": "RemoveQuery"
					}},
					"google": {"All": [
						{"PartMap": {
							"part": "Path",
							"map": {
								"/search": {"All": [
									{"AllowQueryParams": ["hl", "q", "tbm", "p", "udm", "filter", "vsrid", "vsdim", "vsint", "ins_vfs", "nfpr", "start"]},
									{"RemoveFragmentParam": "sv"}
								]},
								"/setprefs": {"RemoveQueryParams": ["sa", "ved", "sca_esv", "usp"]}
							},
							"else": {"RemoveQueryParams": ["sca_esv", "usp"]}
						}},
						{"RemoveFragmentParams": ["vhid", "vssid"]}
					]},
					"onion": {"If": {
						"if": {"FlagIsSet": "tor2web2tor"},
						"then": {"SetDomainSuffix": null}
					}},
					"pinterest": {"If": {
						"if": {"Not": {"PathStartsWith": "/search"}},
						"then": "RemoveQuery"
					}},
					"walmart": {"If": {
						"if": {"PathStartsWith": "/ip/"},
						"then": "RemoveQuery"
					}}
				}
			}},



			{"Function": "universal"}
		]}
	}}
}
