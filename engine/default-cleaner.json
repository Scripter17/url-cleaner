{
	"docs": {
		"name": "The default cleaner",
		"description": [
			"The default cleaner; Meant for general purpose every day URL Cleaning.",
			"Licensed under the AGPL 3.0 or later."
		],
		"flags": {
			"keep_affiliate": "Don't remove affiliate info from affiliate links.",

			"bypass_vip"                : "Use [bypass.vip](https://bypass.vip) to expand various complicated/otherwise unsupported redirect sites.",
			"embed_compatibility"       : "Replace twitter, bluesky, and pixiv hosts with their respective `*_embed_host` vars.",
			"keep_http"                 : "Disable upgrading `http` URLs to `https`. See the `nh_keep_http` set if you only want to not upgrade specific hosts.",
			"no_network"                : "Don't make any network requests. Some redirect websites will still work because they include the destination in the URL.",
			"expand_dangerous_redirects": "Expand redirects known to always leak sender info.",
			"remove_unused_search_query": "Remove search queries from URLs that aren't search results (for example, posts).",
			"tor2web2tor"               : "Change `**.onion.**` hosts to `**.onion`.",
			"unmobile"                  : "Remove `m` and `mobile` segments from the subdomain. Should be expanded to query params.",

			"breezewiki"  : "Change fandom/known Breezewiki hosts to the `breezewiki_host` var.",
			"unbreezewiki": "Change known Breezewiki hosts to `fandom.com`.",
			"invidious"   : "Change youtube/known Invidious hosts to the `invidious_host` var.",
			"uninvidious" : "Change known Invidious hosts to `youtube.com`.",
			"nitter"      : "Change twitter/known Nitter hosts `nitter_host` var.",
			"unnitter"    : "Change known Nitter hosts to `x.com`.",

			"discord_unexternal"             : "Change `images-ext-*.discordapp.net` URLs to the original images they refer to.",
			"furaffinity_sfw"                : "Change `furaffinity.net` to `sfw.furaffinity.net`.",
			"furaffinity_unsfw"              : "Change `sfw.furaffinity.net` to `furaffinity.net`.",
			"instagram_unprofilecard"        : "Change `instagram.com/username/profilecard` to `instagram.com/username`.",
			"tumblr_unsubdomain_blog"        : "Change `blog.tumblr.com` to `tumblr.com/blog`.",
			"youtube_remove_sub_confirmation": "Remove the `sub_confirmation` query paramerer in `youtube.com` URLs.",
			"youtube_unembed"                : "Change `youtube.com/embed/abc` to `youtube.com/watch?v=abc`.",
			"youtube_unlive"                 : "Change `youtube.com/live/abc` to `youtube.com/watch?v=abc`.",
			"youtube_unshort"                : "Change `youtube.com/shorts/abc` to `youtube.com/watch?v=abc`.",
			"youtube_unplaylist"             : "Remove the `list` query param from `youtube.com/watch` URLs."
		},
		"vars": {
			"bluesky_embed_host": "The host to use for Bluesky when the `embed_compatibility` flag is set. Defaults to `fxbsky.com`.",
			"pixiv_embed_host"  : "The host to use for pixiv when the `embed_compatibility` flag is set. Defaults to `phixiv.com`.",
			"twitter_embed_host": "The host to use for twitter when the `embed_compatibility` flag is set. Defaults to `vxtwitter.com`.",

			"breezewiki_host"   : "The host to replace fandom/known Breezewiki hosts with when the `breezewiki` flag is enabled. Defaults to `breezewiki.com`.",
			"invidious_host"    : "The host to replace youtube/known Invidious hosts with when the `invidious` flag is enabled. Defaults to `yewtu.be`.",
			"nitter_host"       : "The host to replace twitter/known Nitter hosts with when the `nitter` flag is enabled. Defaults to `nitter.net`.",

			"bypass_vip_api_key": "The API key used for [bypass.vip](https://bypass.vip). Overrides the `URL_CLEANER_BYPASS_VIP_API_KEY` environment var."
		},
		"environment_vars": {
			"URL_CLEANER_BYPASS_VIP_API_KEY": "The API key used for [bypass.vip](https://bypass.vip). Can be overridden with the `bypass_vip_api_key` var."
		},
		"sets": {
			"utps": "Universal tracking parameters to remove from all URLs whose RegDomain isn't in the `rd_keep_utps` set. See the `utp_prefixes` for a list of prefixes only used for universal tracking parameters.",

			"nh_keep_http"  : "The `NormalizedHost`s to not upgrade from `http` to `https`.",
			"rd_keep_mobile": "The `RegDomain`s to not apply the `unmobile` flag to."
		},
		"lists": {
			"utp_prefixes": "Prefixes only used for universal tracking parameters. See the `utps` set for specific query params to always remove."
		},
		"named_partitionings": {
			"nh_categories": "Categories of similar websites with shared cleaning methods.",

			"rd_www_subdomain": "The `RegDomain`s to ensure/remove `www` `Subdomain`s.",
			"dm_www_subdomain": "The `DomainMiddle`s to ensure/remove `www` `Subdomain`s.",

			"dm_expand_mode": "How to handle redirect `DomainMiddle`s.",
			"nh_expand_mode": "How to handle redirect `NormalizedHost`s.",
			"rd_expand_mode": "How to handle redirect `RegDomain`s,"
		},
		"task_context": {
			"vars": {
				"handle"                : "The handle to replace the user ID with.",
				"contact_info_site_name": "The name oe the website this URL is contact info for.",
				"link_text"             : "The text of the link the job came from.",
				"redirect_shortcut"     : "The destination of a redirect as specified by some part of the source. For example, the link's text."
			}
		}
	},
	"params": {
		"vars": {
			"bluesky_embed_host": "fxbsky.app",
			"pixiv_embed_host"  : "phixiv.net",
			"twitter_embed_host": "vxtwitter.com",

			"breezewiki_host": "breezewiki.com",
			"invidious_host" : "yewtu.be",
			"nitter_host"    : "nitter.net"
		},
		"sets": {
			"nh_keep_http": ["localhost", "orteil.dashnet.org"],
			"rd_keep_mobile": ["deviantart.com", "tumblr.com"],
			"utps": [
				"action_object_map", "action_ref_map", "action_type_map", "adfrom", "adjust_adgroup", "adjust_campaign", "adjust_creative", "adjust_referrer",
				"adjust_tracker", "adjust_tracker_limit", "admitad_uid", "af_ad", "af_adset", "af_click_lookback", "af_force_deeplink", "af_xp", "aiad_clid", "ar_ad",
				"ar_adgroup", "ar_campaign", "ar_channel", "ar_clx", "ar_strategy", "asgtbndr", "at_campaign", "at_campaign_type", "at_creation", "at_emailtype", "at_link",
				"at_link_id", "at_link_origin", "at_link_type", "at_medium", "at_ptr_name", "at_recipient_id", "at_recipient_list", "at_send_date", "awc", "_branch_match_id",
				"_branch_referrer", "bsft_aaid", "bsft_clkid", "bsft_eid", "bsft_ek", "bsft_mid", "bsft_uid", "cjdata", "cjevent", "_clde", "_cldee", "click", "cm_cr",
				"cm_me", "cmpid", "cuid", "cx_click", "cx_recsOrder", "cx_recsWidget", "dclid", "dpg_campaign", "dpg_content", "dpg_medium", "dpg_source", "ebisAdID", "erid",
				"et_rid", "external_click_id", "famad_xuid", "fb_action_ids", "fb_action_types", "fbclid", "fb_comment_id", "fb_ref", "fb_source", "_ga", "gad_source",
				"gbraid", "gci", "gclid", "gclsrc", "_gl", "gps_adid", "guccounter", "guce_referrer", "guce_referrer_sig", "hsa_acc", "hsa_ad", "hsa_cam", "hsa_grp", "hsa_kw",
				"hsa_la", "hsa_mt", "hsa_net", "hsa_ol", "hsa_src", "hsa_tgt", "hsa_ver", "hsCtaTracking", "hsctatracking", "_hsenc", "__hsfp", "__hssc", "__hstc", "icid",
				"iclid", "intcmp", "__io_lv", "_io_session_id", "ir_adid", "ir_campaignid", "irclickid", "irgwc", "ir_partnerid", "is_retargeting", "itm_campaign",
				"itm_content", "itm_medium", "itm_source", "itm_term", "jmtyClId", "_kx", "maf", "mc_eid", "message", "mindbox", "mindbox-click-id", "mindbox-message-key",
				"mkt_tok", "ml_subscriber", "ml_subscriber_hash", "msclkid", "mt_link_id", "mtm_campaign", "mtm_cid", "mtm_content", "mtm_group", "mtm_keyword", "mtm_medium",
				"mtm_placement", "mtm_source", "nx_source", "oft_c", "oft_ck", "oft_d", "oft_id", "oft_ids", "oft_k", "oft_lk", "oft_sk", "oly_anon_id", "oly_enc_id", "_ope",
				"_openstat", "oprtrack", "pk_campaign", "pk_cid", "pk_medium", "pk_source", "pk_vid", "rb_clickid", "ref", "referer", "rtkcid", "__s", "sca_ref", "s_cid",
				"_sgm_action", "_sgm_campaign", "_sgm_source", "sms_click", "sms_source", "sms_uph", "spot_im_redirect_source", "srsltid", "sscid", "ss_email_id", "Tcsack",
				"tduid", "_trkparms", "_trksid", "ttclid", "twclid", "unicorn_click_id", "user_email_address", "usqp", "utm", "vc_lpp", "vero_conv", "vero_id", "vgo_ee",
				"vsm_cid", "vsm_pid", "vsm_type", "wbraid", "wickedid", "wpb_advertiser", "wpb_id", "wt_mc", "xtor", "yclid", "ymclid", "ymid", "ysclid", "_zucks_suid"
			]
		},
		"lists": {
			"utp_prefixes": [
				"__s", "at_custom", "cm_mmc", "utm_"
			]
		},
		"named_partitionings": {
			"nh_categories": {
				"bluesky_embed_hosts": ["fxbsky.app"],
				"deviantart_embed_hosts": ["fxdeviantart.com"],
				"pixiv_embed_hosts": ["phixiv.net"],
				"twitter_embed_hosts": ["fixupx.com", "fixvx.com", "fxtwitter.com", "girlcockx.com", "stupidpenisx.com", "vxtwitter.com", "yiffx.com"],

				"breezewiki": [
					"antifandom.com", "breeze.hostux.net", "breeze.mint.lgbt", "breeze.nohost.network", "breeze.whateveritworks.org", "breezewiki.catsarch.com", "breezewiki.com",
					"breezewiki.frontendfriendly.xyz", "breezewiki.hyperreal.coffee", "breezewiki.nadeko.net",
					"breezewiki.nadekonfkhwlxwwk4ycbvq42zvcjmvo5iakl4tajojjwxd4a5dcetuyd.onion", "breezewiki.pussthecat.org", "breezewiki.woodland.cafe", "bw.artemislena.eu",
					"bw.hamstro.dev", "bw.projectsegfau.lt", "bw.skunky7dhv7nohsoalpwe3sxfz3fbkad7r3wk632riye25vqm3meqead.onion", "nerd.whatever.social", "z.opnxng.com"
				],
				"invidious": [
					"invidious.nerdvpn.de", "inv.nadeko.net", "inv.nadekonw7plitnjuawu6ytjsl7jlglk2t6pyq6eftptmiv3dvqndwvyd.onion", "yewtu.be",
					"zzlsbhhfvwg3oh36tcvx4r7n6jrw7zibvyvfxqlodcwn3mfrvzuq.b32.i2p"
				],
				"nitter": [
					"bird.habedieeh.re", "nitter.holo-mix.com", "nitter.io.lol", "nitter.kavin.rocks", "nitter.kylrth.com", "nitter.lucabased.xyz", "nitter.lunar.icu",
					"nitter.moomoo.me", "nitter.net", "nitter.poast.org", "nitter.privacydev.net", "nitter.priv.loki", "nitter.qwik.space", "nitter.rawbit.ninja",
					"nitter.tiekoetter.com", "twitit.gq", "xcancel.com", "xnaas.github.io",

					"4kzgzonccxuv4ctforjqx565jgd4bocgnzsy3dg4fmdf3ye2iciq.b32.i2p", "axd6uavsstsrvstva4mzlzh4ct76rc6zdug3nxdgeitrzczhzf4q.b32.i2p",
					"gseczlzmiv23p5vhsktyd7whquq2uy3c5fgkmdohh453qp3daoua.b32.i2p", "pjsfs4ukb6prmfx3qx3a5ef2cpcupkvcrxdh72kqn2rxc2cw4nka.b32.i2p",
					"pxrhfmieeeqdu5pi4duscycsxqefqphaxgvvrvdtc3ckqn2mcora.b32.i2p", "tm4rwkeysv3zz3q5yacyr4rlmca2c4etkdobfvuqzt6vsfsu4weq.b32.i2p",
					"u6ikd6zndl3c4dsdq4mmujpntgeevdk5qzkfb57r4tnfeccrn2qa.b32.i2p", "vernzdedoxuflrrxc4vbatbkpjh4k22ecgiqgimdiif62onhagva.b32.i2p",

					        "26oq3gioiwcmfojub37nz5gzbkdiqp7fue5kvye7d4txv4ny6fb4wwid.onion",        "4g47cxugkohbweao2x66nnxxfoe3k7gdfzxej537nhdbwr522sbjxeqd.onion",
					        "6g7w5lt6qcidh6vtue64udzld2mjnvxlpgddvn34qywxafxdv6a3w5id.onion",        "aaaaaxx74hbzeibageieowryhsqvimbdiitfkfe47tvgawkwkjh3coqd.onion",
					"twitter.ap3jtgssd7qn4vfoa62gi2ijddoblslbeuw5dan3xt7myvqpura5i4qd.onion", "nitter.catsarchywsyuss6jdxlypsw5dc7owd5u5tr6bujxb7o6xw2hipqehyd.onion",
					"twitter.cepyxplublbyw2f4axy4pyztfbxmf63lrt2c7uwv6wl4iixz53czload.onion",        "ckzuw5misyahmg7j5t5xwwuj3bwy62jfolxyux4brfflramzsvvd3syd.onion",
					 "nitter.coffee2m3bjsrrqqycx6ghkxrnejl2q6nl7pjw2j4clchjj6uk5zozad.onion", "nitter.daturab6drmkhyeia4ch5gvfc2f3wgo6bhjrv3pz6n7kxmvoznlkq4yd.onion",
					        "ec5nvbycpfa5k6ro77blxgkyrzbkv7uy6r5cngcbkadtjj2733nm3uyd.onion",        "erpnncl5nhyji3c32dcfmztujtl3xaddqb457jsbkulq24zqq7ifdgad.onion",
					 "nitter.esmail5pdn24shtvieloeedh7ehz3nrwcdivnfhfcedl7gf4kwddhkqd.onion",        "fbdi323aj3t6hdx4jtkuwxrnafzskquciowu2yu3jizfssaq35aow6ad.onion",
					 "nitter.g4c3eya4clenolymqbpgwz3q3tawoxw56yhzk4vugqrl6dtu3ejvhjid.onion",   "bird.habeehrhadazsw3izbrbilqajalfyqqln54mrja3iwpqxgcuxnus7eid.onion",
					        "i23nv6w3juvzlw32xzoxcqzktegd4i4fu3nmnc2ewv4ggiu4ledwklad.onion",        "ibsboeui2im5o7dxnik3s5yghufumgy5abevtij5nbizequfpu4qi4ad.onion",
					        "iwgu3cv7ywf3gssed5iqtavmrlszgsxazkmwwnt4h2kdait75thdyrqd.onion",        "jebqj47jgxleaiosfcxfibx2xdahjettuydlxbg64azd4khsxv6kawid.onion",
					 "nitter.l4qlywnpwqsluw65ts7md3khrivpirse744un3x7mlskqauz5pyuzgqd.onion", "nitter.micohauwkjbyw5meacrb4ipicwvwg4xtzl7y7viv53kig2mdcsvwkyyd.onion",
					        "nitraeju2mipeziu2wtcrqsxg7h62v5y4eqgwi75uprynkj74gevvuqd.onion",        "nitter7bryz3jv7e3uekphigvmoyoem4al3fynerxkj22dmoxoq553qd.onion",
					        "npf37k3mtzwxreiw52ccs5ay4e6qt2fkcs2ndieurdyn2cuzzsfyfvid.onion",        "nttr2iupbb6fazdpr2rgbooon2tzbbsvvkagkgkwohhodjzj43stxhad.onion",
					 "nitter.pjsfkvpxlinjamtawaksbnnaqs2fc2mtvmozrzckxh7f3kis6yea25ad.onion", "nitter.privpw3tndpkw6pnp3g727zfgfdzbu3k6a7chv226s3xymv2p4eiuqyd.onion",
					"twitter.prnoid54e44a4bduq5due64jkk7wcnkxcp5kv3juncm7veptjcqudgyd.onion",        "qwikxx2erhx6qrymued6ox2qkf2yeogjwypqvzoif4fqkljixasr6oid.onion",
					        "r2eqimhkvxboaltbdsectoo3hkf476pyemsdykclexzajbfx5v6ojlyd.onion",      "n.sneed4fmhevap3ci4xhf4wgkf72lwk275lcgomnfgwniwmqvaxyluuid.onion",
					 "nitter.v6vgyqpa7yefkorazmg5d5fimstmvm2vtbirt6676mt7qmllrcnwycqd.onion",     "nt.vernccvbvyi5qhfzyqengccj7lkove6bjot2xhh5kajhwvidqafczrad.onion",
					        "vfaomgh4jxphpbdfizkm5gbtjahmei234giqj4facbwhrfjtcldauqad.onion",        "wiio4sgs4247brk7hj6qck2jxnvldwfdbguigc5ivpxrsegnliyfvuqd.onion"
				],

				"alibaba": ["1688.com", "alibaba.com", "aliexpress.com"],
				"bluesky": ["bsky.app"],
				"discord_external": [
					"images-ext-1.discordapp.net", "images-ext-2.discordapp.net", "images-ext-3.discordapp.net", "images-ext-4.discordapp.net", "images-ext-5.discordapp.net"
				],
				"disney": ["disney.com", "marvel.com"],
				"furaffinity": ["furaffinity.net", "sfw.furaffinity.net"],
				"instagram": ["instagram.com", "threads.com", "threads.net"],
				"lmgtfy": ["letmegoogleforyou.com", "letmegooglethat.com", "lmgt.org", "lmgtfy.app", "lmgtfy.click", "lmgtfy.com"],
				"twitter": ["twitter.com", "x.com"]
			},



			"rd_www_subdomain": {
				"ensure": [
					"1688.com", "9news.com.au", "acer.com", "alibaba.com", "amtrak.com", "apple.co", "apple.com", "atom.bio", "bbc.com", "bell.ca", "boycat.io",
					"browserstack.com", "cbc.ca", "cbsnews.com", "change.org", "cnbc.com", "cnn.com", "crunchyroll.com", "deviantart.com", "disney.com", "dw.com", "facebook.com",
					"fandom.com", "fiverr.com", "furaffinity.net", "go.com", "gofundme.com", "goodreads.com", "history.com", "hp.com", "hulu.com", "iana.org", "icloud.com",
					"instagram.com", "lego.com", "lenovo.com", "linkr.it", "loblaws.ca", "marvel.com", "mediafire.com", "minds.com", "mozilla.org", "nature.com", "nytimes.com",
					"patreon.com", "phoronix.com", "pixiv.net", "proozy.com", "razer.com", "reddit.com", "shareasale.com", "shorturl.at", "snapchat.com", "spotify.com",
					"sub2get.com", "teepublic.com", "tesla.com", "theguardian.com", "threads.com", "tiktok.com", "torproject.org", "tribler.org", "tumblr.com", "twitch.tv",
					"unlock.com", "washingtonpost.com", "xiaohongshu.com", "yahoo.com", "youtube.com"
				],
				"remove": [
					"a.co", "adfoc.us", "allmylinks.com", "antifandom.com", "apexgamingpcs.com", "bambulab.com", "beacons.ai", "bit.ly", "bitly.com", "bityl.co", "boost.ink",
					"boosty.to", "booth.pm", "breezewiki.com", "buymeacoffee.com", "bw.artemislena.eu", "bw.hamstro.dev", "carleton.ca", "carrd.co", "cash.app", "cutt.ly",
					"dis.gd", "drinkctrl.com", "drive.google.com", "duckduckgo.com", "fansly.com", "flip.it", "g.co", "gelbooru.com", "gum.co", "href.li", "inkbunny.net",
					"invidious.nerdvpn.de", "linktr.ee", "lmddgtfy.net", "lmgtfy2.com", "loom.ly", "mboost.me", "metafy.gg", "nitter.net", "nitter.tiekoetter.com", "onlyfans.com",
					"pawoo.net", "qudsnen.co", "shor.tf", "sketchfab.com", "smartadserver.com", "socialwolvez.com", "stackoverflow.com", "steamcommunity.com", "sub2unlock.io",
					"sub4unlock.io", "subscribestar.adult", "substack.com", "supernote.com", "support.google.com", "theonion.com", "throne.com", "tinyurl.com", "t.ly",
					"toyhou.se", "twitter.com", "unes.co", "visitlink.me", "vk.com", "xcancel.com", "x.com", "yewtu.be", "zionism.observer", "z.opnxng.com"
				]
			},
			"dm_www_subdomain": {
				"ensure": ["amazon", "google"],
				"remove": []
			},



			"dm_expand_mode": {
				"redirect": [],
				"special": ["google"]
			},
			"nh_expand_mode": {
				"bypass_vip": [
					"adfoc.us", "admiregirls-byme.com", "all-fans.online", "badgirlsdrop.com", "bit.do", "booo.st", "boost.ink", "bst.gg", "cemendemons.com", "depravityweb.co",
					"fansmega.com", "free-leaks.com", "goldmega.online", "hotstars-leaks.com", "leakutopia.site", "links-loot.com", "linksloot.net", "linkvertise.com",
					"lootdest.com", "lootdest.info", "lootdest.org", "loot-link.com", "lootlink.org", "lootlinks.co", "loot-links.com", "mboost.me", "megadropz.com",
					"megadumpz.com", "mega-guy.com", "newsociety0.co", "ofpacksmega.com", "only-fun.xyz", "onlymega.co", "paster.so", "pnp-drops.me", "premiumstashdrop.com",
					"rareofhub.com", "rekonise.com", "secret-links.com", "secretpack-links.com", "socialwolvez.com", "st.news", "sub2get.com", "sub2unlock.com", "sub2unlock.io",
					"sub2unlock.net", "sub4unlock.io", "tavernleaks.com", "thepremium.online", "tinylink.onl", "tomxcontent.com", "unlock.com", "unlocknow.net", "v.gd", "wc.wtf",
					"work.ink", "xprmpacks.com"
				],
				"redirect": [
					"2kgam.es", "4.nbcla.com", "a.aliexpress.com", "abc7.la", "abc7ne.ws", "abcnews.link", "ab.co", "a.co", "adobe.ly", "aje.io", "amzn.asia", "amzn.eu",
					"amzn.ew", "amzn.to", "anrdoezrs.net", "api.link.agorapulse.com", "apple.co", "b23.tv", "bbc.in", "bgfn.sh", "bitly.com", "bityl.co", "blizz.ly",
					"blockclubchi.co", "bloom.bg", "boxd.it", "buff.ly", "bzfd.it", "cbr.sh", "cbsn.ws", "cfl.re", "chn.ge", "chng.it", "clckhl.co", "click.linksynergy.com",
					"cnb.cx", "cnn.it", "cons.lv", "cos.lv", "cp2077.ly", "cutt.ly", "db.tt", "dcdr.me", "diplo.de", "dis.gd", "dlvr.it", "econ.st", "etsy.me", "fal.cn",
					"fanga.me", "fb.me", "fdip.fr", "flip.it", "forms.gle", "g.co", "glo.bo", "go.forbes.com", "gofund.me", "go.icj-cij.org", "go.microsoft.com", "go.nasa.gov",
					"go.nature.com", "goodsmile.link", "goo.gl", "goo.gle", "goo.su", "got.cr", "go.undp.org", "gum.co", "hmstr.fr", "hulu.tv", "ift.tt", "ind.pd", "intel.ly",
					"interc.pt", "is.gd", "iwe.one", "jbgm.es", "j.mp", "k00.fr", "katy.to", "kck.st", "kre.pe", "l8r.it", "l.euronews.com", "line.ee", "link.animaapp.com",
					"link.chtbl.com", "linkr.it", "l.leparisien.fr", "lnkd.in", "loom.ly", "lpc.ca", "mol.im", "mply.io", "m.sesame.org", "msft.it", "msi.gm", "mzl.la", "nas.cr",
					"nbc4i.co", "nine.social", "ninten.do", "n.opn.tl", "n.pr", "ntdo.co.uk", "nvda.ws", "nyer.cm", "nyp.st", "ny.ti", "nyti.ms", "nyto.ms", "ojrq.net",
					"on.forbes.com", "on.ft.com", "onl.bz", "onl.la", "onl.sc", "onl.tw", "on.msnbc.com", "on.nyc.gov", "on.wsj.com", "operagx.gg", "orlo.uk", "ow.ly",
					"peoplem.ag", "perfht.ml", "pin.it", "pixiv.me", "play.st", "pl.go-ga.me", "politi.co", "prn.to", "propub.li", "pulse.ly", "py.pl", "qr1.be", "qr.paps.jp",
					"rb.gy", "rblx.co", "rdbl.co", "rdcu.be", "rebrand.ly", "redd.it", "redirect.global.commerce-connector.com", "reut.rs", "rog.gg", "rzr.to", "s76.co",
					"scim.ag", "s.goodsmile.link", "share.firefox.dev", "shor.tf", "shorturl.at", "sonic.frack.deals", "sou42.co", "spoti.fi", "spr.ly", "sqex.to", "square.link",
					"sta.sh", "s.team", "t2m.io", "theatln.tc", "thecut.io", "thef.pub", "thr.cm", "thrn.co", "tiny.cc", "tinylf.com", "t.ly", "tmblr.co", "tmz.me", "to.pbs.org",
					"tps.to", "tr.ee", "trib.al", "u.jd.com", "unes.co", "unf.pa", "uniceflink.org", "uni.cf", "visitlink.me", "vm.tiktok.com", "wlgrn.com", "wlo.link", "wn.nr",
					"wp.me", "wwdc.io", "w.wiki", "x.alibaba.com", "xbx.ly", "x.gd", "xhslink.com", "yrp.ca", "zurl.co", "flyac.ca"
				],
				"sometimes_redirect": [
					"apexpartner.app", "api.pinterest.com", "facebook.com", "old.reddit.com", "pawoo.net", "qudsnen.co", "reddit.com", "sketchfab.com", "teepublic.com", "snapchat.com"
				],
				"special": [
					"1link.club", "affiliate.xp-pen.com", "allmylinks.com", "api.linkr.bio", "api.linkr.com", "app.adjust.com", "awin1.com", "bfy.tw", "bit.ly", "bugzil.la",
					"buymeacoff.ee", "cach.me", "cj.dotomi.com", "click.notification.elsevier.com", "deviantart.com", "drinkctrl.com", "duckduckgo.com",
					"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion", "e.emailalerts.cnn.com", "emjcd.com", "e.newsletters.cnn.com", "fans.ly", "fansly.com",
					"fiverr.com", "go.bsky.app", "goodreads.com", "go.shopyourlikes.com", "go.skimresources.com", "gprivate.com", "gznmedia.go2cloud.org", "href.li", "instagr.am",
					"lego.com", "li.cnn.com", "link.blissy.com", "linkprotect.cudasvc.com", "l.instagram.com", "lmddgtfy.net", "lmgtfy2.com", "lnk.bio", "l.threads.com", "mfy.gg",
					"o93x.net", "open-api.tiktok.com", "open.substack.com", "out.reddit.com", "pixiv.net", "p.liadm.com", "preview.tinyurl.com", "proxy.notsobot.com",
					"rd.bizrate.com", "rd.goodreads.com", "redirect.viglink.com", "reurl.cc", "ro.blox.com", "shareasale-analytics.com", "shareasale.com", "skfb.ly",
					"smarturl.it", "spotify.link", "ss3.shipstation.com", "steamcommunity.com", "subscribestar.adult", "substack.com", "t.co", "tee.pub", "tinyurl.com",
					"toyhou.se", "t.umblr.com", "twpf.jp", "urldefense.com", "youtube.com"
				]
			},
			"rd_expand_mode": {
				"redirect": ["a9yw.net", "adj.st", "goo.gl", "o93x.net", "page.link", "pusle.ly", "pxf.io", "visitlink.me"],
				"special": ["app.link", "carleton.ca", "dw.com", "fb.watch", "lnk.to", "onelink.me", "pulse.ly", "smartadserver.com", "vk.com"]
			}
		},
		"http_client_config": {
			"default_headers": {
				"user-agent": "Firefox",
				"sec-gpc": "1",
				"dnt": "1"
			},
			"referer": false,
			"redirect_policy": "None"
		}
	},
	"commons": {
		"actions": {
			"extract_from_page": {"If": {
				"if": {"FlagIsNotSet": "no_network"},
				"then": {"All": [
					{"Common": "universal"},
					{"SetWhole": {"Cache": {
						"subject": "redirect",
						"key": {"Part": "Whole"},
						"value": {"Modified": {
							"value": {"HttpRequest": {}},
							"modification": {"CommonCallArg": "extractor"}
						}}}
					}}
				]}
			}},



			"redirect_shortcut": {"If": {
				"if": {"All": [
					{"StringIsSome": {"Var": {"type": "TaskContext", "name": "redirect_shortcut"}}},
					{"StringIs": {
						"left" : {"JobSourceHostPart": "RegDomain"},
						"right": {"Var": {"type": "CommonArg", "name": "expected_rd"}}
					}},
					{"FlagIsNotSet": {"type": "Scratchpad", "name": "redirect_shortcut_used"}}
				]},
				"then": {"All": [
					{"SetWhole": {"Var": {"type": "TaskContext", "name": "redirect_shortcut"}}},
					{"SetScratchpadFlag": {"name": "redirect_shortcut_used", "value": true}}
				]},
				"else": {"If": {
					"if": {"FlagIsNotSet": "no_network"},
					"then": {"All": [
						{"Common": "universal"},
						"ExpandRedirect"
					]}
				}}
			}},



			"universal": {"All": [
				{"If": {
					"if": {"All": [
						{"SchemeIs": "http"},
						{"FlagIsNotSet": "keep_http"},
						{"Not": "HostIsIp"},
						{"Not": {"NormalizedHostIsInSet": "nh_keep_http"}}
					]},
					"then": {"SetScheme": "https"}
				}},
				{"RemoveQueryParamsInSetOrStartingWithAnyInList": {
					"set": "utps",
					"list": "utp_prefixes"
				}},
				{"ModifyPartIfSome": {
					"part": "Fragment",
					"modification": {"RemoveQueryParamsInSetOrStartingWithAnyInList": {
						"set": "utps",
						"list": "utp_prefixes"
					}}
				}},
				{"PartNamedPartitioning": {
					"part": "RegDomain",
					"named_partitioning": "rd_www_subdomain",
					"map": {
						"ensure": {"If": {
							"if": {"SubdomainIs": null},
							"then": {"SetSubdomain": "www"}
						}},
						"remove": {"If": {
							"if": {"SubdomainIs": "www"},
							"then": {"SetSubdomain": null}
						}}
					},
					"else": {"PartNamedPartitioning": {
						"part": "DomainMiddle",
						"named_partitioning": "dm_www_subdomain",
						"map": {
							"ensure": {"If": {
								"if": {"SubdomainIs": null},
								"then": {"SetSubdomain": "www"}
							}},
							"remove": {"If": {
								"if": {"SubdomainIs": "www"},
								"then": {"SetSubdomain": null}
							}}
						}
					}}
				}},
				{"If": {
					"if": "HostIsFqdn",
					"then": "RemoveFqdnPeriod"
				}},
				"RemoveEmptyQuery",
				"RemoveEmptyFragment"
			]},



			"url_from_query_param_or_query": {"FirstNotError": [
				{"GetUrlFromQueryParam": {"Var": {"type": "CommonArg", "name": "param"}}},
				{"CopyPart": {"from": "Query", "to": "Whole"}},
				{"SetWhole": {"Modified": {
					"value": {"Part": "Query"},
					"modification": "PercentDecode"
				}}}
			]}
		}
	},
	"actions": [
		{"If": {
			"if": {"All": [
				{"UrlIs": "javascript:void(0);"},
				{"StringIs": {
					"left": {"JobSourceHostPart": "RegDomain"},
					"right": "furaffinity.net"
				}},
				{"StringIs": {
					"left": {"Var": {"type": "TaskContext", "name": "contact_info_site_name"}},
					"right": "Website"
				}}
			]},
			"then": {"SetWhole": {"Join": {
				"values": ["https://", {"Var": {"type": "TaskContext", "name": "link_text"}}]
			}}}
		}},
		{"If": {
			"if": {"SchemeIsOneOf": ["http", "https"]},
			"then": {"All": [
				{"Repeat": {
					"actions": [
						{"PartNamedPartitioning": {
							"named_partitioning": "dm_expand_mode",
							"part": "DomainMiddle",
							"map": {
								"redirect": {"If": {
									"if": {"FlagIsNotSet": "no_network"},
									"then": {"All": [
										{"Common": "universal"},
										"ExpandRedirect"
									]}
								}},
								"special": {"PartMap": {
									"part": "DomainMiddle",
									"map": {
										"google": {"If": {
											"if": {"PathIs": "/url"},
											"then": {"GetUrlFromQueryParam": "q"}
										}}
									}
								}}
							}
						}},



						{"PartNamedPartitioning": {
							"named_partitioning": "rd_expand_mode",
							"part": "RegDomain",
							"map": {
								"redirect": {"If": {
									"if": {"FlagIsNotSet": "no_network"},
									"then": {"All": [
										{"Common": "universal"},
										"ExpandRedirect"
									]}
								}},
								"special": {"PartMap": {
									"part": "RegDomain",
									"map": {
										"app.link": {"All": [
											"RemoveQuery",
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													{"ExpandRedirect": {
														"headers": {
															"User-Agent": "curl/8.12.1"
														}
													}}
												]}
											}}
										]},
										"carleton.ca": {"If": {
											"if": {"QueryParamIs": {"param": "action", "value": "redirect"}},
											"then": {"GetUrlFromQueryParam": "url"}
										}},
										"dw.com": {"If": {
											"if": {"All": [
												{"PathStartsWith": "/p/"},
												{"FlagIsNotSet": "no_network"}
											]},
											"then": {"All": [
												{"SetHost": "www.dw.com"},
												{"Common": "universal"},
												"ExpandRedirect"
											]}
										}},
										"fb.watch": {"All": [
											{"RemoveQueryParams": ["mibextid", "ref", "share_url"]},
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"lnk.to": {"Common": {
											"name": "extract_from_page",
											"args": {
												"string_modifications": {
													"extractor": {"All": [
														{"KeepAfter": "\"originalUrl\":"},
														{"TryElse": {
															"try": "GetJsStringLiteralPrefix",
															"else": {"Set": {"Part": "Whole"}}
														}}
													]}
												}
											}
										}},
										"onelink.me": {"All": [
											"RemoveQuery",
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"pulse.ly": {"If": {
											"if": {"FlagIsNotSet": "no_network"},
											"then": {"ExpandRedirect": {
												"url": {"Join": {"values": [
													"https://api.link.agorapulse.com/redirect",
													{"Part": "Path"}
												]}}
											}}
										}},
										"smartadserver.com": {"If": {
											"if": {"PathIs": "/click"},
											"then": {"GetUrlFromQueryParam": "go"}
										}},
										"vk.com": {"If": {
											"if": {"PathIs": "/away.php"},
											"then": {"GetUrlFromQueryParam": "to"}
										}}
									},
									"else": {"Error": "Unhandled rd_expand_mode::special element."}
								}}
							}
						}},



						{"PartNamedPartitioning": {
							"named_partitioning": "nh_expand_mode",
							"part": "NormalizedHost",
							"map": {
								"bypass_vip": {"If": {
									"if": {"All": [
										{"FlagIsSet": "bypass_vip"},
										{"FlagIsNotSet": "no_network"}
									]},
									"then": {"All": [
										{"Common": "universal"},
										{"CacheUrl": {
											"subject": "redirect",
											"action": {"SetWhole": {"Modified": {
												"value": {"HttpRequest": {
													"url": {"Join": {
														"values": [
															{"IfNone": {
																"value": {"NoneTo": {
																	"value": {"Var": "bypass_vip_api_key"},
																	"if_none": {"Var": {"type": "Env", "name": "URL_CLEANER_BYPASS_VIP_API_KEY"}}
																}},
																"then": "https://api.bypass.vip/bypass?url=",
																"else": "https://api.bypass.vip/premium/bypass?url="
															}},
															{"Modified": {"value": {"Part": "Whole"}, "modification": "PercentEncode"}}
														]
													}},
													"headers": {
														"x-api-key": {"NoneTo": {
															"value": {"Var": "bypass_vip_api_key"},
															"if_none": {"Var": {"type": "Env", "name": "URL_CLEANER_BYPASS_VIP_API_KEY"}}
														}}
													}
												}},
												"modification": {"JsonPointer": "/result"}
											}}}
										}}
									]}
								}},
								"redirect": {"If": {
									"if": {"FlagIsNotSet": "no_network"},
									"then": {"All": [
										{"Common": "universal"},
										"ExpandRedirect"
									]}
								}},
								"sometimes_redirect": {"If": {
									"if": {"All": [
										{"FlagIsNotSet": "no_network"},
										{"PartMap": {
											"part": "NormalizedHost",
											"map": {
												"apexpartner.app"  : {"PathStartsWith": "/redirect/"},
												"api.pinterest.com": {"PathStartsWith": "/url_shortener/"},
												"facebook.com"     : {"PathStartsWith": "/share/"},
												"old.reddit.com"   : {"PartContains": {"part": "Path", "value": "/s/", "at": {"After": 0}}},
												"pawoo.net"        : {"PathStartsWith": "/oauth_authentications/"},
												"qudsnen.co"       : {"HasQueryParam": "p"},
												"reddit.com"       : {"PartContains": {"part": "Path", "value": "/s/", "at": {"After": 0}}},
												"sketchfab.com"    : {"PathStartsWith": "/s/"},
												"teepublic.com"    : {"PathStartsWith": "/lic/"},
												"snapchat.com"     : {"PathStartsWith": "/t/"}
											},
											"else": {"Error": "Unhandled nh_expand_mode::sometimes_redirect element."}
										}}
									]},
									"then": {"All": [
										{"Common": "universal"},
										"ExpandRedirect"
									]}
								}},
								"special": {"PartMap": {
									"part": "NormalizedHost",
									"map": {
										"1link.club": {"Common": {
											"name": "extract_from_page",
											"args": {
												"string_modifications": {
													"extractor": {"All": [
														{"StripBefore": "<a id=\"download\""},
														{"GetHtmlAttribute": "href"}
													]}
												}
											}
										}},
										"affiliate.xp-pen.com": {"All": [
											{"If": {
												"if": {"FlagIsNotSet": "keep_affiliate"},
												"then": {"RemoveQueryParam": "a_aid"}
											}},
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"allmylinks.com": {"If": {
											"if": {"PathIs": "/link/out"},
											"then": {"Common": {
												"name": "redirect_shortcut",
												"args": {"vars": {"expected_rd": "allmylinks.com"}}
											}}
										}},
										"api.linkr.bio": {"If": {
											"if": {"PathIs": "/callbacks/go"},
											"then": {"GetUrlFromQueryParam": "url"}
										}},
										"api.linkr.com": {"If": {
											"if": {"PathIs": "/callbacks/go"},
											"then": {"GetUrlFromQueryParam": "url"}
										}},
										"app.adjust.com": {"All": [
											"RemoveQuery",
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"awin1.com": {"If": {
											"if": {"PathIs": "/cread.php"},
											"then": {"TryElse": {
												"try": {"GetUrlFromQueryParam": "ued"},
												"else": {"If": {
													"if": {"FlagIsNotSet": "no_network"},
													"then": {"All": [
														{"Common": "universal"},
														"ExpandRedirect",
														{"RemoveQueryParamsMatching": {"Any": [
															{"IsOneOf": ["source", "awc", "sv1", "sv_campaign_id"]},
															{"StartsWith": "awin_"}
														]}}
													]}
												}}
											}}
										}},
										"bfy.tw": {"Common": {
											"name": "extract_from_page",
											"args": {
												"string_modifications": {
													"extractor": {"All": [
														{"StripBefore": "<a href="},
														{"GetHtmlAttribute": "href"}
													]}
												}
											}
										}},
										"bit.ly": {"If": {
											"if": {"HasPathSegment": 1},
											"then": {"All": [
												"RemoveQuery",
												{"Common": "universal"},
												"ExpandRedirect"
											]}
										}},
										"bugzil.la": {"All": [
											{"SetHost": "bugzilla.mozilla.org"},
											{"If": {
												"if": {"Not": {"PathIs": "/"}},
												"then": {"All": [
													{"If": {
														"if": {"PartMatches": {"part": {"PathSegment": 0}, "matcher": {"AllCharsAreOneOf": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]}}},
														"then": {"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "id"}}},
														"else": {"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "quicksearch"}}}
													}},
													{"SetPath": "/show_bug.cgi"}
												]}
											}}
										]},
										"buymeacoff.ee": {"SetHost": "buymeacoffee.com"},
										"cash.me": {"SetHost": "cash.app"},
										"cj.dotomi.com": {"All": [
											"RemoveQuery",
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"click.notification.elsevier.com": {"If": {
											"if": {"PathStartsWith": "/CL0/"},
											"then": {"SetWhole": {"Modified": {
												"value": {"Part": "Path"},
												"modification": {"All": [
													{"KeepSegmentRange": {"split": "/", "start": 2, "end": -3}},
													"PercentDecode"
												]}
											}}}
										}},
										"deviantart.com": {"If": {
											"if": {"PathIs": "/users/outgoing"},
											"then": {"Common": {
												"name": "url_from_query_param_or_query",
												"args": {"vars": {"param": "url"}}
											}}
										}},
										"drinkctrl.com": {"If": {
											"if": {"All": [
												{"PathStartsWith": "/discount/"},
												{"FlagIsNotSet": "keep_affiliate"}
											]},
											"then": {"All": [
												{"SetPath": {"NoneTo": {
													"value": {"Part": {"QueryParam": "redirect"}},
													"if_none": "/"
												}}},
												"RemoveQuery"
											]}
										}},
										"duckduckgo.com": {"If": {
											"if": {"PathIs": "/l/"},
											"then": {"GetUrlFromQueryParam": "uddg"}
										}},
										"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"If": {
											"if": {"PathIs": "/l/"},
											"then": {"GetUrlFromQueryParam": "uddg"}
										}},
										"e.emailalerts.cnn.com": {"SetWhole": {"Modified": {
											"value": {"Part": "Query"},
											"modification": {"IfMatches": {
												"matcher": {"HasSegment": {"split": "/", "index": 8}},
												"then": {"KeepModifiedSegments": {
													"split": "/",
													"indices": [2, 5],
													"modification": {"All": [
														{"RemoveChar": 0},
														"Base64Decode"
													]},
													"join": ""
												}},
												"else": {"All": [
													{"KeepSegment": {"split": "/", "index": 2}},
													{"RemoveChar": 0},
													"Base64Decode"
												]}
											}}
										}}},
										"e.newsletters.cnn.com": {"SetWhole": {"Modified": {
											"value": {"Part": "Query"},
											"modification": {"IfMatches": {
												"matcher": {"HasSegment": {"split": "/", "index": 8}},
												"then": {"KeepModifiedSegments": {
													"split": "/",
													"indices": [2, 5],
													"modification": {"All": [
														{"RemoveChar": 0},
														"Base64Decode"
													]},
													"join": ""
												}},
												"else": {"All": [
													{"KeepSegment": {"split": "/", "index": 2}},
													{"RemoveChar": 0},
													"Base64Decode"
												]}
											}}
										}}},
										"emjcd.com": {"All": [
											"RemoveQuery",
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"fans.ly": {"SetHost": "fansly.com"},
										"fansly.com": {"If": {
											"if": {"PathIs": "/redirect/external"},
											"then": {"GetUrlFromQueryParam": "url"}
										}},
										"fiverr.com": {"If": {
											"if": {"PathSegmentIsOneOf": {
												"index": 0,
												"values": ["s", "share"]
											}},
											"then": {"ExpandRedirect": {
												"url": {"Join": {
													"values": [
														"https://www.fiverr.com/s/",
														{"Part": {"PathSegment": 1}}
													]
												}}
											}}
										}},
										"go.bsky.app": {"TryElse": {
											"try": {"GetUrlFromQueryParam": "u"},
											"else": {"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										}},
										"go.shopyourlikes.com": {"If": {
											"if": {"PathSegmentIs": {
												"index": 0,
												"value": "pi"
											}},
											"then": {"All": [
												{"AllowQueryParam": "afId"},
												"ExpandRedirect"
											]}
										}},
										"go.skimresources.com": {"GetUrlFromQueryParam": "url"},
										"gznmedia.go2cloud.org": {"All": [
											{"AllowQueryParams": ["campaign_id", "aff_id", "aff_sub2"]},
											{"ExpandRedirect": {
												"headers": {
													"user-agent": "FireFox"
												}
											}}
										]},
										"goodreads.com": {"If": {
											"if": {"PathIs": "/gp/r.html"},
											"then": {"GetUrlFromQueryParam": "U"}
										}},
										"gprivate.com": {"Common": {
											"name": "extract_from_page",
											"args": {
												"string_modifications": {
													"extractor": {"All": [
														{"KeepAfter": "window.location = "},
														"GetJsStringLiteralPrefix"
													]}
												}
											}
										}},
										"href.li": {"SetWhole": {"Part": {"PositionRange": {"start": "BeforeQuery", "end": "AfterFragment"}}}},
										"instagr.am": {"SetHost": "www.instagram.com"},
										"l.instagram.com": {"GetUrlFromQueryParam": "u"},
										"l.threads.com": {"GetUrlFromQueryParam": "u"},
										"lego.com": {"If": {
											"if": {"All": [
												{"PathIs": "/rakuten"},
												{"StringIs": {
													"left": {"ExtractPart": {
														"value": {"Part": {"QueryParam": "url"}},
														"part": "RegDomain"
													}},
													"right": "lego.com"
												}}
											]},
											"then": {"GetUrlFromQueryParam": "url"}
										}},
										"li.cnn.com": {"All": [
											{"AllowQueryParams": ["s", "e", "p"]},
											{"SetQueryParam": {
												"query_param": "bt_ts",
												"value": "1000"
											}},
											{"If": {
												"if": {"FlagIsSet": "expand_dangerous_redirects"},
												"then": "ExpandRedirect"
											}}
										]},
										"link.blissy.com": {"SetHost": "gznmedia.go2cloud.org"},
										"linkprotect.cudasvc.com": {"GetUrlFromQueryParam": "a"},
										"lmddgtfy.net": {"SetHost": "duckduckgo.com"},
										"lmgtfy2.com": {"If": {
											"if": {"Not": {"QueryParamIs": {"param": "q", "value": null}}},
											"then": {"SetWhole": {"Modified": {
												"value": {"Map": {
													"value": {"Part": {"QueryParam": "s"}},
													"map": {
														"g": {"Map": {
															"value": {"Part": {"QueryParam": "t"}},
															"map": {
																"w" : "https://google.com/search?q=",
																"i" : "https://google.com/search?tbm=isch&q=",
																"v" : "https://google.com/search?tbm=vid&q=",
																"m" : "https://google.com/maps?q=",
																"n" : "https://google.com/search?tbm=nws&q=",
																"s" : "https://google.com/search?tbm=shop&q=",
																"b" : "https://google.com/search?tbm=bks&q=",
																"f" : "https://google.com/finance?q=",
																"sc": "https://scholar.google.com/scholar?q="
															},
															"if_none": "https://www.google.com/search?q="
														}},
														"c": "https://chat.openai.com/search?q=",
														"b": "https://startpage.com/search?q=",
														"y": "https://search.yahoo.com/search?q=",
														"d": "https://duckduckgo.com/?q=",
														"k": "https://ask.com/web?q=",
														"a": "https://search.aol.com/aol/search?q=",
														"w": "https://wikipedia.org/w/index.php?search=",
														"s": "https://snopes.com/search/?q="
													}
												}},
												"modification": {"Append": {"Part": {"QueryParam": "q"}}}
											}}}
										}},
										"lnk.bio": {"If": {
											"if": {"PathIs": "/go"},
											"then": {"GetUrlFromQueryParam": "d"}
										}},
										"mfy.gg": {"SetHost": "metafy.gg"},
										"o93x.net": {"GetUrlFromQueryParam": "u"},
										"open-api.tiktok.com": {"All": [
											{"AllowQueryParam": "open_id"},
											{"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"All": [
													{"Common": "universal"},
													"ExpandRedirect"
												]}
											}}
										]},
										"open.substack.com": {"If": {
											"if": {"PathStartsWith": "/pub/"},
											"then": {"All": [
												{"CopyPart": {"from": {"PathSegment": 1}, "to": "Subdomain"}},
												{"RemoveFirstNPathSegments": 2}
											]}
										}},
										"out.reddit.com": {"GetUrlFromQueryParam": "url"},
										"p.liadm.com": {"All": [
											{"AllowQueryParams": ["p", "s", "m", "sh2", "sh"]},
											{"If": {
												"if": {"FlagIsSet": "expand_dangerous_redirects"},
												"then": "ExpandRedirect"
											}}
										]},
										"pixiv.net": {"If": {
											"if": {"PathIs": "/jump.php"},
											"then": {"Common": {
												"name": "url_from_query_param_or_query",
												"args": {"vars": {"param": "url"}}
											}}
										}},
										"preview.tinyurl.com": {"SetWhole": {"Join": {
											"values": [
												"https://tinyurl.com/preview",
												{"Part": "Path"}
											]
										}}},
										"proxy.notsobot.com": {"GetUrlFromQueryParam": "url"},
										"rd.bizrate.com": {"If": {
											"if": {"PathIs": "/rd2"},
											"then": {"GetUrlFromQueryParam": "t"}
										}},
										"rd.goodreads.com": {"If": {
											"if": {"PathIs": "/gp/r.html"},
											"then": {"GetUrlFromQueryParam": "U"}
										}},
										"redirect.viglink.com": {"TryElse": {
											"try": {"GetUrlFromQueryParam": "u"},
											"else": {"GetUrlFromQueryParam": "out"}
										}},
										"reurl.cc": {"CacheUrl": {
											"subject": "redirect",
											"action": {"If": {
												"if": {"FlagIsNotSet": "no_network"},
												"then": {"SetWhole": {"HttpRequest": {"response_handler": {"Header": "target"}}}}
											}}
										}},
										"ro.blox.com": {"GetUrlFromQueryParam": "af_web_dp"},
										"shareasale-analytics.com": {"If": {
											"if": {"PartContains": {"part": "Path", "value": ".cfm", "at": "End"}},
											"then": {"FirstNotError": [
												{"SetWhole": {"Modified": {
													"value": {"Part": {"QueryParam": "urllink"}},
													"modification": {"All": [
														{"StripMaybePrefix": "http://"},
														{"StripMaybePrefix": "https://"},
														{"Insert": {"index": 0, "value": "https://"}}
													]}
												}}},
												{"All": [
													{"AllowQueryParams": ["d", "b", "u", "m"]},
													{"Common": {
														"name": "extract_from_page",
														"args": {
															"string_modifications": {
																"extractor": {"All": [
																	{"KeepAfter": "replace("},
																	"GetJsStringLiteralPrefix"
																]}
															}
														}
													}}
												]}
											]}
										}},
										"shareasale.com": {"If": {
											"if": {"PartContains": {"part": "Path", "value": ".cfm", "at": "End"}},
											"then": {"FirstNotError": [
												{"SetWhole": {"Modified": {
													"value": {"Part": {"QueryParam": "urllink"}},
													"modification": {"IfContainsAny": {
														"values": ["https://", "http://"],
														"at": "Start",
														"then": "None",
														"else": {"Insert": {
															"value": "https://",
															"index": 0
														}}
													}}
												}}},
												{"All": [
													{"SetHost": "shareasale-analytics.com"},
													{"AllowQueryParams": ["d", "b", "u", "m"]},
													{"Common": {
														"name": "extract_from_page",
														"args": {
															"string_modifications": {
																"extractor": {"All": [
																	{"KeepAfter": "replace("},
																	"GetJsStringLiteralPrefix"
																]}
															}
														}
													}}
												]}
											]}
										}},
										"skfb.ly": {"All": [
											{"SetHost": "sketchfab.com"},
											{"InsertPathSegmentAt": {"index": 0, "value": "s"}}
										]},
										"smarturl.it": {"Common": {
											"name": "extract_from_page",
											"args": {
												"string_modifications": {
													"extractor": {"All": [
														{"KeepAfter": "\"originalUrl\":"},
														"GetJsStringLiteralPrefix"
													]}
												}
											}
										}},
										"spotify.link": {"SetHost": "spotify.app.link"},
										"ss3.shipstation.com": {"SetWhole": {"Join": {
											"values": [
												"https://",
												{"Modified": {
													"value": {"Part": "Whole"},
													"modification": {"StripPrefix": "https://ss3.shipstation.com/"}
												}}
											]
										}}},
										"steamcommunity.com": {"If": {
											"if": {"PathStartsWith": "/linkfilter"},
											"then": {"GetUrlFromQueryParam": "u"}
										}},
										"subscribestar.adult": {"If": {
											"if": {"PathIs": "/away"},
											"then": {"SetWhole": {"Modified": {
												"value": {"Part": {"QueryParam": "url"}},
												"modification": {"All": [
													{"ReplaceAll": {"find": "\n", "replace": ""}},
													"Base64Decode"
												]}
											}}}
										}},
										"substack.com": {"PartMap": {
											"part": {"PathSegment": 0},
											"map": {
												"p": {"RemoveQueryParam": "token"},
												"app-link": {"If": {
													"if": {"PathIs": "/app-link/post"},
													"then": {"AllowQueryParams": ["publication_id", "post_id", "submitLike", "action"]}
												}},
												"redirect": {"If": {
													"if": {"PathStartsWith": "/redirect/2/"},
													"then": {"SetWhole": {"Modified": {
														"value": {"Part": {"PathSegment": 2}},
														"modification": {"All": [
															{"KeepBefore": "."},
															"Base64Decode",
															{"JsonPointer": "/e"}
														]}
													}}},
													"else": {"All": [
														"RemoveQuery",
														{"If": {
															"if": {"FlagIsNotSet": "no_network"},
															"then": {"All": [
																{"Common": "universal"},
																"ExpandRedirect"
															]}
														}}
													]}
												}}
											}
										}},
										"t.co": {"Common": {
											"name": "redirect_shortcut",
											"args": {"vars": {"expected_rd": "x.com"}}
										}},
										"t.umblr.com": {"GetUrlFromQueryParam": "z"},
										"tee.pub": {"If": {
											"if": {"FlagIsNotSet": "no_network"},
											"then": {"All": [
												{"SetHost": "www.teepublic.com"},
												{"Common": "universal"},
												"ExpandRedirect"
											]}
										}},
										"tinyurl.com": {"All": [
											{"PartMap": {
												"part": {"PathSegment": 0},
												"map": {
													"preview": "None",
													"app": {"SetPathSegment": {"index": 0, "value": "preview"}}
												},
												"else": {"InsertPathSegmentAt": {"index": 0, "value": "preview"}}
											}},
											{"Common": {
												"name": "extract_from_page",
												"args": {
													"string_modifications": {
														"extractor": {"All": [
															{"KeepAfter": "let url = "},
															"GetJsStringLiteralPrefix"
														]}
													}
												}
											}}
										]},
										"toyhou.se": {"If": {
											"if": {"PathIs": "/~r"},
											"then": {"GetUrlFromQueryParam": "q"}
										}},
										"twpf.jp": {"If": {
											"if": {"PathIs": "/home/jump"},
											"then": {"SetWhole": {"Modified": {
												"value": {"Part": {"QueryParam": "p"}},
												"modification": "PercentDecode"
											}}}
										}},
										"urldefense.com": {"If": {
											"if": {"PathStartsWith": "/v3/"},
											"then": {"SetWhole": {"Modified": {
												"value": {"Part": "Whole"},
												"modification": {"All": [
													{"KeepSegmentRange": {"split": "__;", "end": -1}},
													{"KeepSegmentRange": {"split": "__", "start": 1}},
													{"ReplaceAll": {"find": "*", "replace": "%"}}
												]}
											}}}
										}},
										"youtube.com": {"If": {
											"if": {"PathIs": "/redirect"},
											"then": {"GetUrlFromQueryParam": "q"}
										}}
									},
									"else": {"Error": "Unhandled nh_expand_mode::special element."}
								}}
							}
						}},



						{"If": {
							"if": {"PathIs": "/page/email/redirect"},
							"then": {"All": [
								{"CopyPart": {"from": {"QueryParam": "campaignpageurl"}, "to": "Whole"}},
								{"RemoveQueryParam": "ea.url.id"}
							]}
						}}
					]
				}},



				{"If": {
					"if": {"All": [
						{"FlagIsSet": "unmobile"},
						{"Not": {"RegDomainIsInSet": "rd_keep_mobile"}}
					]},
					"then": {"All": [
						{"If": {
							"if": {"SubdomainSegmentIsOneOf": {"index": 0, "values": ["m", "mobile"]}},
							"then": {"SetSubdomainSegment": {"index": 0, "value": null}}
						}},
						{"If": {
							"if": {"SubdomainSegmentIsOneOf": {"index": 1, "values": ["m", "mobile"]}},
							"then": {"SetSubdomainSegment": {"index": 1, "value": null}}
						}}
					]}
				}},



				{"PartNamedPartitioning": {
					"named_partitioning": "nh_categories",
					"part": "NormalizedHost",
					"map": {
						"bluesky_embed_hosts": {"SetHost": "bsky.app"},
						"pixiv_embed_hosts": {"SetHost": "www.pixiv.net"},
						"twitter_embed_hosts": {"SetHost": "x.com"},

						"breezewiki": {"If": {
							"if": {"All": [
								{"FlagIsSet": "unbreezewiki"},
								{"Not": {"PathIs": "/"}}
							]},
							"then": {"All": [
								{"SetHost": {"Join": {
									"values": [{"Part": {"PathSegment": 0}}, ".fandom.com"]
								}}},
								{"PartMap": {
									"part": {"PathSegment": 1},
									"map": {
										"search": {"All": [
											{"SetPath": "/wiki/Special:Search"},
											{"SetQuery": {"Join": {
												"values": ["query=", {"Part": {"RawQueryParam": "q"}}]
											}}}
										]}
									},
									"else": {"TryElse": {
										"try": {"RemovePathSegment": 0},
										"else": {"SetPath": "/"}
									}}
								}}
							]},
							"else": {"SetHost": {"Var": "breezewiki_host"}}
						}},
						"invidious": {"If": {
							"if": {"All": [
								{"FlagIsSet": "uninvidious"},
								{"PathSegmentIsOneOf": {"index": 0, "values": ["channel", "search", "watch"]}}
							]},
							"then": {"SetHost": "www.youtube.com"},
							"else": {"SetHost": {"Var": "invidious_host"}}
						}},
						"nitter": {"If": {
							"if": {"All": [
								{"FlagIsSet": "unnitter"},
								{"Not": {"PathIs": "/"}}
							]},
							"then": {"SetHost": "x.com"},
							"else": {"SetHost": {"Var": "nitter_host"}}
						}},

						"alibaba": {"RemoveQueryParam": "spm"},
						"deviantart_embed_hosts": {"SetRegDomain": "deviantart.com"},
						"discord_external": {"If": {
							"if": {"FlagIsSet": "discord_unexternal"},
							"then": {"ModifyPart": {
								"part": "Whole",
								"modification": {"RegexReplaceOne": {"regex": ".+?/(https?)/([^/]+)/([^?#]+)", "replace": "$1://$2/$3"}}
							}}
						}},
						"disney": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
						"instagram": {"All": [
							{"RemoveQueryParams": ["igshid", "igsh", "xmt", "ig_mid", "e", "g", "hl"]},
							{"If": {
								"if": {"RegDomainIs": "threads.net"},
								"then": {"SetHost": "www.threads.com"}
							}}
						]},
						"lmgtfy": {"If": {
							"if": {"HasQueryParam": "q"},
							"then": {"SetWhole": {"Join": {
								"values": [
									"https://google.com/search?q=",
									{"Part": {"RawQueryParam": "q"}}
								]
							}}}
						}}
					}
				}},



				{"StringNamedPartitioning": {
					"named_partitioning": "nh_categories",
					"value": {"JobSourceHostPart": "NormalizedHost"},
					"map": {
						"alibaba": {"RemoveQueryParams": ["spm", "file"]},
						"bluesky": {"If": {
							"if": {"All": [
								{"PathStartsWith": "/profile/did:plc:"},
								{"StringIsSome": {"Var": {"type": "TaskContext", "name": "handle"}}}
							]},
							"then": {"SetPathSegment": {"index": 1, "value": {"Var": {"type": "TaskContext", "name": "handle"}}}}
						}},
						"furaffinity": {"If": {
							"if": {"StringIsSome": {"Var": {"type": "TaskContext", "name": "contact_info_site_name"}}},
							"then": {"SetWhole": {"Modified": {
								"value": {"Var": {"type": "TaskContext", "name": "link_text"}},
								"modification": {"Map": {
									"value": {"Modified": {"value": {"Var": {"type": "TaskContext", "name": "contact_info_site_name"}}, "modification": "Lowercase"}},
									"map": {
										"website"       : "None",
										"ao3"           : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)archiveofourown\\.org)?/?(?:users/)?@?([^/]+)"  , "replace": "https://archiveofourown.org/users/$1"}},
										"bluesky"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?bsky\\.app/profile)?/?@?([^/]+)$"              , "replace": "https://bsky.app/profile/$1"         }},
										"cara"          : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?cara\\.app)?/?@?([^/]+)/?$"                    , "replace": "https://cara.app/$1"                 }},
										"dealer's den"  : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?thedealersden\\.com/store)?/?@?([^/]+)$"       , "replace": "https://thedealersden.com/store/$1"  }},
										"deviantart"    : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?(?:([^.]+)\\.)?(?:deviantart\\.com)?/?@?([^/]*)$" , "replace": "https://deviantart.com/$1$2"         }},
										"etsy"          : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?etsy\\.com/shop)?/?@?([^/]+)$"                 , "replace": "https://etsy.com/shop/$1"            }},
										"facebook"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?facebook\\.com)?/?@?([^/]+)$"                  , "replace": "https://facebook.com/$1"             }},
										"fanfiction.net": {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?fanfiction\\.net)?/?(?:u?/)?@?([^/]+)/?$"      , "replace": "https://fanfiction.net/u/$1"         }},
										"furry network" : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?furrynetwork\\.com)?/?@?([^/]+)$"              , "replace": "https://furrynetwork.com/$1"         }},
										"inkbunny"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?inkbunny\\.net)?/?([^/]+)$"                    , "replace": "https://inkbunny.net/$1"             }},
										"itaku"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?itaku\\.ee/profile)?/?([^/]+)$"                , "replace": "https://itaku.ee/profile/$1"         }},
										"ko-fi"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?ko-fi\\.com)?/?([^/]+)$"                       , "replace": "https://ko-fi.com/$1"                }},
										"patreon"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?patreon\\.com)?/?([^/]+)$"                     , "replace": "https://patreon.com/$1"              }},
										"picarto"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?picarto\\.tv)?/?@?([^/]+)$"                    , "replace": "https://picarto.tv/$1"               }},
										"piczel"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?piczel\\.tv/watch)?/?@?([^/]+)$"               , "replace": "https://piczel.tv/watch/$1"          }},
										"pixiv"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?pixiv\\.net/(?:[a-z-]+/)?users)?/?@?([^/]+)/?$", "replace": "https://pixiv.net/en/users/$1"       }},
										"reddit"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?reddit\\.com)?/?(?:u?/)?@?([^/]+)/?$"          , "replace": "https://reddit.com/u/$1"             }},
										"sofurry"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?([^.]+)(?:\\.sofurry\\.com/?)?$"                  , "replace": "https://$1.sofurry.com"              }},
										"steam"         : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?steamcommunity\\.com/id)?/?@?([^/]+)$"         , "replace": "https://steamcommunity.com/id/$1"    }},
										"tiktok"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?tiktok.com)?/?@?([^/]+)/?$"                    , "replace": "https://tiktok.com/@$1"              }},
										"toyhou.se"     : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?toyhou\\.se)?/?@?([^/]+)/?$"                   , "replace": "https://toyhou.se/$1"                }},
										"transfur"      : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?transfur\\.com)?/?(?:(?:users)?/)?@?([^/]+)$"  , "replace": "https://transfur.com/users/$1"       }},
										"tumblr"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:www\\.)?(?:([^.]+)\\.)?(?:tumblr\\.com)?/?@?([^/]*)$"     , "replace": "https://$1$2.tumblr.com"             }},
										"twitch"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?twitch\\.tv)?/?@?([^/]+)$"                     , "replace": "https://twitch.tv/$1"                }},
										"twitter"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com)?/?@?([^/]+)$"             , "replace": "https://x.com/$1"                    }},
										"wattpad"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)wattpad\\.com/users)?/?@?([^/]+)/?$"            , "replace": "https://wattpad.com/user/$1"         }},
										"weasyl"        : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?weasyl\\.com)?/?@?~?([^/]+)$"                  , "replace": "https://weasyl.com/~$1"              }},
										"x"             : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?(?:twitter|x)\\.com)?/?@?([^/]+)$"             , "replace": "https://x.com/$1"                    }},
										"youtube"       : {"RegexReplaceOne": {"regex": "^(?:https?://)?(?:(?:www\\.)?youtube\\.com)?/?@?([^/]+)$"                   , "replace": "https://youtube.com/$1"              }}
									},
									"else": {"Error": "Unknown Furaffinity contact info like field."}
								}}
							}}}
						}}
					}
				}},



				{"PartMap": {
					"part": "RegDomain",
					"map": {
						"acer.com": {"RemoveQueryParamsMatching": {"StartsWith": "internal_"}},
						"addons.mozilla.org": {"RemoveQueryParams": ["platform", "appver"]},
						"alibaba.com": {"RemoveQueryParams": ["spm", "selectedCarrierCode", "fsb", "tracelog", "wx_navbar_tramsparent"]},
						"amtrak.com": {"RemoveQueryParams": ["atv", "cmp"]},
						"apexgamingpcs.com": {"RemoveQueryParams": ["linkId", "affluencerId"]},
						"atom.bio": {"RemoveQueryParam": "menu_origin"},
						"bbc.com": {"RemoveQueryParamsMatching": {"StartsWith": "at_"}},
						"be.net": {"SetHost": "www.behance.net"},
						"beacons.ai": {"RemoveQueryParamsMatching": {"Any": [
							{"StartsWith": "refer"},
							{"IsOneOf": ["pageViewSource", "show_back_button"]}
						]}},
						"bell.ca": {"All": [
							{"RemoveQueryParam": "INT"},
							{"If": {
								"if": {"FragmentIsSomeAndStartsWith": "INT="},
								"then": "RemoveFragment"
							}}
						]},
						"boosty.to": {"RemoveQueryParam": "share"},
						"booth.pm": {"RemoveQueryParam": "_gl"},
						"browserstack.com": {"ModifyPartIfSome": {
							"part": "Fragment",
							"modification": {"RemoveQueryParamsMatching": {"IsOneOf": ["ref", "source"]}}
						}},
						"bsky.social": {"If": {
							"if": {"Not": {"SubdomainIsOneOf": ["www", null]}},
							"then": {"SetWhole": {"Join": {"values": ["https://bsky.app/profile/", {"Part": "Domain"}]}}}
						}},
						"carrd.com": {"SetRegDomain": "carrd.co"},
						"cbc.ca": {"RemoveQueryParam": "__vfz"},
						"cbsnews.com": {"RemoveQueryParams": ["ftag", "linkId"]},
						"change.org": {"All": [
							{"ModifyPart": {
								"part": "Path",
								"modification": {"KeepMaybeBefore": "/exp/"}
							}},
							{"RemoveQueryParamsMatching": {"StartsWith": "recruit"}}
						]},
						"cnbc.com": {"RemoveQueryParam": "par"},
						"cnn.com": {"All": [
							{"RemoveQueryParams": ["bt_ee", "bt_ts", "source", "iid"]},
							{"If": {
								"if": {"PartContains": {"part": {"PathSegment": -1}, "value": "h_", "at": "Start"}},
								"then": {"RemovePathSegment": -1}
							}}
						]},
						"crunchyroll.com": {"RemoveQueryParam": "referrer"},
						"deviantart.com": {"If": {
							"if": {"Not": {"SubdomainIsOneOf": ["www", null]}},
							"then": {"All": [
								{"InsertPathSegmentAt": {"index": 0, "value": {"Part": "Subdomain"}}},
								{"SetSubdomain": null}
							]}
						}},
						"drinkctrl.com": {"RemoveQueryParams": ["ref", "tid"]},
						"duckduckgo.com": {"RemoveQueryParams": ["t", "atb", "ia"]},
						"duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion": {"RemoveQueryParams": ["t", "atb", "ia"]},
						"facebook.com": {"If": {
							"if": {"PathStartsWith": "/reel/"},
							"then": "RemoveQuery",
							"else": {"RemoveQueryParams": ["fs", "s", "mibextid", "rf", "share_url", "rdid", "extid"]}
						}},
						"fandom.com": {"All": [
							{"PartMap": {
								"part": {"PathSegment": 1},
								"map": {
									"Special:Search": {"RemoveQueryParams": ["scope", "navigationSearch"]}
								}
							}},
							{"If": {
								"if": {"FlagIsSet": "breezewiki"},
								"then": {"PartMap": {
									"part": {"PathSegment": 1},
									"map": {
										"Special:Search": {"All": [
											{"SetPart": {
												"part": {"QueryParam": "q"},
												"value": {"NoneTo": {
													"value": {"EmptyToNone": {"Part": {"PathSegmentsAfterFirstN": 2}}},
													"if_none": {"Part": {"QueryParam": "query"}}
												}}
											}},
											{"RemoveQueryParam": "query"},
											{"SetPath": {"Join": {
												"values": [{"Part": "Subdomain"}, "/search"]
											}}},
											{"SetHost": {"Var": "breezewiki_host"}}
										]}
									},
									"else": {"All": [
										{"InsertPathSegmentAt": {"index": 0, "value": {"Part": "Subdomain"}}},
										{"SetHost": {"Var": "breezewiki_host"}}
									]}
								}}
							}}
						]},
						"fori.io": {"SetHost": "www.foriio.com"},
						"furaffinity.net": {"All": [
							{"If": {
								"if": {"All": [
									{"FlagIsSet": "furaffinity_sfw"},
									{"SubdomainIsOneOf": ["www", null]}
								]},
								"then": {"SetSubdomain": "sfw"}}
							},
							{"If": {
								"if": {"All": [
									{"FlagIsSet": "furaffinity_unsfw"},
									{"SubdomainIs": "sfw"}
								]},
								"then": {"SetSubdomain": "www"}
							}}
						]},
						"gelbooru.com": {"If": {
							"if": {"QueryParamIs": {"param": "page", "value": "post"}},
							"then": {"RemoveQueryParam": "tags"}
						}},
						"go.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
						"gofundme.com": {"RemoveQueryParams": ["attribution_id", "ts", "v"]},
						"goodreads.com": {"If": {
							"if": {"PathStartsWith": "/book/show/"},
							"then": "RemoveQuery",
							"else": {"RemoveQueryParam": "ref_"}
						}},
						"history.com": {"If": {
							"if": {"ErrorToUnsatisfied": {"PartContains": {"part": "Fragment", "value": "link_time", "at": "Start"}}},
							"then": "RemoveFragment"
						}},
						"hp.com": {"RemoveQueryParamsMatching": {"Any": [
							{"IsOneOf": ["jumpid", "_its", "adcampaigngroup", "campaignID", "source", "subacctid", "subacctname"]},
							{"StartsWith": "sv_"}
						]}},
						"hulu.com": {"RemoveQueryParam": "from"},
						"inkbunny.net": {"If": {
							"if": {"PathIs": "/submissionsviewall.php"},
							"then": {"RemoveQueryParam": "rid"}
						}},
						"instagram.com": {"If": {
							"if": {"All": [
								{"FlagIsSet": "instagram_unprofilecard"},
								{"PathSegmentIs": {"index": 1, "value": "profilecard"}}
							]},
							"then": {"RemovePathSegment": 1}
						}},
						"ipetitions.com": {"If": {
							"if": {"PathStartsWith": "/petition/"},
							"then": "RemoveQuery"
						}},
						"lego.com": {"All": [
							{"If": {
								"if": {"FlagIsNotSet": "keep_affiliate"},
								"then": {"RemoveQueryParam": "CMP"}
							}},
							{"If": {
								"if": {"SubdomainIs": "shop"},
								"then": {"SetHost": "www.lego.com"}
							}}
						]},
						"lenovo.com": {"RemoveQueryParams": ["IPromoID", "orgRef"]},
						"linktr.ee": {"RemoveQueryParamsMatching": {"Any": [
							{"IsOneOf": ["ltsid"]},
							{"StartsWith": "lt_utm"}
						]}},
						"loblaws.ca": {"RemoveQueryParams": ["navid", "icid", "icta"]},
						"marshmallow-qa.com": {"RemoveQueryParam": "t"},
						"marvel.com": {"RemoveQueryParams": ["cid", "cmp", "att", "t", "DISCID", "r"]},
						"minds.com": {"RemoveQueryParam": "referrer"},
						"nature.com": {"RemoveQueryParam": "sharing_token"},
						"nytimes.com": {"RemoveQueryParams": ["smid", "smtyp"]},
						"overpass-turbo.eu": {"If": {
							"if": {"All": [
								{"PathStartsWith": "/s/"},
								{"FlagIsNotSet": "no_network"}
							]},
							"then": {"All": [
								{"Common": "universal"},
								"ExpandRedirect"
							]}
						}},
						"patreon.com": {"RemoveQueryParams": ["redirect_uri", "fan_landing", "fromConcierge", "redirect"]},
						"pawoo.net": {"RemoveQueryParam": "provider"},
						"pixiv.net": {"If": {
							"if": {"PathIs": "/member.php"},
							"then": {"SetWhole": {"Join": {"values": [
								"https://pixiv.net/users/",
								{"Part": {"QueryParam": "id"}}
							]}}}
						}},
						"razer.com": {"RemoveQueryParam": "cid"},
						"reddit.com": {"PartMap": {
							"part": {"PathSegment": 0},
							"map": {
								"search": {"RemoveQueryParams": ["cid", "share_id"]},
								"domain": {"AllowQueryParams": ["count", "after"]}
							},
							"else": {"AllowQueryParam": "f"}
						}},
						"rule34.xxx": {"If": {
							"if": {"All": [
								{"FlagIsSet": "remove_unused_search_query"},
								{"QueryParamIs": {"param": "s", "value": "view"}}
							]},
							"then": {"RemoveQueryParam": "tags"}
						}},
						"snapchat.com": {"RemoveQueryParams": ["purpose", "sp", "invite_id", "share_id", "sid"]},
						"spotify.com": {"All": [
							{"If": {
								"if": {"PathSegmentIs": {"index": 1, "value": "album"}},
								"then": {"RemovePathSegment": 0}
							}},
							{"If": {
								"if": {"PathStartsWith": "/album/"},
								"then": "RemoveQuery",
								"else": {"RemoveQueryParams": ["si", "nd", "_branch_match_id"]}
							}}
						]},
						"stackoverflow.com": {"RemoveQueryParams": ["so_medium", "so_source", "c"]},
						"sta.sh": {"All": [
							{"SetHost": "www.deviantart.com"},
							{"SetPathSegment": {"index": 0, "value": "stash"}}
						]},
						"steampowered.com": {"RemoveQueryParam": "snr"},
						"subscribestar.adult": {"RemoveQueryParam": "redirect_notice"},
						"support.google.com": {"AllowQueryParam": "q"},
						"teepublic.com": {"All": [
							{"If": {
								"if": {"ErrorToUnsatisfied": {"PartContains": {"part": "Fragment", "value": "D1V", "at": "End"}}},
								"then": "RemoveFragment"
							}},
							{"RemoveQueryParam": "countrycode"}
						]},
						"teespring.com": "RemoveQuery",
						"theguardian.com": {"RemoveQueryParam": "CMP"},
						"thelancet.com": {"If": {
							"if": {"PathSegmentIsOneOf": {"index": 0, "values": ["commissions", "journals"]}},
							"then": "RemoveQuery"
						}},
						"theonion.com": {"AllowQueryParam": "s"},
						"thrn.co": {"All": [
							{"SetHost": "throne.com"},
							{"RemovePathSegment": 0}
						]},
						"tiktok.com": {"RemoveQueryParamsMatching": {"Any": [
							{"IsOneOf": ["checksum", "source", "u_code", "timestamp", "user_id", "enable_checksum"]},
							{"ContainsAny": {"values": ["_", "sec_", "ug", "is_from", "sender", "share", "social_"], "at": "Start"}}
						]}},
						"tumblr.com": {"All": [
							{"If": {
								"if": {"All": [
									{"SubdomainIs": "at"},
									{"FlagIsNotSet": "no_network"}
								]},
								"then": {"All": [
									{"Common": "universal"},
									"ExpandRedirect"
								]}
							}},
							{"If": {
								"if": {"HasQueryParam": "redirect_to"},
								"then": {"All": [
									{"CopyPart": {"from": {"QueryParam": "redirect_to"}, "to": "Path"}},
									"RemoveQuery"
								]}
							}},
							{"If": {
								"if": {"PathIs": "/safe-mode"},
								"then": {"SetWhole": {"AssertMatches": {
									"value": {"Part": {"QueryParam": "url"}},
									"matcher": {"Regex": "^https?://([^/]+\\.tumblr\\.com\\.?/?|(www\\.)?tumblr\\.com\\.?/[^/]+/?)$"}
								}}}
							}},
							{"If": {
								"if": {"PathStartsWith": "/login_required/"},
								"then": {"RemovePathSegment": 0}
							}},
							{"If": {
								"if": {"PathStartsWith": "/search/"},
								"then": {"RemoveQueryParam": "source"},
								"else": "RemoveQuery"
							}},
							{"If": {
								"if": {"All": [
									{"FlagIsSet": "tumblr_unsubdomain_blog"},
									{"Not": {"Any": [
										{"SubdomainIsOneOf": ["at", "www", null]},
										{"PartContains": {"part": "Subdomain", "value": "."}}
									]}}
								]},
								"then": {"All": [
									{"If": {
										"if": {"PathStartsWith": "/post/"},
										"then": {"RemovePathSegment": 0}
									}},
									{"InsertPathSegmentAt": {"index": 0, "value": {"Part": "Subdomain"}}},
									{"SetSubdomain": null}
								]}
							}}
						]},
						"twitter.com": {"SetHost": "x.com"},
						"washingtonpost.com": {"All": [
							{"If": {
								"if": {"ErrorToUnsatisfied": {"PartContains": {"part": "Fragment", "value": "link", "at": "Start"}}},
								"then": "RemoveFragment"
							}},
							{"RemoveQueryParams": ["itid", "nid", "arcId", "account_location", "tid", "oscode", "s_l", "acqEntType", "p", "s_ct"]}
						]},
						"xiaohongshu.com": {"RemoveQueryParamsMatching": {"ContainsAny": {
							"values": ["xsec", "xhs", "app", "share"],
							"at": "Start"
						}}},
						"yahoo.com": {"RemoveQueryParams": ["p", "src", "pspid", "activity", ".src", "specId", "y"]},
						"youtu.be": {"All": [
							{"RemoveQueryParams": ["si", "feature", "pp"]},
							{"SetHost" : "www.youtube.com"},
							{"CopyPart": {"from": {"PathSegment": 0}, "to": {"QueryParam": "v"}}},
							{"SetPath" : "/watch"}
						]},
						"youtube.com": {"All": [
							{"RemoveQueryParams": ["si", "feature", "pp", "app", "ab_channel"]},
							{"If": {
								"if": {"PartMap": {
									"part": {"PathSegment": 0},
									"map": {
										"shorts": {"FlagIsSet": "youtube_unshort"},
										"live"  : {"FlagIsSet": "youtube_unlive"},
										"embed" : {"FlagIsSet": "youtube_unembed"}
									}
								}},
								"then": {"All": [
									{"CopyPart": {"from": {"PathSegment": 1}, "to": {"QueryParam": "v"}}},
									{"SetPath": "/watch"}
								]}
							}},
							{"If": {
								"if": {"All": [
									{"FlagIsSet": "youtube_unplaylist"},
									{"PathStartsWith": "/watch"}
								]},
								"then": {"RemoveQueryParam": "list"}
							}},
							{"If": {
								"if": {"FlagIsSet": "youtube_remove_sub_confirmation"},
								"then": {"RemoveQueryParam": "sub_confirmation"}
							}},
							{"If": {
								"if": {"FlagIsSet": "invidious"},
								"then": {"SetHost": {"Var": "invidious_host"}}
							}}
						]}
					}
				}},
				{"PartMap": {
					"part": "DomainSuffix",
					"map": {
						"carrd.co": {"RemoveQueryParam": "ref"}
					}
				}},
				{"PartMap": {
					"part": "NormalizedHost",
					"map": {
						"aliexpress.com": {"If": {
							"if": {"PathStartsWith": "/item/"},
							"then": "RemoveQuery"
						}},
						"apps.apple.com": {"RemoveQueryParams": ["pt", "ct", "mt"]},
						"bsky.app": {"If": {
							"if": {"PathStartsWith": "/profile/"},
							"then": {"All": [
								{"If": {
									"if": {"PartMatches": {
										"part": {"PathSegment": 1},
										"matcher": {"All": [
											{"Not": {"EndsWith": ".bsky.social"}},
											{"ErrorToSatisfied": {"Modified": {
												"modification": {"KeepAfter": "."},
												"matcher": {"IsPrefixOf": "bsky.social"}
											}}}
										]}
									}},
									"then": {"ModifyPart": {
										"part": {"PathSegment": 1},
										"modification": {"All": [
											{"IgnoreError": {"KeepBefore": "."}},
											{"Append": ".bsky.social"}
										]}
									}}
								}},
								{"If": {
									"if": {"All": [
										{"FlagIsSet": "embed_compatibility"},
										{"PathSegmentIs": {"index": 2, "value": "post"}}
									]},
									"then": {"SetHost": "fxbsky.app"}
								}}
							]}
						}},
						"danbooru.donmai.us": {"If": {
							"if": {"All": [
								{"PathStartsWith": "/posts"},
								{"FlagIsSet": "remove_unused_search_query"}
							]},
							"then": {"RemoveQueryParam": "q"}
						}},
						"drive.google.com": {"If": {
							"if": {"All": [
								{"FlagIsSet": "unmobile"},
								{"PathStartsWith": "/drive/mobile/"}
							]},
							"then": {"RemovePathSegment": 1}
						}},
						"in.blissy.com": "RemoveQuery",
						"info.blissy.com": "RemoveQuery",
						"l.mlive.com": {"Common": {
							"name": "extract_from_page",
							"args": {
								"string_modifications": {
									"extractor": {"All": [
										{"StripBefore": "<meta http-equiv=\"refresh\""},
										{"GetHtmlAttribute": "content"},
										{"KeepAfter": "url="}
									]}
								}
							}
						}},
						"media.igram.world": {"GetUrlFromQueryParam": "uri"},
						"of.com": {"SetHost": "onlyfans.com"},
						"overview.mail.yahoo.com": "RemoveQuery",
						"play.google.com": {"All": [
							{"RemoveQueryParam": "referrer"},
							{"If": {
								"if": {"PathIs": "/"},
								"then": {"SetPath": "/store"}
							}}
						]},
						"sale.alibaba.com": {"If": {
							"if": {"PathStartsWith": "/p/"},
							"then": {"RemoveQueryParams": ["wx_navbar_transparent", "path", "ncms_spm", "prefetchKey", "wx_xpage", "spm", "cardType"]}
						}},
						"stackoverflow.com": {"If": {
							"if": {"PathIs": "/"},
							"then": {"SetPath": "/questions"}
						}},
						"support.google.com": {"RemoveQueryParam": "ref_topic"},
						"ts.la": {"SetWhole": {"Join": {
							"values": [
								"https://www.tesla.com/referral",
								{"Part": "Path"}
							]
						}}},
						"wh.gov": {"SetHost": "www.whitehouse.gov"},
						"wlo.link": {"SetHost": "link.space"},
						"x.com": {"All": [
							{"If": {
								"if": {"PathIs": "/i/flow/login"},
								"then": {"SetWhole": {"Join": {
									"values": ["https://x.com", {"Part": {"QueryParam": "redirect_after_login"}}]
								}}}
							}},
							{"PartMap": {
								"part": {"PathSegment": 0},
								"map": {
									"i": {"All": [
										{"If": {
											"if": {"StringIsSome": {"Var": {"type": "TaskContext", "name": "handle"}}},
											"then": {"ModifyPart": {
												"part": "Path",
												"modification": {"RegexReplaceOne": {
													"regex": "i/web|i/user/\\d+",
													"replace": {"Var": {"type": "TaskContext", "name": "handle"}}
												}}
											}}
										}},
										"RemoveQuery"
									]},
									"intent": {"AllowQueryParams": ["screen_name", "tweet_id", "text"]},
									"search": {"AllowQueryParams": ["q", "f", "pf", "lf"]}
								},
								"else": "RemoveQuery"
							}},
							{"If": {
								"if": {"All": [
									{"FlagIsSet": "embed_compatibility"},
									{"PathSegmentIs": {"index": 1, "value": "status"}}
								]},
								"then": {"SetHost": {"Var": "twitter_embed_host"}}
							}},
							{"If": {
								"if": {"FlagIsSet": "nitter"},
								"then": {"SetHost": {"Var": "nitter_host"}}
							}}
						]},
						"xp-pen.com": {"RemoveQueryParams": ["channel", "papClickId"]}
					}
				}},
				{"PartMap": {
					"part": "DomainMiddle",
					"map": {
						"amazon": {"If": {
							"if": {"PartContains": {"part": "Path", "value": "/dp/"}},
							"then": {"All": [
								{"If": {
									"if": {"FlagIsSet": "keep_affiliate"},
									"then": {"AllowQueryParams": ["aod", "tag"]},
									"else": {"AllowQueryParam": "aod"}
								}},
								{"ModifyPart": {"part": "Path", "modification": {"All": [
									{"StripBefore": "/dp/"},
									{"KeepMaybeBefore": "/ref="}
								]}}}
							]},
							"else": {"PartMap": {
								"part": "Path",
								"map": {
									"/s": {"AllowQueryParams": ["k", "i", "rh", "bbn"]},
									"/gp/buyagain": {"AllowQueryParam": "ats"},
									"/gp/customer-reviews": "RemoveQuery",
									"/amazonprime": "RemoveQuery"
								},
								"else": {"If": {
									"if": {"PathStartsWith": "/gp/offer-listing/"},
									"then": {"All": [
										{"ModifyPart": {"part": "Path", "modification": {"Replacen": {"find": "gp/offer-listing", "replace": "dp", "count": 1}}}},
										{"SetQuery": "aod=1"}
									]},
									"else": {"RemoveQueryParamsMatching": {"Any": [
										{"IsOneOf": ["ref", "ref_", "ie", "_encoding", "content-id", "store_ref"]},
										{"StartsWith": "pd_"},
										{"StartsWith": "pf_"}
									]}}
								}}
							}}
						}},
						"bestbuy": {"RemoveQueryParam": "icmp"},
						"ebay": {"If": {
							"if": {"PathStartsWith": "/itm/"},
							"then": "RemoveQuery"
						}},
						"google": {"All": [
							{"PartMap": {
								"part": "Path",
								"map": {
									"/search": {"AllowQueryParams": ["hl", "q", "tbm", "p", "udm", "filter", "vsrid", "vsdim", "vsint", "ins_vfs", "nfpr", "start"]},
									"/setprefs": {"RemoveQueryParams": ["sa", "ved", "sca_esv", "usp"]}
								},
								"else": {"RemoveQueryParams": ["sca_esv", "usp"]}
							}},
							{"ModifyPartIfSome": {
								"part": "Fragment",
								"modification": {"RemoveQueryParamsMatching": {"IsOneOf": ["vhid", "vssid"]}}
							}}
						]},
						"onion": {"If": {
							"if": {"FlagIsSet": "tor2web2tor"},
							"then": {"SetDomainSuffix": null}
						}},
						"pinterest": {"If": {
							"if": {"Not": {"PathStartsWith": "/search"}},
							"then": "RemoveQuery"
						}},
						"twitch.com": {"SetHost": "www.twitch.tv"},
						"walmart": {"If": {
							"if": {"PathSegmentIs": {"index": 1, "value": "ip"}},
							"then": {"RemovePathSegment": 2}
						}}
					}
				}},



				{"Common": "universal"}
			]}
		}}
	]
}
